import{c as G,b as gi,a as Mn,t as Ru,e as Mu,g as Cu}from"./index-Bn842W7X.js";import{r as so,i as wt,e as mi}from"./events-E3zKwRkY.js";import{p as ku,a as Iu,b as xu}from"./hooks.module-hYI_ep3v.js";var Cc={},_n={},bi={};Object.defineProperty(bi,"__esModule",{value:!0});bi.walletLogo=void 0;const Au=(e,t)=>{let r;switch(e){case"standard":return r=t,`data:image/svg+xml,%3Csvg width='${t}' height='${r}' viewBox='0 0 1024 1024' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Crect width='1024' height='1024' fill='%230052FF'/%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M152 512C152 710.823 313.177 872 512 872C710.823 872 872 710.823 872 512C872 313.177 710.823 152 512 152C313.177 152 152 313.177 152 512ZM420 396C406.745 396 396 406.745 396 420V604C396 617.255 406.745 628 420 628H604C617.255 628 628 617.255 628 604V420C628 406.745 617.255 396 604 396H420Z' fill='white'/%3E %3C/svg%3E `;case"circle":return r=t,`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='${t}' height='${r}' viewBox='0 0 999.81 999.81'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052fe;%7D.cls-2%7Bfill:%23fefefe;%7D.cls-3%7Bfill:%230152fe;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M655-115.9h56c.83,1.59,2.36.88,3.56,1a478,478,0,0,1,75.06,10.42C891.4-81.76,978.33-32.58,1049.19,44q116.7,126,131.94,297.61c.38,4.14-.34,8.53,1.78,12.45v59c-1.58.84-.91,2.35-1,3.56a482.05,482.05,0,0,1-10.38,74.05c-24,106.72-76.64,196.76-158.83,268.93s-178.18,112.82-287.2,122.6c-4.83.43-9.86-.25-14.51,1.77H654c-1-1.68-2.69-.91-4.06-1a496.89,496.89,0,0,1-105.9-18.59c-93.54-27.42-172.78-77.59-236.91-150.94Q199.34,590.1,184.87,426.58c-.47-5.19.25-10.56-1.77-15.59V355c1.68-1,.91-2.7,1-4.06a498.12,498.12,0,0,1,18.58-105.9c26-88.75,72.64-164.9,140.6-227.57q126-116.27,297.21-131.61C645.32-114.57,650.35-113.88,655-115.9Zm377.92,500c0-192.44-156.31-349.49-347.56-350.15-194.13-.68-350.94,155.13-352.29,347.42-1.37,194.55,155.51,352.1,348.56,352.47C876.15,734.23,1032.93,577.84,1032.93,384.11Z' transform='translate(-183.1 115.9)'/%3E%3Cpath class='cls-2' d='M1032.93,384.11c0,193.73-156.78,350.12-351.29,349.74-193-.37-349.93-157.92-348.56-352.47C334.43,189.09,491.24,33.28,685.37,34,876.62,34.62,1032.94,191.67,1032.93,384.11ZM683,496.81q43.74,0,87.48,0c15.55,0,25.32-9.72,25.33-25.21q0-87.48,0-175c0-15.83-9.68-25.46-25.59-25.46H595.77c-15.88,0-25.57,9.64-25.58,25.46q0,87.23,0,174.45c0,16.18,9.59,25.7,25.84,25.71Z' transform='translate(-183.1 115.9)'/%3E%3Cpath class='cls-3' d='M683,496.81H596c-16.25,0-25.84-9.53-25.84-25.71q0-87.23,0-174.45c0-15.82,9.7-25.46,25.58-25.46H770.22c15.91,0,25.59,9.63,25.59,25.46q0,87.47,0,175c0,15.49-9.78,25.2-25.33,25.21Q726.74,496.84,683,496.81Z' transform='translate(-183.1 115.9)'/%3E%3C/svg%3E`;case"text":return r=(.1*t).toFixed(2),`data:image/svg+xml,%3Csvg width='${t}' height='${r}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 528.15 53.64'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052ff;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3ECoinbase_Wordmark_SubBrands_ALL%3C/title%3E%3Cpath class='cls-1' d='M164.45,15a15,15,0,0,0-11.74,5.4V0h-8.64V52.92h8.5V48a15,15,0,0,0,11.88,5.62c10.37,0,18.21-8.21,18.21-19.3S174.67,15,164.45,15Zm-1.3,30.67c-6.19,0-10.73-4.83-10.73-11.31S157,23,163.22,23s10.66,4.82,10.66,11.37S169.34,45.65,163.15,45.65Zm83.31-14.91-6.34-.93c-3-.43-5.18-1.44-5.18-3.82,0-2.59,2.8-3.89,6.62-3.89,4.18,0,6.84,1.8,7.42,4.76h8.35c-.94-7.49-6.7-11.88-15.55-11.88-9.15,0-15.2,4.68-15.2,11.3,0,6.34,4,10,12,11.16l6.33.94c3.1.43,4.83,1.65,4.83,4,0,2.95-3,4.17-7.2,4.17-5.12,0-8-2.09-8.43-5.25h-8.49c.79,7.27,6.48,12.38,16.84,12.38,9.44,0,15.7-4.32,15.7-11.74C258.12,35.28,253.58,31.82,246.46,30.74Zm-27.65-2.3c0-8.06-4.9-13.46-15.27-13.46-9.79,0-15.26,5-16.34,12.6h8.57c.43-3,2.73-5.4,7.63-5.4,4.39,0,6.55,1.94,6.55,4.32,0,3.09-4,3.88-8.85,4.39-6.63.72-14.84,3-14.84,11.66,0,6.7,5,11,12.89,11,6.19,0,10.08-2.59,12-6.7.28,3.67,3,6.05,6.84,6.05h5v-7.7h-4.25Zm-8.5,9.36c0,5-4.32,8.64-9.57,8.64-3.24,0-6-1.37-6-4.25,0-3.67,4.39-4.68,8.42-5.11s6-1.22,7.13-2.88ZM281.09,15c-11.09,0-19.23,8.35-19.23,19.36,0,11.6,8.72,19.3,19.37,19.3,9,0,16.06-5.33,17.86-12.89h-9c-1.3,3.31-4.47,5.19-8.71,5.19-5.55,0-9.72-3.46-10.66-9.51H299.3V33.12C299.3,22.46,291.53,15,281.09,15Zm-9.87,15.26c1.37-5.18,5.26-7.7,9.72-7.7,4.9,0,8.64,2.8,9.51,7.7ZM19.3,23a9.84,9.84,0,0,1,9.5,7h9.14c-1.65-8.93-9-15-18.57-15A19,19,0,0,0,0,34.34c0,11.09,8.28,19.3,19.37,19.3,9.36,0,16.85-6,18.5-15H28.8a9.75,9.75,0,0,1-9.43,7.06c-6.27,0-10.66-4.83-10.66-11.31S13,23,19.3,23Zm41.11-8A19,19,0,0,0,41,34.34c0,11.09,8.28,19.3,19.37,19.3A19,19,0,0,0,79.92,34.27C79.92,23.33,71.64,15,60.41,15Zm.07,30.67c-6.19,0-10.73-4.83-10.73-11.31S54.22,23,60.41,23s10.8,4.89,10.8,11.37S66.67,45.65,60.48,45.65ZM123.41,15c-5.62,0-9.29,2.3-11.45,5.54V15.7h-8.57V52.92H112V32.69C112,27,115.63,23,121,23c5,0,8.06,3.53,8.06,8.64V52.92h8.64V31C137.66,21.6,132.84,15,123.41,15ZM92,.36a5.36,5.36,0,0,0-5.55,5.47,5.55,5.55,0,0,0,11.09,0A5.35,5.35,0,0,0,92,.36Zm-9.72,23h5.4V52.92h8.64V15.7h-14Zm298.17-7.7L366.2,52.92H372L375.29,44H392l3.33,8.88h6L386.87,15.7ZM377,39.23l6.45-17.56h.1l6.56,17.56ZM362.66,15.7l-7.88,29h-.11l-8.14-29H341l-8,28.93h-.1l-8-28.87H319L329.82,53h5.45l8.19-29.24h.11L352,53h5.66L368.1,15.7Zm135.25,0v4.86h12.32V52.92h5.6V20.56h12.32V15.7ZM467.82,52.92h25.54V48.06H473.43v-12h18.35V31.35H473.43V20.56h19.93V15.7H467.82ZM443,15.7h-5.6V52.92h24.32V48.06H443Zm-30.45,0h-5.61V52.92h24.32V48.06H412.52Z'/%3E%3C/svg%3E`;case"textWithLogo":return r=(.25*t).toFixed(2),`data:image/svg+xml,%3Csvg width='${t}' height='${r}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 308.44 77.61'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052ff;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M142.94,20.2l-7.88,29H135l-8.15-29h-5.55l-8,28.93h-.11l-8-28.87H99.27l10.84,37.27h5.44l8.2-29.24h.1l8.41,29.24h5.66L148.39,20.2Zm17.82,0L146.48,57.42h5.82l3.28-8.88h16.65l3.34,8.88h6L167.16,20.2Zm-3.44,23.52,6.45-17.55h.11l6.56,17.55ZM278.2,20.2v4.86h12.32V57.42h5.6V25.06h12.32V20.2ZM248.11,57.42h25.54V52.55H253.71V40.61h18.35V35.85H253.71V25.06h19.94V20.2H248.11ZM223.26,20.2h-5.61V57.42H242V52.55H223.26Zm-30.46,0h-5.6V57.42h24.32V52.55H192.8Zm-154,38A19.41,19.41,0,1,1,57.92,35.57H77.47a38.81,38.81,0,1,0,0,6.47H57.92A19.39,19.39,0,0,1,38.81,58.21Z'/%3E%3C/svg%3E`;case"textLight":return r=(.1*t).toFixed(2),`data:image/svg+xml,%3Csvg width='${t}' height='${r}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 528.15 53.64'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fefefe;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3ECoinbase_Wordmark_SubBrands_ALL%3C/title%3E%3Cpath class='cls-1' d='M164.45,15a15,15,0,0,0-11.74,5.4V0h-8.64V52.92h8.5V48a15,15,0,0,0,11.88,5.62c10.37,0,18.21-8.21,18.21-19.3S174.67,15,164.45,15Zm-1.3,30.67c-6.19,0-10.73-4.83-10.73-11.31S157,23,163.22,23s10.66,4.82,10.66,11.37S169.34,45.65,163.15,45.65Zm83.31-14.91-6.34-.93c-3-.43-5.18-1.44-5.18-3.82,0-2.59,2.8-3.89,6.62-3.89,4.18,0,6.84,1.8,7.42,4.76h8.35c-.94-7.49-6.7-11.88-15.55-11.88-9.15,0-15.2,4.68-15.2,11.3,0,6.34,4,10,12,11.16l6.33.94c3.1.43,4.83,1.65,4.83,4,0,2.95-3,4.17-7.2,4.17-5.12,0-8-2.09-8.43-5.25h-8.49c.79,7.27,6.48,12.38,16.84,12.38,9.44,0,15.7-4.32,15.7-11.74C258.12,35.28,253.58,31.82,246.46,30.74Zm-27.65-2.3c0-8.06-4.9-13.46-15.27-13.46-9.79,0-15.26,5-16.34,12.6h8.57c.43-3,2.73-5.4,7.63-5.4,4.39,0,6.55,1.94,6.55,4.32,0,3.09-4,3.88-8.85,4.39-6.63.72-14.84,3-14.84,11.66,0,6.7,5,11,12.89,11,6.19,0,10.08-2.59,12-6.7.28,3.67,3,6.05,6.84,6.05h5v-7.7h-4.25Zm-8.5,9.36c0,5-4.32,8.64-9.57,8.64-3.24,0-6-1.37-6-4.25,0-3.67,4.39-4.68,8.42-5.11s6-1.22,7.13-2.88ZM281.09,15c-11.09,0-19.23,8.35-19.23,19.36,0,11.6,8.72,19.3,19.37,19.3,9,0,16.06-5.33,17.86-12.89h-9c-1.3,3.31-4.47,5.19-8.71,5.19-5.55,0-9.72-3.46-10.66-9.51H299.3V33.12C299.3,22.46,291.53,15,281.09,15Zm-9.87,15.26c1.37-5.18,5.26-7.7,9.72-7.7,4.9,0,8.64,2.8,9.51,7.7ZM19.3,23a9.84,9.84,0,0,1,9.5,7h9.14c-1.65-8.93-9-15-18.57-15A19,19,0,0,0,0,34.34c0,11.09,8.28,19.3,19.37,19.3,9.36,0,16.85-6,18.5-15H28.8a9.75,9.75,0,0,1-9.43,7.06c-6.27,0-10.66-4.83-10.66-11.31S13,23,19.3,23Zm41.11-8A19,19,0,0,0,41,34.34c0,11.09,8.28,19.3,19.37,19.3A19,19,0,0,0,79.92,34.27C79.92,23.33,71.64,15,60.41,15Zm.07,30.67c-6.19,0-10.73-4.83-10.73-11.31S54.22,23,60.41,23s10.8,4.89,10.8,11.37S66.67,45.65,60.48,45.65ZM123.41,15c-5.62,0-9.29,2.3-11.45,5.54V15.7h-8.57V52.92H112V32.69C112,27,115.63,23,121,23c5,0,8.06,3.53,8.06,8.64V52.92h8.64V31C137.66,21.6,132.84,15,123.41,15ZM92,.36a5.36,5.36,0,0,0-5.55,5.47,5.55,5.55,0,0,0,11.09,0A5.35,5.35,0,0,0,92,.36Zm-9.72,23h5.4V52.92h8.64V15.7h-14Zm298.17-7.7L366.2,52.92H372L375.29,44H392l3.33,8.88h6L386.87,15.7ZM377,39.23l6.45-17.56h.1l6.56,17.56ZM362.66,15.7l-7.88,29h-.11l-8.14-29H341l-8,28.93h-.1l-8-28.87H319L329.82,53h5.45l8.19-29.24h.11L352,53h5.66L368.1,15.7Zm135.25,0v4.86h12.32V52.92h5.6V20.56h12.32V15.7ZM467.82,52.92h25.54V48.06H473.43v-12h18.35V31.35H473.43V20.56h19.93V15.7H467.82ZM443,15.7h-5.6V52.92h24.32V48.06H443Zm-30.45,0h-5.61V52.92h24.32V48.06H412.52Z'/%3E%3C/svg%3E`;case"textWithLogoLight":return r=(.25*t).toFixed(2),`data:image/svg+xml,%3Csvg width='${t}' height='${r}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 308.44 77.61'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fefefe;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M142.94,20.2l-7.88,29H135l-8.15-29h-5.55l-8,28.93h-.11l-8-28.87H99.27l10.84,37.27h5.44l8.2-29.24h.1l8.41,29.24h5.66L148.39,20.2Zm17.82,0L146.48,57.42h5.82l3.28-8.88h16.65l3.34,8.88h6L167.16,20.2Zm-3.44,23.52,6.45-17.55h.11l6.56,17.55ZM278.2,20.2v4.86h12.32V57.42h5.6V25.06h12.32V20.2ZM248.11,57.42h25.54V52.55H253.71V40.61h18.35V35.85H253.71V25.06h19.94V20.2H248.11ZM223.26,20.2h-5.61V57.42H242V52.55H223.26Zm-30.46,0h-5.6V57.42h24.32V52.55H192.8Zm-154,38A19.41,19.41,0,1,1,57.92,35.57H77.47a38.81,38.81,0,1,0,0,6.47H57.92A19.39,19.39,0,0,1,38.81,58.21Z'/%3E%3C/svg%3E`;default:return r=t,`data:image/svg+xml,%3Csvg width='${t}' height='${r}' viewBox='0 0 1024 1024' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Crect width='1024' height='1024' fill='%230052FF'/%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M152 512C152 710.823 313.177 872 512 872C710.823 872 872 710.823 872 512C872 313.177 710.823 152 512 152C313.177 152 152 313.177 152 512ZM420 396C406.745 396 396 406.745 396 420V604C396 617.255 406.745 628 420 628H604C617.255 628 628 617.255 628 604V420C628 406.745 617.255 396 604 396H420Z' fill='white'/%3E %3C/svg%3E `}};bi.walletLogo=Au;var vi={};Object.defineProperty(vi,"__esModule",{value:!0});vi.LINK_API_URL=void 0;vi.LINK_API_URL="https://www.walletlink.org";var q={},oo={exports:{}};oo.exports;(function(e){(function(t,r){function n(m,o){if(!m)throw new Error(o||"Assertion failed")}function i(m,o){m.super_=o;var u=function(){};u.prototype=o.prototype,m.prototype=new u,m.prototype.constructor=m}function s(m,o,u){if(s.isBN(m))return m;this.negative=0,this.words=null,this.length=0,this.red=null,m!==null&&((o==="le"||o==="be")&&(u=o,o=10),this._init(m||0,o||10,u||"be"))}typeof t=="object"?t.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=so.Buffer}catch{}s.isBN=function(o){return o instanceof s?!0:o!==null&&typeof o=="object"&&o.constructor.wordSize===s.wordSize&&Array.isArray(o.words)},s.max=function(o,u){return o.cmp(u)>0?o:u},s.min=function(o,u){return o.cmp(u)<0?o:u},s.prototype._init=function(o,u,f){if(typeof o=="number")return this._initNumber(o,u,f);if(typeof o=="object")return this._initArray(o,u,f);u==="hex"&&(u=16),n(u===(u|0)&&u>=2&&u<=36),o=o.toString().replace(/\s+/g,"");var g=0;o[0]==="-"&&(g++,this.negative=1),g<o.length&&(u===16?this._parseHex(o,g,f):(this._parseBase(o,u,g),f==="le"&&this._initArray(this.toArray(),u,f)))},s.prototype._initNumber=function(o,u,f){o<0&&(this.negative=1,o=-o),o<67108864?(this.words=[o&67108863],this.length=1):o<4503599627370496?(this.words=[o&67108863,o/67108864&67108863],this.length=2):(n(o<9007199254740992),this.words=[o&67108863,o/67108864&67108863,1],this.length=3),f==="le"&&this._initArray(this.toArray(),u,f)},s.prototype._initArray=function(o,u,f){if(n(typeof o.length=="number"),o.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(o.length/3),this.words=new Array(this.length);for(var g=0;g<this.length;g++)this.words[g]=0;var v,R,I=0;if(f==="be")for(g=o.length-1,v=0;g>=0;g-=3)R=o[g]|o[g-1]<<8|o[g-2]<<16,this.words[v]|=R<<I&67108863,this.words[v+1]=R>>>26-I&67108863,I+=24,I>=26&&(I-=26,v++);else if(f==="le")for(g=0,v=0;g<o.length;g+=3)R=o[g]|o[g+1]<<8|o[g+2]<<16,this.words[v]|=R<<I&67108863,this.words[v+1]=R>>>26-I&67108863,I+=24,I>=26&&(I-=26,v++);return this._strip()};function c(m,o){var u=m.charCodeAt(o);if(u>=48&&u<=57)return u-48;if(u>=65&&u<=70)return u-55;if(u>=97&&u<=102)return u-87;n(!1,"Invalid character in "+m)}function h(m,o,u){var f=c(m,u);return u-1>=o&&(f|=c(m,u-1)<<4),f}s.prototype._parseHex=function(o,u,f){this.length=Math.ceil((o.length-u)/6),this.words=new Array(this.length);for(var g=0;g<this.length;g++)this.words[g]=0;var v=0,R=0,I;if(f==="be")for(g=o.length-1;g>=u;g-=2)I=h(o,u,g)<<v,this.words[R]|=I&67108863,v>=18?(v-=18,R+=1,this.words[R]|=I>>>26):v+=8;else{var b=o.length-u;for(g=b%2===0?u+1:u;g<o.length;g+=2)I=h(o,u,g)<<v,this.words[R]|=I&67108863,v>=18?(v-=18,R+=1,this.words[R]|=I>>>26):v+=8}this._strip()};function d(m,o,u,f){for(var g=0,v=0,R=Math.min(m.length,u),I=o;I<R;I++){var b=m.charCodeAt(I)-48;g*=f,b>=49?v=b-49+10:b>=17?v=b-17+10:v=b,n(b>=0&&v<f,"Invalid character"),g+=v}return g}s.prototype._parseBase=function(o,u,f){this.words=[0],this.length=1;for(var g=0,v=1;v<=67108863;v*=u)g++;g--,v=v/u|0;for(var R=o.length-f,I=R%g,b=Math.min(R,R-I)+f,l=0,S=f;S<b;S+=g)l=d(o,S,S+g,u),this.imuln(v),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(I!==0){var U=1;for(l=d(o,S,o.length,u),S=0;S<I;S++)U*=u;this.imuln(U),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this._strip()},s.prototype.copy=function(o){o.words=new Array(this.length);for(var u=0;u<this.length;u++)o.words[u]=this.words[u];o.length=this.length,o.negative=this.negative,o.red=this.red};function p(m,o){m.words=o.words,m.length=o.length,m.negative=o.negative,m.red=o.red}if(s.prototype._move=function(o){p(o,this)},s.prototype.clone=function(){var o=new s(null);return this.copy(o),o},s.prototype._expand=function(o){for(;this.length<o;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=w}catch{s.prototype.inspect=w}else s.prototype.inspect=w;function w(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var y=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],k=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],N=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(o,u){o=o||10,u=u|0||1;var f;if(o===16||o==="hex"){f="";for(var g=0,v=0,R=0;R<this.length;R++){var I=this.words[R],b=((I<<g|v)&16777215).toString(16);v=I>>>24-g&16777215,g+=2,g>=26&&(g-=26,R--),v!==0||R!==this.length-1?f=y[6-b.length]+b+f:f=b+f}for(v!==0&&(f=v.toString(16)+f);f.length%u!==0;)f="0"+f;return this.negative!==0&&(f="-"+f),f}if(o===(o|0)&&o>=2&&o<=36){var l=k[o],S=N[o];f="";var U=this.clone();for(U.negative=0;!U.isZero();){var V=U.modrn(S).toString(o);U=U.idivn(S),U.isZero()?f=V+f:f=y[l-V.length]+V+f}for(this.isZero()&&(f="0"+f);f.length%u!==0;)f="0"+f;return this.negative!==0&&(f="-"+f),f}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var o=this.words[0];return this.length===2?o+=this.words[1]*67108864:this.length===3&&this.words[2]===1?o+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-o:o},s.prototype.toJSON=function(){return this.toString(16,2)},a&&(s.prototype.toBuffer=function(o,u){return this.toArrayLike(a,o,u)}),s.prototype.toArray=function(o,u){return this.toArrayLike(Array,o,u)};var P=function(o,u){return o.allocUnsafe?o.allocUnsafe(u):new o(u)};s.prototype.toArrayLike=function(o,u,f){this._strip();var g=this.byteLength(),v=f||Math.max(1,g);n(g<=v,"byte array longer than desired length"),n(v>0,"Requested array length <= 0");var R=P(o,v),I=u==="le"?"LE":"BE";return this["_toArrayLike"+I](R,g),R},s.prototype._toArrayLikeLE=function(o,u){for(var f=0,g=0,v=0,R=0;v<this.length;v++){var I=this.words[v]<<R|g;o[f++]=I&255,f<o.length&&(o[f++]=I>>8&255),f<o.length&&(o[f++]=I>>16&255),R===6?(f<o.length&&(o[f++]=I>>24&255),g=0,R=0):(g=I>>>24,R+=2)}if(f<o.length)for(o[f++]=g;f<o.length;)o[f++]=0},s.prototype._toArrayLikeBE=function(o,u){for(var f=o.length-1,g=0,v=0,R=0;v<this.length;v++){var I=this.words[v]<<R|g;o[f--]=I&255,f>=0&&(o[f--]=I>>8&255),f>=0&&(o[f--]=I>>16&255),R===6?(f>=0&&(o[f--]=I>>24&255),g=0,R=0):(g=I>>>24,R+=2)}if(f>=0)for(o[f--]=g;f>=0;)o[f--]=0},Math.clz32?s.prototype._countBits=function(o){return 32-Math.clz32(o)}:s.prototype._countBits=function(o){var u=o,f=0;return u>=4096&&(f+=13,u>>>=13),u>=64&&(f+=7,u>>>=7),u>=8&&(f+=4,u>>>=4),u>=2&&(f+=2,u>>>=2),f+u},s.prototype._zeroBits=function(o){if(o===0)return 26;var u=o,f=0;return u&8191||(f+=13,u>>>=13),u&127||(f+=7,u>>>=7),u&15||(f+=4,u>>>=4),u&3||(f+=2,u>>>=2),u&1||f++,f},s.prototype.bitLength=function(){var o=this.words[this.length-1],u=this._countBits(o);return(this.length-1)*26+u};function L(m){for(var o=new Array(m.bitLength()),u=0;u<o.length;u++){var f=u/26|0,g=u%26;o[u]=m.words[f]>>>g&1}return o}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var o=0,u=0;u<this.length;u++){var f=this._zeroBits(this.words[u]);if(o+=f,f!==26)break}return o},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(o){return this.negative!==0?this.abs().inotn(o).iaddn(1):this.clone()},s.prototype.fromTwos=function(o){return this.testn(o-1)?this.notn(o).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(o){for(;this.length<o.length;)this.words[this.length++]=0;for(var u=0;u<o.length;u++)this.words[u]=this.words[u]|o.words[u];return this._strip()},s.prototype.ior=function(o){return n((this.negative|o.negative)===0),this.iuor(o)},s.prototype.or=function(o){return this.length>o.length?this.clone().ior(o):o.clone().ior(this)},s.prototype.uor=function(o){return this.length>o.length?this.clone().iuor(o):o.clone().iuor(this)},s.prototype.iuand=function(o){var u;this.length>o.length?u=o:u=this;for(var f=0;f<u.length;f++)this.words[f]=this.words[f]&o.words[f];return this.length=u.length,this._strip()},s.prototype.iand=function(o){return n((this.negative|o.negative)===0),this.iuand(o)},s.prototype.and=function(o){return this.length>o.length?this.clone().iand(o):o.clone().iand(this)},s.prototype.uand=function(o){return this.length>o.length?this.clone().iuand(o):o.clone().iuand(this)},s.prototype.iuxor=function(o){var u,f;this.length>o.length?(u=this,f=o):(u=o,f=this);for(var g=0;g<f.length;g++)this.words[g]=u.words[g]^f.words[g];if(this!==u)for(;g<u.length;g++)this.words[g]=u.words[g];return this.length=u.length,this._strip()},s.prototype.ixor=function(o){return n((this.negative|o.negative)===0),this.iuxor(o)},s.prototype.xor=function(o){return this.length>o.length?this.clone().ixor(o):o.clone().ixor(this)},s.prototype.uxor=function(o){return this.length>o.length?this.clone().iuxor(o):o.clone().iuxor(this)},s.prototype.inotn=function(o){n(typeof o=="number"&&o>=0);var u=Math.ceil(o/26)|0,f=o%26;this._expand(u),f>0&&u--;for(var g=0;g<u;g++)this.words[g]=~this.words[g]&67108863;return f>0&&(this.words[g]=~this.words[g]&67108863>>26-f),this._strip()},s.prototype.notn=function(o){return this.clone().inotn(o)},s.prototype.setn=function(o,u){n(typeof o=="number"&&o>=0);var f=o/26|0,g=o%26;return this._expand(f+1),u?this.words[f]=this.words[f]|1<<g:this.words[f]=this.words[f]&~(1<<g),this._strip()},s.prototype.iadd=function(o){var u;if(this.negative!==0&&o.negative===0)return this.negative=0,u=this.isub(o),this.negative^=1,this._normSign();if(this.negative===0&&o.negative!==0)return o.negative=0,u=this.isub(o),o.negative=1,u._normSign();var f,g;this.length>o.length?(f=this,g=o):(f=o,g=this);for(var v=0,R=0;R<g.length;R++)u=(f.words[R]|0)+(g.words[R]|0)+v,this.words[R]=u&67108863,v=u>>>26;for(;v!==0&&R<f.length;R++)u=(f.words[R]|0)+v,this.words[R]=u&67108863,v=u>>>26;if(this.length=f.length,v!==0)this.words[this.length]=v,this.length++;else if(f!==this)for(;R<f.length;R++)this.words[R]=f.words[R];return this},s.prototype.add=function(o){var u;return o.negative!==0&&this.negative===0?(o.negative=0,u=this.sub(o),o.negative^=1,u):o.negative===0&&this.negative!==0?(this.negative=0,u=o.sub(this),this.negative=1,u):this.length>o.length?this.clone().iadd(o):o.clone().iadd(this)},s.prototype.isub=function(o){if(o.negative!==0){o.negative=0;var u=this.iadd(o);return o.negative=1,u._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(o),this.negative=1,this._normSign();var f=this.cmp(o);if(f===0)return this.negative=0,this.length=1,this.words[0]=0,this;var g,v;f>0?(g=this,v=o):(g=o,v=this);for(var R=0,I=0;I<v.length;I++)u=(g.words[I]|0)-(v.words[I]|0)+R,R=u>>26,this.words[I]=u&67108863;for(;R!==0&&I<g.length;I++)u=(g.words[I]|0)+R,R=u>>26,this.words[I]=u&67108863;if(R===0&&I<g.length&&g!==this)for(;I<g.length;I++)this.words[I]=g.words[I];return this.length=Math.max(this.length,I),g!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(o){return this.clone().isub(o)};function M(m,o,u){u.negative=o.negative^m.negative;var f=m.length+o.length|0;u.length=f,f=f-1|0;var g=m.words[0]|0,v=o.words[0]|0,R=g*v,I=R&67108863,b=R/67108864|0;u.words[0]=I;for(var l=1;l<f;l++){for(var S=b>>>26,U=b&67108863,V=Math.min(l,o.length-1),C=Math.max(0,l-m.length+1);C<=V;C++){var A=l-C|0;g=m.words[A]|0,v=o.words[C]|0,R=g*v+U,S+=R/67108864|0,U=R&67108863}u.words[l]=U|0,b=S|0}return b!==0?u.words[l]=b|0:u.length--,u._strip()}var x=function(o,u,f){var g=o.words,v=u.words,R=f.words,I=0,b,l,S,U=g[0]|0,V=U&8191,C=U>>>13,A=g[1]|0,B=A&8191,H=A>>>13,ee=g[2]|0,_=ee&8191,E=ee>>>13,F=g[3]|0,j=F&8191,K=F>>>13,X=g[4]|0,Z=X&8191,le=X>>>13,Et=g[5]|0,pe=Et&8191,ge=Et>>>13,Ft=g[6]|0,de=Ft&8191,fe=Ft>>>13,Tt=g[7]|0,he=Tt&8191,ue=Tt>>>13,st=g[8]|0,me=st&8191,be=st>>>13,Cr=g[9]|0,ve=Cr&8191,we=Cr>>>13,kr=v[0]|0,ye=kr&8191,_e=kr>>>13,Ir=v[1]|0,Ee=Ir&8191,Se=Ir>>>13,xr=v[2]|0,Re=xr&8191,Me=xr>>>13,Ar=v[3]|0,Ce=Ar&8191,ke=Ar>>>13,Nr=v[4]|0,Ie=Nr&8191,xe=Nr>>>13,Tr=v[5]|0,Ae=Tr&8191,Ne=Tr>>>13,Lr=v[6]|0,Te=Lr&8191,Le=Lr>>>13,Or=v[7]|0,Oe=Or&8191,Pe=Or>>>13,Pr=v[8]|0,Be=Pr&8191,$e=Pr>>>13,Br=v[9]|0,De=Br&8191,Fe=Br>>>13;f.negative=o.negative^u.negative,f.length=19,b=Math.imul(V,ye),l=Math.imul(V,_e),l=l+Math.imul(C,ye)|0,S=Math.imul(C,_e);var Gt=(I+b|0)+((l&8191)<<13)|0;I=(S+(l>>>13)|0)+(Gt>>>26)|0,Gt&=67108863,b=Math.imul(B,ye),l=Math.imul(B,_e),l=l+Math.imul(H,ye)|0,S=Math.imul(H,_e),b=b+Math.imul(V,Ee)|0,l=l+Math.imul(V,Se)|0,l=l+Math.imul(C,Ee)|0,S=S+Math.imul(C,Se)|0;var Jt=(I+b|0)+((l&8191)<<13)|0;I=(S+(l>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,b=Math.imul(_,ye),l=Math.imul(_,_e),l=l+Math.imul(E,ye)|0,S=Math.imul(E,_e),b=b+Math.imul(B,Ee)|0,l=l+Math.imul(B,Se)|0,l=l+Math.imul(H,Ee)|0,S=S+Math.imul(H,Se)|0,b=b+Math.imul(V,Re)|0,l=l+Math.imul(V,Me)|0,l=l+Math.imul(C,Re)|0,S=S+Math.imul(C,Me)|0;var Zt=(I+b|0)+((l&8191)<<13)|0;I=(S+(l>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,b=Math.imul(j,ye),l=Math.imul(j,_e),l=l+Math.imul(K,ye)|0,S=Math.imul(K,_e),b=b+Math.imul(_,Ee)|0,l=l+Math.imul(_,Se)|0,l=l+Math.imul(E,Ee)|0,S=S+Math.imul(E,Se)|0,b=b+Math.imul(B,Re)|0,l=l+Math.imul(B,Me)|0,l=l+Math.imul(H,Re)|0,S=S+Math.imul(H,Me)|0,b=b+Math.imul(V,Ce)|0,l=l+Math.imul(V,ke)|0,l=l+Math.imul(C,Ce)|0,S=S+Math.imul(C,ke)|0;var Kt=(I+b|0)+((l&8191)<<13)|0;I=(S+(l>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,b=Math.imul(Z,ye),l=Math.imul(Z,_e),l=l+Math.imul(le,ye)|0,S=Math.imul(le,_e),b=b+Math.imul(j,Ee)|0,l=l+Math.imul(j,Se)|0,l=l+Math.imul(K,Ee)|0,S=S+Math.imul(K,Se)|0,b=b+Math.imul(_,Re)|0,l=l+Math.imul(_,Me)|0,l=l+Math.imul(E,Re)|0,S=S+Math.imul(E,Me)|0,b=b+Math.imul(B,Ce)|0,l=l+Math.imul(B,ke)|0,l=l+Math.imul(H,Ce)|0,S=S+Math.imul(H,ke)|0,b=b+Math.imul(V,Ie)|0,l=l+Math.imul(V,xe)|0,l=l+Math.imul(C,Ie)|0,S=S+Math.imul(C,xe)|0;var Qt=(I+b|0)+((l&8191)<<13)|0;I=(S+(l>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,b=Math.imul(pe,ye),l=Math.imul(pe,_e),l=l+Math.imul(ge,ye)|0,S=Math.imul(ge,_e),b=b+Math.imul(Z,Ee)|0,l=l+Math.imul(Z,Se)|0,l=l+Math.imul(le,Ee)|0,S=S+Math.imul(le,Se)|0,b=b+Math.imul(j,Re)|0,l=l+Math.imul(j,Me)|0,l=l+Math.imul(K,Re)|0,S=S+Math.imul(K,Me)|0,b=b+Math.imul(_,Ce)|0,l=l+Math.imul(_,ke)|0,l=l+Math.imul(E,Ce)|0,S=S+Math.imul(E,ke)|0,b=b+Math.imul(B,Ie)|0,l=l+Math.imul(B,xe)|0,l=l+Math.imul(H,Ie)|0,S=S+Math.imul(H,xe)|0,b=b+Math.imul(V,Ae)|0,l=l+Math.imul(V,Ne)|0,l=l+Math.imul(C,Ae)|0,S=S+Math.imul(C,Ne)|0;var Yt=(I+b|0)+((l&8191)<<13)|0;I=(S+(l>>>13)|0)+(Yt>>>26)|0,Yt&=67108863,b=Math.imul(de,ye),l=Math.imul(de,_e),l=l+Math.imul(fe,ye)|0,S=Math.imul(fe,_e),b=b+Math.imul(pe,Ee)|0,l=l+Math.imul(pe,Se)|0,l=l+Math.imul(ge,Ee)|0,S=S+Math.imul(ge,Se)|0,b=b+Math.imul(Z,Re)|0,l=l+Math.imul(Z,Me)|0,l=l+Math.imul(le,Re)|0,S=S+Math.imul(le,Me)|0,b=b+Math.imul(j,Ce)|0,l=l+Math.imul(j,ke)|0,l=l+Math.imul(K,Ce)|0,S=S+Math.imul(K,ke)|0,b=b+Math.imul(_,Ie)|0,l=l+Math.imul(_,xe)|0,l=l+Math.imul(E,Ie)|0,S=S+Math.imul(E,xe)|0,b=b+Math.imul(B,Ae)|0,l=l+Math.imul(B,Ne)|0,l=l+Math.imul(H,Ae)|0,S=S+Math.imul(H,Ne)|0,b=b+Math.imul(V,Te)|0,l=l+Math.imul(V,Le)|0,l=l+Math.imul(C,Te)|0,S=S+Math.imul(C,Le)|0;var Xt=(I+b|0)+((l&8191)<<13)|0;I=(S+(l>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,b=Math.imul(he,ye),l=Math.imul(he,_e),l=l+Math.imul(ue,ye)|0,S=Math.imul(ue,_e),b=b+Math.imul(de,Ee)|0,l=l+Math.imul(de,Se)|0,l=l+Math.imul(fe,Ee)|0,S=S+Math.imul(fe,Se)|0,b=b+Math.imul(pe,Re)|0,l=l+Math.imul(pe,Me)|0,l=l+Math.imul(ge,Re)|0,S=S+Math.imul(ge,Me)|0,b=b+Math.imul(Z,Ce)|0,l=l+Math.imul(Z,ke)|0,l=l+Math.imul(le,Ce)|0,S=S+Math.imul(le,ke)|0,b=b+Math.imul(j,Ie)|0,l=l+Math.imul(j,xe)|0,l=l+Math.imul(K,Ie)|0,S=S+Math.imul(K,xe)|0,b=b+Math.imul(_,Ae)|0,l=l+Math.imul(_,Ne)|0,l=l+Math.imul(E,Ae)|0,S=S+Math.imul(E,Ne)|0,b=b+Math.imul(B,Te)|0,l=l+Math.imul(B,Le)|0,l=l+Math.imul(H,Te)|0,S=S+Math.imul(H,Le)|0,b=b+Math.imul(V,Oe)|0,l=l+Math.imul(V,Pe)|0,l=l+Math.imul(C,Oe)|0,S=S+Math.imul(C,Pe)|0;var er=(I+b|0)+((l&8191)<<13)|0;I=(S+(l>>>13)|0)+(er>>>26)|0,er&=67108863,b=Math.imul(me,ye),l=Math.imul(me,_e),l=l+Math.imul(be,ye)|0,S=Math.imul(be,_e),b=b+Math.imul(he,Ee)|0,l=l+Math.imul(he,Se)|0,l=l+Math.imul(ue,Ee)|0,S=S+Math.imul(ue,Se)|0,b=b+Math.imul(de,Re)|0,l=l+Math.imul(de,Me)|0,l=l+Math.imul(fe,Re)|0,S=S+Math.imul(fe,Me)|0,b=b+Math.imul(pe,Ce)|0,l=l+Math.imul(pe,ke)|0,l=l+Math.imul(ge,Ce)|0,S=S+Math.imul(ge,ke)|0,b=b+Math.imul(Z,Ie)|0,l=l+Math.imul(Z,xe)|0,l=l+Math.imul(le,Ie)|0,S=S+Math.imul(le,xe)|0,b=b+Math.imul(j,Ae)|0,l=l+Math.imul(j,Ne)|0,l=l+Math.imul(K,Ae)|0,S=S+Math.imul(K,Ne)|0,b=b+Math.imul(_,Te)|0,l=l+Math.imul(_,Le)|0,l=l+Math.imul(E,Te)|0,S=S+Math.imul(E,Le)|0,b=b+Math.imul(B,Oe)|0,l=l+Math.imul(B,Pe)|0,l=l+Math.imul(H,Oe)|0,S=S+Math.imul(H,Pe)|0,b=b+Math.imul(V,Be)|0,l=l+Math.imul(V,$e)|0,l=l+Math.imul(C,Be)|0,S=S+Math.imul(C,$e)|0;var tr=(I+b|0)+((l&8191)<<13)|0;I=(S+(l>>>13)|0)+(tr>>>26)|0,tr&=67108863,b=Math.imul(ve,ye),l=Math.imul(ve,_e),l=l+Math.imul(we,ye)|0,S=Math.imul(we,_e),b=b+Math.imul(me,Ee)|0,l=l+Math.imul(me,Se)|0,l=l+Math.imul(be,Ee)|0,S=S+Math.imul(be,Se)|0,b=b+Math.imul(he,Re)|0,l=l+Math.imul(he,Me)|0,l=l+Math.imul(ue,Re)|0,S=S+Math.imul(ue,Me)|0,b=b+Math.imul(de,Ce)|0,l=l+Math.imul(de,ke)|0,l=l+Math.imul(fe,Ce)|0,S=S+Math.imul(fe,ke)|0,b=b+Math.imul(pe,Ie)|0,l=l+Math.imul(pe,xe)|0,l=l+Math.imul(ge,Ie)|0,S=S+Math.imul(ge,xe)|0,b=b+Math.imul(Z,Ae)|0,l=l+Math.imul(Z,Ne)|0,l=l+Math.imul(le,Ae)|0,S=S+Math.imul(le,Ne)|0,b=b+Math.imul(j,Te)|0,l=l+Math.imul(j,Le)|0,l=l+Math.imul(K,Te)|0,S=S+Math.imul(K,Le)|0,b=b+Math.imul(_,Oe)|0,l=l+Math.imul(_,Pe)|0,l=l+Math.imul(E,Oe)|0,S=S+Math.imul(E,Pe)|0,b=b+Math.imul(B,Be)|0,l=l+Math.imul(B,$e)|0,l=l+Math.imul(H,Be)|0,S=S+Math.imul(H,$e)|0,b=b+Math.imul(V,De)|0,l=l+Math.imul(V,Fe)|0,l=l+Math.imul(C,De)|0,S=S+Math.imul(C,Fe)|0;var rr=(I+b|0)+((l&8191)<<13)|0;I=(S+(l>>>13)|0)+(rr>>>26)|0,rr&=67108863,b=Math.imul(ve,Ee),l=Math.imul(ve,Se),l=l+Math.imul(we,Ee)|0,S=Math.imul(we,Se),b=b+Math.imul(me,Re)|0,l=l+Math.imul(me,Me)|0,l=l+Math.imul(be,Re)|0,S=S+Math.imul(be,Me)|0,b=b+Math.imul(he,Ce)|0,l=l+Math.imul(he,ke)|0,l=l+Math.imul(ue,Ce)|0,S=S+Math.imul(ue,ke)|0,b=b+Math.imul(de,Ie)|0,l=l+Math.imul(de,xe)|0,l=l+Math.imul(fe,Ie)|0,S=S+Math.imul(fe,xe)|0,b=b+Math.imul(pe,Ae)|0,l=l+Math.imul(pe,Ne)|0,l=l+Math.imul(ge,Ae)|0,S=S+Math.imul(ge,Ne)|0,b=b+Math.imul(Z,Te)|0,l=l+Math.imul(Z,Le)|0,l=l+Math.imul(le,Te)|0,S=S+Math.imul(le,Le)|0,b=b+Math.imul(j,Oe)|0,l=l+Math.imul(j,Pe)|0,l=l+Math.imul(K,Oe)|0,S=S+Math.imul(K,Pe)|0,b=b+Math.imul(_,Be)|0,l=l+Math.imul(_,$e)|0,l=l+Math.imul(E,Be)|0,S=S+Math.imul(E,$e)|0,b=b+Math.imul(B,De)|0,l=l+Math.imul(B,Fe)|0,l=l+Math.imul(H,De)|0,S=S+Math.imul(H,Fe)|0;var nr=(I+b|0)+((l&8191)<<13)|0;I=(S+(l>>>13)|0)+(nr>>>26)|0,nr&=67108863,b=Math.imul(ve,Re),l=Math.imul(ve,Me),l=l+Math.imul(we,Re)|0,S=Math.imul(we,Me),b=b+Math.imul(me,Ce)|0,l=l+Math.imul(me,ke)|0,l=l+Math.imul(be,Ce)|0,S=S+Math.imul(be,ke)|0,b=b+Math.imul(he,Ie)|0,l=l+Math.imul(he,xe)|0,l=l+Math.imul(ue,Ie)|0,S=S+Math.imul(ue,xe)|0,b=b+Math.imul(de,Ae)|0,l=l+Math.imul(de,Ne)|0,l=l+Math.imul(fe,Ae)|0,S=S+Math.imul(fe,Ne)|0,b=b+Math.imul(pe,Te)|0,l=l+Math.imul(pe,Le)|0,l=l+Math.imul(ge,Te)|0,S=S+Math.imul(ge,Le)|0,b=b+Math.imul(Z,Oe)|0,l=l+Math.imul(Z,Pe)|0,l=l+Math.imul(le,Oe)|0,S=S+Math.imul(le,Pe)|0,b=b+Math.imul(j,Be)|0,l=l+Math.imul(j,$e)|0,l=l+Math.imul(K,Be)|0,S=S+Math.imul(K,$e)|0,b=b+Math.imul(_,De)|0,l=l+Math.imul(_,Fe)|0,l=l+Math.imul(E,De)|0,S=S+Math.imul(E,Fe)|0;var ir=(I+b|0)+((l&8191)<<13)|0;I=(S+(l>>>13)|0)+(ir>>>26)|0,ir&=67108863,b=Math.imul(ve,Ce),l=Math.imul(ve,ke),l=l+Math.imul(we,Ce)|0,S=Math.imul(we,ke),b=b+Math.imul(me,Ie)|0,l=l+Math.imul(me,xe)|0,l=l+Math.imul(be,Ie)|0,S=S+Math.imul(be,xe)|0,b=b+Math.imul(he,Ae)|0,l=l+Math.imul(he,Ne)|0,l=l+Math.imul(ue,Ae)|0,S=S+Math.imul(ue,Ne)|0,b=b+Math.imul(de,Te)|0,l=l+Math.imul(de,Le)|0,l=l+Math.imul(fe,Te)|0,S=S+Math.imul(fe,Le)|0,b=b+Math.imul(pe,Oe)|0,l=l+Math.imul(pe,Pe)|0,l=l+Math.imul(ge,Oe)|0,S=S+Math.imul(ge,Pe)|0,b=b+Math.imul(Z,Be)|0,l=l+Math.imul(Z,$e)|0,l=l+Math.imul(le,Be)|0,S=S+Math.imul(le,$e)|0,b=b+Math.imul(j,De)|0,l=l+Math.imul(j,Fe)|0,l=l+Math.imul(K,De)|0,S=S+Math.imul(K,Fe)|0;var sr=(I+b|0)+((l&8191)<<13)|0;I=(S+(l>>>13)|0)+(sr>>>26)|0,sr&=67108863,b=Math.imul(ve,Ie),l=Math.imul(ve,xe),l=l+Math.imul(we,Ie)|0,S=Math.imul(we,xe),b=b+Math.imul(me,Ae)|0,l=l+Math.imul(me,Ne)|0,l=l+Math.imul(be,Ae)|0,S=S+Math.imul(be,Ne)|0,b=b+Math.imul(he,Te)|0,l=l+Math.imul(he,Le)|0,l=l+Math.imul(ue,Te)|0,S=S+Math.imul(ue,Le)|0,b=b+Math.imul(de,Oe)|0,l=l+Math.imul(de,Pe)|0,l=l+Math.imul(fe,Oe)|0,S=S+Math.imul(fe,Pe)|0,b=b+Math.imul(pe,Be)|0,l=l+Math.imul(pe,$e)|0,l=l+Math.imul(ge,Be)|0,S=S+Math.imul(ge,$e)|0,b=b+Math.imul(Z,De)|0,l=l+Math.imul(Z,Fe)|0,l=l+Math.imul(le,De)|0,S=S+Math.imul(le,Fe)|0;var or=(I+b|0)+((l&8191)<<13)|0;I=(S+(l>>>13)|0)+(or>>>26)|0,or&=67108863,b=Math.imul(ve,Ae),l=Math.imul(ve,Ne),l=l+Math.imul(we,Ae)|0,S=Math.imul(we,Ne),b=b+Math.imul(me,Te)|0,l=l+Math.imul(me,Le)|0,l=l+Math.imul(be,Te)|0,S=S+Math.imul(be,Le)|0,b=b+Math.imul(he,Oe)|0,l=l+Math.imul(he,Pe)|0,l=l+Math.imul(ue,Oe)|0,S=S+Math.imul(ue,Pe)|0,b=b+Math.imul(de,Be)|0,l=l+Math.imul(de,$e)|0,l=l+Math.imul(fe,Be)|0,S=S+Math.imul(fe,$e)|0,b=b+Math.imul(pe,De)|0,l=l+Math.imul(pe,Fe)|0,l=l+Math.imul(ge,De)|0,S=S+Math.imul(ge,Fe)|0;var fs=(I+b|0)+((l&8191)<<13)|0;I=(S+(l>>>13)|0)+(fs>>>26)|0,fs&=67108863,b=Math.imul(ve,Te),l=Math.imul(ve,Le),l=l+Math.imul(we,Te)|0,S=Math.imul(we,Le),b=b+Math.imul(me,Oe)|0,l=l+Math.imul(me,Pe)|0,l=l+Math.imul(be,Oe)|0,S=S+Math.imul(be,Pe)|0,b=b+Math.imul(he,Be)|0,l=l+Math.imul(he,$e)|0,l=l+Math.imul(ue,Be)|0,S=S+Math.imul(ue,$e)|0,b=b+Math.imul(de,De)|0,l=l+Math.imul(de,Fe)|0,l=l+Math.imul(fe,De)|0,S=S+Math.imul(fe,Fe)|0;var ps=(I+b|0)+((l&8191)<<13)|0;I=(S+(l>>>13)|0)+(ps>>>26)|0,ps&=67108863,b=Math.imul(ve,Oe),l=Math.imul(ve,Pe),l=l+Math.imul(we,Oe)|0,S=Math.imul(we,Pe),b=b+Math.imul(me,Be)|0,l=l+Math.imul(me,$e)|0,l=l+Math.imul(be,Be)|0,S=S+Math.imul(be,$e)|0,b=b+Math.imul(he,De)|0,l=l+Math.imul(he,Fe)|0,l=l+Math.imul(ue,De)|0,S=S+Math.imul(ue,Fe)|0;var gs=(I+b|0)+((l&8191)<<13)|0;I=(S+(l>>>13)|0)+(gs>>>26)|0,gs&=67108863,b=Math.imul(ve,Be),l=Math.imul(ve,$e),l=l+Math.imul(we,Be)|0,S=Math.imul(we,$e),b=b+Math.imul(me,De)|0,l=l+Math.imul(me,Fe)|0,l=l+Math.imul(be,De)|0,S=S+Math.imul(be,Fe)|0;var ms=(I+b|0)+((l&8191)<<13)|0;I=(S+(l>>>13)|0)+(ms>>>26)|0,ms&=67108863,b=Math.imul(ve,De),l=Math.imul(ve,Fe),l=l+Math.imul(we,De)|0,S=Math.imul(we,Fe);var bs=(I+b|0)+((l&8191)<<13)|0;return I=(S+(l>>>13)|0)+(bs>>>26)|0,bs&=67108863,R[0]=Gt,R[1]=Jt,R[2]=Zt,R[3]=Kt,R[4]=Qt,R[5]=Yt,R[6]=Xt,R[7]=er,R[8]=tr,R[9]=rr,R[10]=nr,R[11]=ir,R[12]=sr,R[13]=or,R[14]=fs,R[15]=ps,R[16]=gs,R[17]=ms,R[18]=bs,I!==0&&(R[19]=I,f.length++),f};Math.imul||(x=M);function T(m,o,u){u.negative=o.negative^m.negative,u.length=m.length+o.length;for(var f=0,g=0,v=0;v<u.length-1;v++){var R=g;g=0;for(var I=f&67108863,b=Math.min(v,o.length-1),l=Math.max(0,v-m.length+1);l<=b;l++){var S=v-l,U=m.words[S]|0,V=o.words[l]|0,C=U*V,A=C&67108863;R=R+(C/67108864|0)|0,A=A+I|0,I=A&67108863,R=R+(A>>>26)|0,g+=R>>>26,R&=67108863}u.words[v]=I,f=R,R=g}return f!==0?u.words[v]=f:u.length--,u._strip()}function $(m,o,u){return T(m,o,u)}s.prototype.mulTo=function(o,u){var f,g=this.length+o.length;return this.length===10&&o.length===10?f=x(this,o,u):g<63?f=M(this,o,u):g<1024?f=T(this,o,u):f=$(this,o,u),f},s.prototype.mul=function(o){var u=new s(null);return u.words=new Array(this.length+o.length),this.mulTo(o,u)},s.prototype.mulf=function(o){var u=new s(null);return u.words=new Array(this.length+o.length),$(this,o,u)},s.prototype.imul=function(o){return this.clone().mulTo(o,this)},s.prototype.imuln=function(o){var u=o<0;u&&(o=-o),n(typeof o=="number"),n(o<67108864);for(var f=0,g=0;g<this.length;g++){var v=(this.words[g]|0)*o,R=(v&67108863)+(f&67108863);f>>=26,f+=v/67108864|0,f+=R>>>26,this.words[g]=R&67108863}return f!==0&&(this.words[g]=f,this.length++),u?this.ineg():this},s.prototype.muln=function(o){return this.clone().imuln(o)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(o){var u=L(o);if(u.length===0)return new s(1);for(var f=this,g=0;g<u.length&&u[g]===0;g++,f=f.sqr());if(++g<u.length)for(var v=f.sqr();g<u.length;g++,v=v.sqr())u[g]!==0&&(f=f.mul(v));return f},s.prototype.iushln=function(o){n(typeof o=="number"&&o>=0);var u=o%26,f=(o-u)/26,g=67108863>>>26-u<<26-u,v;if(u!==0){var R=0;for(v=0;v<this.length;v++){var I=this.words[v]&g,b=(this.words[v]|0)-I<<u;this.words[v]=b|R,R=I>>>26-u}R&&(this.words[v]=R,this.length++)}if(f!==0){for(v=this.length-1;v>=0;v--)this.words[v+f]=this.words[v];for(v=0;v<f;v++)this.words[v]=0;this.length+=f}return this._strip()},s.prototype.ishln=function(o){return n(this.negative===0),this.iushln(o)},s.prototype.iushrn=function(o,u,f){n(typeof o=="number"&&o>=0);var g;u?g=(u-u%26)/26:g=0;var v=o%26,R=Math.min((o-v)/26,this.length),I=67108863^67108863>>>v<<v,b=f;if(g-=R,g=Math.max(0,g),b){for(var l=0;l<R;l++)b.words[l]=this.words[l];b.length=R}if(R!==0)if(this.length>R)for(this.length-=R,l=0;l<this.length;l++)this.words[l]=this.words[l+R];else this.words[0]=0,this.length=1;var S=0;for(l=this.length-1;l>=0&&(S!==0||l>=g);l--){var U=this.words[l]|0;this.words[l]=S<<26-v|U>>>v,S=U&I}return b&&S!==0&&(b.words[b.length++]=S),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(o,u,f){return n(this.negative===0),this.iushrn(o,u,f)},s.prototype.shln=function(o){return this.clone().ishln(o)},s.prototype.ushln=function(o){return this.clone().iushln(o)},s.prototype.shrn=function(o){return this.clone().ishrn(o)},s.prototype.ushrn=function(o){return this.clone().iushrn(o)},s.prototype.testn=function(o){n(typeof o=="number"&&o>=0);var u=o%26,f=(o-u)/26,g=1<<u;if(this.length<=f)return!1;var v=this.words[f];return!!(v&g)},s.prototype.imaskn=function(o){n(typeof o=="number"&&o>=0);var u=o%26,f=(o-u)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=f)return this;if(u!==0&&f++,this.length=Math.min(f,this.length),u!==0){var g=67108863^67108863>>>u<<u;this.words[this.length-1]&=g}return this._strip()},s.prototype.maskn=function(o){return this.clone().imaskn(o)},s.prototype.iaddn=function(o){return n(typeof o=="number"),n(o<67108864),o<0?this.isubn(-o):this.negative!==0?this.length===1&&(this.words[0]|0)<=o?(this.words[0]=o-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(o),this.negative=1,this):this._iaddn(o)},s.prototype._iaddn=function(o){this.words[0]+=o;for(var u=0;u<this.length&&this.words[u]>=67108864;u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;return this.length=Math.max(this.length,u+1),this},s.prototype.isubn=function(o){if(n(typeof o=="number"),n(o<67108864),o<0)return this.iaddn(-o);if(this.negative!==0)return this.negative=0,this.iaddn(o),this.negative=1,this;if(this.words[0]-=o,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var u=0;u<this.length&&this.words[u]<0;u++)this.words[u]+=67108864,this.words[u+1]-=1;return this._strip()},s.prototype.addn=function(o){return this.clone().iaddn(o)},s.prototype.subn=function(o){return this.clone().isubn(o)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(o,u,f){var g=o.length+f,v;this._expand(g);var R,I=0;for(v=0;v<o.length;v++){R=(this.words[v+f]|0)+I;var b=(o.words[v]|0)*u;R-=b&67108863,I=(R>>26)-(b/67108864|0),this.words[v+f]=R&67108863}for(;v<this.length-f;v++)R=(this.words[v+f]|0)+I,I=R>>26,this.words[v+f]=R&67108863;if(I===0)return this._strip();for(n(I===-1),I=0,v=0;v<this.length;v++)R=-(this.words[v]|0)+I,I=R>>26,this.words[v]=R&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(o,u){var f=this.length-o.length,g=this.clone(),v=o,R=v.words[v.length-1]|0,I=this._countBits(R);f=26-I,f!==0&&(v=v.ushln(f),g.iushln(f),R=v.words[v.length-1]|0);var b=g.length-v.length,l;if(u!=="mod"){l=new s(null),l.length=b+1,l.words=new Array(l.length);for(var S=0;S<l.length;S++)l.words[S]=0}var U=g.clone()._ishlnsubmul(v,1,b);U.negative===0&&(g=U,l&&(l.words[b]=1));for(var V=b-1;V>=0;V--){var C=(g.words[v.length+V]|0)*67108864+(g.words[v.length+V-1]|0);for(C=Math.min(C/R|0,67108863),g._ishlnsubmul(v,C,V);g.negative!==0;)C--,g.negative=0,g._ishlnsubmul(v,1,V),g.isZero()||(g.negative^=1);l&&(l.words[V]=C)}return l&&l._strip(),g._strip(),u!=="div"&&f!==0&&g.iushrn(f),{div:l||null,mod:g}},s.prototype.divmod=function(o,u,f){if(n(!o.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var g,v,R;return this.negative!==0&&o.negative===0?(R=this.neg().divmod(o,u),u!=="mod"&&(g=R.div.neg()),u!=="div"&&(v=R.mod.neg(),f&&v.negative!==0&&v.iadd(o)),{div:g,mod:v}):this.negative===0&&o.negative!==0?(R=this.divmod(o.neg(),u),u!=="mod"&&(g=R.div.neg()),{div:g,mod:R.mod}):this.negative&o.negative?(R=this.neg().divmod(o.neg(),u),u!=="div"&&(v=R.mod.neg(),f&&v.negative!==0&&v.isub(o)),{div:R.div,mod:v}):o.length>this.length||this.cmp(o)<0?{div:new s(0),mod:this}:o.length===1?u==="div"?{div:this.divn(o.words[0]),mod:null}:u==="mod"?{div:null,mod:new s(this.modrn(o.words[0]))}:{div:this.divn(o.words[0]),mod:new s(this.modrn(o.words[0]))}:this._wordDiv(o,u)},s.prototype.div=function(o){return this.divmod(o,"div",!1).div},s.prototype.mod=function(o){return this.divmod(o,"mod",!1).mod},s.prototype.umod=function(o){return this.divmod(o,"mod",!0).mod},s.prototype.divRound=function(o){var u=this.divmod(o);if(u.mod.isZero())return u.div;var f=u.div.negative!==0?u.mod.isub(o):u.mod,g=o.ushrn(1),v=o.andln(1),R=f.cmp(g);return R<0||v===1&&R===0?u.div:u.div.negative!==0?u.div.isubn(1):u.div.iaddn(1)},s.prototype.modrn=function(o){var u=o<0;u&&(o=-o),n(o<=67108863);for(var f=(1<<26)%o,g=0,v=this.length-1;v>=0;v--)g=(f*g+(this.words[v]|0))%o;return u?-g:g},s.prototype.modn=function(o){return this.modrn(o)},s.prototype.idivn=function(o){var u=o<0;u&&(o=-o),n(o<=67108863);for(var f=0,g=this.length-1;g>=0;g--){var v=(this.words[g]|0)+f*67108864;this.words[g]=v/o|0,f=v%o}return this._strip(),u?this.ineg():this},s.prototype.divn=function(o){return this.clone().idivn(o)},s.prototype.egcd=function(o){n(o.negative===0),n(!o.isZero());var u=this,f=o.clone();u.negative!==0?u=u.umod(o):u=u.clone();for(var g=new s(1),v=new s(0),R=new s(0),I=new s(1),b=0;u.isEven()&&f.isEven();)u.iushrn(1),f.iushrn(1),++b;for(var l=f.clone(),S=u.clone();!u.isZero();){for(var U=0,V=1;!(u.words[0]&V)&&U<26;++U,V<<=1);if(U>0)for(u.iushrn(U);U-- >0;)(g.isOdd()||v.isOdd())&&(g.iadd(l),v.isub(S)),g.iushrn(1),v.iushrn(1);for(var C=0,A=1;!(f.words[0]&A)&&C<26;++C,A<<=1);if(C>0)for(f.iushrn(C);C-- >0;)(R.isOdd()||I.isOdd())&&(R.iadd(l),I.isub(S)),R.iushrn(1),I.iushrn(1);u.cmp(f)>=0?(u.isub(f),g.isub(R),v.isub(I)):(f.isub(u),R.isub(g),I.isub(v))}return{a:R,b:I,gcd:f.iushln(b)}},s.prototype._invmp=function(o){n(o.negative===0),n(!o.isZero());var u=this,f=o.clone();u.negative!==0?u=u.umod(o):u=u.clone();for(var g=new s(1),v=new s(0),R=f.clone();u.cmpn(1)>0&&f.cmpn(1)>0;){for(var I=0,b=1;!(u.words[0]&b)&&I<26;++I,b<<=1);if(I>0)for(u.iushrn(I);I-- >0;)g.isOdd()&&g.iadd(R),g.iushrn(1);for(var l=0,S=1;!(f.words[0]&S)&&l<26;++l,S<<=1);if(l>0)for(f.iushrn(l);l-- >0;)v.isOdd()&&v.iadd(R),v.iushrn(1);u.cmp(f)>=0?(u.isub(f),g.isub(v)):(f.isub(u),v.isub(g))}var U;return u.cmpn(1)===0?U=g:U=v,U.cmpn(0)<0&&U.iadd(o),U},s.prototype.gcd=function(o){if(this.isZero())return o.abs();if(o.isZero())return this.abs();var u=this.clone(),f=o.clone();u.negative=0,f.negative=0;for(var g=0;u.isEven()&&f.isEven();g++)u.iushrn(1),f.iushrn(1);do{for(;u.isEven();)u.iushrn(1);for(;f.isEven();)f.iushrn(1);var v=u.cmp(f);if(v<0){var R=u;u=f,f=R}else if(v===0||f.cmpn(1)===0)break;u.isub(f)}while(!0);return f.iushln(g)},s.prototype.invm=function(o){return this.egcd(o).a.umod(o)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(o){return this.words[0]&o},s.prototype.bincn=function(o){n(typeof o=="number");var u=o%26,f=(o-u)/26,g=1<<u;if(this.length<=f)return this._expand(f+1),this.words[f]|=g,this;for(var v=g,R=f;v!==0&&R<this.length;R++){var I=this.words[R]|0;I+=v,v=I>>>26,I&=67108863,this.words[R]=I}return v!==0&&(this.words[R]=v,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(o){var u=o<0;if(this.negative!==0&&!u)return-1;if(this.negative===0&&u)return 1;this._strip();var f;if(this.length>1)f=1;else{u&&(o=-o),n(o<=67108863,"Number is too big");var g=this.words[0]|0;f=g===o?0:g<o?-1:1}return this.negative!==0?-f|0:f},s.prototype.cmp=function(o){if(this.negative!==0&&o.negative===0)return-1;if(this.negative===0&&o.negative!==0)return 1;var u=this.ucmp(o);return this.negative!==0?-u|0:u},s.prototype.ucmp=function(o){if(this.length>o.length)return 1;if(this.length<o.length)return-1;for(var u=0,f=this.length-1;f>=0;f--){var g=this.words[f]|0,v=o.words[f]|0;if(g!==v){g<v?u=-1:g>v&&(u=1);break}}return u},s.prototype.gtn=function(o){return this.cmpn(o)===1},s.prototype.gt=function(o){return this.cmp(o)===1},s.prototype.gten=function(o){return this.cmpn(o)>=0},s.prototype.gte=function(o){return this.cmp(o)>=0},s.prototype.ltn=function(o){return this.cmpn(o)===-1},s.prototype.lt=function(o){return this.cmp(o)===-1},s.prototype.lten=function(o){return this.cmpn(o)<=0},s.prototype.lte=function(o){return this.cmp(o)<=0},s.prototype.eqn=function(o){return this.cmpn(o)===0},s.prototype.eq=function(o){return this.cmp(o)===0},s.red=function(o){return new Q(o)},s.prototype.toRed=function(o){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),o.convertTo(this)._forceRed(o)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(o){return this.red=o,this},s.prototype.forceRed=function(o){return n(!this.red,"Already a number in reduction context"),this._forceRed(o)},s.prototype.redAdd=function(o){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,o)},s.prototype.redIAdd=function(o){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,o)},s.prototype.redSub=function(o){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,o)},s.prototype.redISub=function(o){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,o)},s.prototype.redShl=function(o){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,o)},s.prototype.redMul=function(o){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.mul(this,o)},s.prototype.redIMul=function(o){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.imul(this,o)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(o){return n(this.red&&!o.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,o)};var O={k256:null,p224:null,p192:null,p25519:null};function D(m,o){this.name=m,this.p=new s(o,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}D.prototype._tmp=function(){var o=new s(null);return o.words=new Array(Math.ceil(this.n/13)),o},D.prototype.ireduce=function(o){var u=o,f;do this.split(u,this.tmp),u=this.imulK(u),u=u.iadd(this.tmp),f=u.bitLength();while(f>this.n);var g=f<this.n?-1:u.ucmp(this.p);return g===0?(u.words[0]=0,u.length=1):g>0?u.isub(this.p):u.strip!==void 0?u.strip():u._strip(),u},D.prototype.split=function(o,u){o.iushrn(this.n,0,u)},D.prototype.imulK=function(o){return o.imul(this.k)};function J(){D.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(J,D),J.prototype.split=function(o,u){for(var f=4194303,g=Math.min(o.length,9),v=0;v<g;v++)u.words[v]=o.words[v];if(u.length=g,o.length<=9){o.words[0]=0,o.length=1;return}var R=o.words[9];for(u.words[u.length++]=R&f,v=10;v<o.length;v++){var I=o.words[v]|0;o.words[v-10]=(I&f)<<4|R>>>22,R=I}R>>>=22,o.words[v-10]=R,R===0&&o.length>10?o.length-=10:o.length-=9},J.prototype.imulK=function(o){o.words[o.length]=0,o.words[o.length+1]=0,o.length+=2;for(var u=0,f=0;f<o.length;f++){var g=o.words[f]|0;u+=g*977,o.words[f]=u&67108863,u=g*64+(u/67108864|0)}return o.words[o.length-1]===0&&(o.length--,o.words[o.length-1]===0&&o.length--),o};function z(){D.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(z,D);function W(){D.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(W,D);function ne(){D.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(ne,D),ne.prototype.imulK=function(o){for(var u=0,f=0;f<o.length;f++){var g=(o.words[f]|0)*19+u,v=g&67108863;g>>>=26,o.words[f]=v,u=g}return u!==0&&(o.words[o.length++]=u),o},s._prime=function(o){if(O[o])return O[o];var u;if(o==="k256")u=new J;else if(o==="p224")u=new z;else if(o==="p192")u=new W;else if(o==="p25519")u=new ne;else throw new Error("Unknown prime "+o);return O[o]=u,u};function Q(m){if(typeof m=="string"){var o=s._prime(m);this.m=o.p,this.prime=o}else n(m.gtn(1),"modulus must be greater than 1"),this.m=m,this.prime=null}Q.prototype._verify1=function(o){n(o.negative===0,"red works only with positives"),n(o.red,"red works only with red numbers")},Q.prototype._verify2=function(o,u){n((o.negative|u.negative)===0,"red works only with positives"),n(o.red&&o.red===u.red,"red works only with red numbers")},Q.prototype.imod=function(o){return this.prime?this.prime.ireduce(o)._forceRed(this):(p(o,o.umod(this.m)._forceRed(this)),o)},Q.prototype.neg=function(o){return o.isZero()?o.clone():this.m.sub(o)._forceRed(this)},Q.prototype.add=function(o,u){this._verify2(o,u);var f=o.add(u);return f.cmp(this.m)>=0&&f.isub(this.m),f._forceRed(this)},Q.prototype.iadd=function(o,u){this._verify2(o,u);var f=o.iadd(u);return f.cmp(this.m)>=0&&f.isub(this.m),f},Q.prototype.sub=function(o,u){this._verify2(o,u);var f=o.sub(u);return f.cmpn(0)<0&&f.iadd(this.m),f._forceRed(this)},Q.prototype.isub=function(o,u){this._verify2(o,u);var f=o.isub(u);return f.cmpn(0)<0&&f.iadd(this.m),f},Q.prototype.shl=function(o,u){return this._verify1(o),this.imod(o.ushln(u))},Q.prototype.imul=function(o,u){return this._verify2(o,u),this.imod(o.imul(u))},Q.prototype.mul=function(o,u){return this._verify2(o,u),this.imod(o.mul(u))},Q.prototype.isqr=function(o){return this.imul(o,o.clone())},Q.prototype.sqr=function(o){return this.mul(o,o)},Q.prototype.sqrt=function(o){if(o.isZero())return o.clone();var u=this.m.andln(3);if(n(u%2===1),u===3){var f=this.m.add(new s(1)).iushrn(2);return this.pow(o,f)}for(var g=this.m.subn(1),v=0;!g.isZero()&&g.andln(1)===0;)v++,g.iushrn(1);n(!g.isZero());var R=new s(1).toRed(this),I=R.redNeg(),b=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new s(2*l*l).toRed(this);this.pow(l,b).cmp(I)!==0;)l.redIAdd(I);for(var S=this.pow(l,g),U=this.pow(o,g.addn(1).iushrn(1)),V=this.pow(o,g),C=v;V.cmp(R)!==0;){for(var A=V,B=0;A.cmp(R)!==0;B++)A=A.redSqr();n(B<C);var H=this.pow(S,new s(1).iushln(C-B-1));U=U.redMul(H),S=H.redSqr(),V=V.redMul(S),C=B}return U},Q.prototype.invm=function(o){var u=o._invmp(this.m);return u.negative!==0?(u.negative=0,this.imod(u).redNeg()):this.imod(u)},Q.prototype.pow=function(o,u){if(u.isZero())return new s(1).toRed(this);if(u.cmpn(1)===0)return o.clone();var f=4,g=new Array(1<<f);g[0]=new s(1).toRed(this),g[1]=o;for(var v=2;v<g.length;v++)g[v]=this.mul(g[v-1],o);var R=g[0],I=0,b=0,l=u.bitLength()%26;for(l===0&&(l=26),v=u.length-1;v>=0;v--){for(var S=u.words[v],U=l-1;U>=0;U--){var V=S>>U&1;if(R!==g[0]&&(R=this.sqr(R)),V===0&&I===0){b=0;continue}I<<=1,I|=V,b++,!(b!==f&&(v!==0||U!==0))&&(R=this.mul(R,g[I]),b=0,I=0)}l=26}return R},Q.prototype.convertTo=function(o){var u=o.umod(this.m);return u===o?u.clone():u},Q.prototype.convertFrom=function(o){var u=o.clone();return u.red=null,u},s.mont=function(o){return new ie(o)};function ie(m){Q.call(this,m),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(ie,Q),ie.prototype.convertTo=function(o){return this.imod(o.ushln(this.shift))},ie.prototype.convertFrom=function(o){var u=this.imod(o.mul(this.rinv));return u.red=null,u},ie.prototype.imul=function(o,u){if(o.isZero()||u.isZero())return o.words[0]=0,o.length=1,o;var f=o.imul(u),g=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=f.isub(g).iushrn(this.shift),R=v;return v.cmp(this.m)>=0?R=v.isub(this.m):v.cmpn(0)<0&&(R=v.iadd(this.m)),R._forceRed(this)},ie.prototype.mul=function(o,u){if(o.isZero()||u.isZero())return new s(0)._forceRed(this);var f=o.mul(u),g=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=f.isub(g).iushrn(this.shift),R=v;return v.cmp(this.m)>=0?R=v.isub(this.m):v.cmpn(0)<0&&(R=v.iadd(this.m)),R._forceRed(this)},ie.prototype.invm=function(o){var u=this.imod(o._invmp(this.m).mul(this.r2));return u._forceRed(this)}})(e,G)})(oo);var wi=oo.exports,Cn={},$t={};Object.defineProperty($t,"__esModule",{value:!0});$t.errorValues=$t.standardErrorCodes=void 0;$t.standardErrorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901,unsupportedChain:4902}};$t.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."},4902:{standard:"EIP-3085",message:"Unrecognized chain ID."}};var yi={},_i={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.serialize=e.getErrorCode=e.isValidCode=e.getMessageFromCode=e.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const t=$t,r="Unspecified error message.";e.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function n(y,k=r){if(y&&Number.isInteger(y)){const N=y.toString();if(p(t.errorValues,N))return t.errorValues[N].message;if(h(y))return e.JSON_RPC_SERVER_ERROR_MESSAGE}return k}e.getMessageFromCode=n;function i(y){if(!Number.isInteger(y))return!1;const k=y.toString();return!!(t.errorValues[k]||h(y))}e.isValidCode=i;function s(y){var k;if(typeof y=="number")return y;if(a(y))return(k=y.code)!==null&&k!==void 0?k:y.errorCode}e.getErrorCode=s;function a(y){return typeof y=="object"&&y!==null&&(typeof y.code=="number"||typeof y.errorCode=="number")}function c(y,{shouldIncludeStack:k=!1}={}){const N={};if(y&&typeof y=="object"&&!Array.isArray(y)&&p(y,"code")&&i(y.code)){const P=y;N.code=P.code,P.message&&typeof P.message=="string"?(N.message=P.message,p(P,"data")&&(N.data=P.data)):(N.message=n(N.code),N.data={originalError:d(y)})}else N.code=t.standardErrorCodes.rpc.internal,N.message=w(y,"message")?y.message:r,N.data={originalError:d(y)};return k&&(N.stack=w(y,"stack")?y.stack:void 0),N}e.serialize=c;function h(y){return y>=-32099&&y<=-32e3}function d(y){return y&&typeof y=="object"&&!Array.isArray(y)?Object.assign({},y):y}function p(y,k){return Object.prototype.hasOwnProperty.call(y,k)}function w(y,k){return typeof y=="object"&&y!==null&&k in y&&typeof y[k]=="string"}})(_i);Object.defineProperty(yi,"__esModule",{value:!0});yi.standardErrors=void 0;const Ke=$t,kc=_i;yi.standardErrors={rpc:{parse:e=>lt(Ke.standardErrorCodes.rpc.parse,e),invalidRequest:e=>lt(Ke.standardErrorCodes.rpc.invalidRequest,e),invalidParams:e=>lt(Ke.standardErrorCodes.rpc.invalidParams,e),methodNotFound:e=>lt(Ke.standardErrorCodes.rpc.methodNotFound,e),internal:e=>lt(Ke.standardErrorCodes.rpc.internal,e),server:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return lt(t,e)},invalidInput:e=>lt(Ke.standardErrorCodes.rpc.invalidInput,e),resourceNotFound:e=>lt(Ke.standardErrorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>lt(Ke.standardErrorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>lt(Ke.standardErrorCodes.rpc.transactionRejected,e),methodNotSupported:e=>lt(Ke.standardErrorCodes.rpc.methodNotSupported,e),limitExceeded:e=>lt(Ke.standardErrorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>$r(Ke.standardErrorCodes.provider.userRejectedRequest,e),unauthorized:e=>$r(Ke.standardErrorCodes.provider.unauthorized,e),unsupportedMethod:e=>$r(Ke.standardErrorCodes.provider.unsupportedMethod,e),disconnected:e=>$r(Ke.standardErrorCodes.provider.disconnected,e),chainDisconnected:e=>$r(Ke.standardErrorCodes.provider.chainDisconnected,e),unsupportedChain:e=>$r(Ke.standardErrorCodes.provider.unsupportedChain,e),custom:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:t,message:r,data:n}=e;if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string');return new Ac(t,r,n)}}};function lt(e,t){const[r,n]=Ic(t);return new xc(e,r||(0,kc.getMessageFromCode)(e),n)}function $r(e,t){const[r,n]=Ic(t);return new Ac(e,r||(0,kc.getMessageFromCode)(e),n)}function Ic(e){if(e){if(typeof e=="string")return[e];if(typeof e=="object"&&!Array.isArray(e)){const{message:t,data:r}=e;if(t&&typeof t!="string")throw new Error("Must specify string message.");return[t||void 0,r]}}return[]}let xc=class extends Error{constructor(t,r,n){if(!Number.isInteger(t))throw new Error('"code" must be an integer.');if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string.');super(r),this.code=t,n!==void 0&&(this.data=n)}},Ac=class extends xc{constructor(t,r,n){if(!Nu(t))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(t,r,n)}};function Nu(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}var Ei={},sn={};Object.defineProperty(sn,"__esModule",{value:!0});sn.isErrorResponse=void 0;function Tu(e){return e.errorMessage!==void 0}sn.isErrorResponse=Tu;var on={};Object.defineProperty(on,"__esModule",{value:!0});on.LIB_VERSION=void 0;on.LIB_VERSION="3.9.3";Object.defineProperty(Ei,"__esModule",{value:!0});Ei.serializeError=void 0;const Lu=sn,Ou=on,Pu=$t,Bu=_i;function $u(e,t){const r=(0,Bu.serialize)(Du(e),{shouldIncludeStack:!0}),n=new URL("https://docs.cloud.coinbase.com/wallet-sdk/docs/errors");n.searchParams.set("version",Ou.LIB_VERSION),n.searchParams.set("code",r.code.toString());const i=Fu(r.data,t);return i&&n.searchParams.set("method",i),n.searchParams.set("message",r.message),Object.assign(Object.assign({},r),{docUrl:n.href})}Ei.serializeError=$u;function Du(e){return typeof e=="string"?{message:e,code:Pu.standardErrorCodes.rpc.internal}:(0,Lu.isErrorResponse)(e)?Object.assign(Object.assign({},e),{message:e.errorMessage,code:e.errorCode,data:{method:e.method}}):e}function Fu(e,t){const r=e==null?void 0:e.method;if(r)return r;if(t!==void 0){if(typeof t=="string")return t;if(Array.isArray(t)){if(t.length>0)return t[0].method}else return t.method}}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.standardErrors=e.standardErrorCodes=e.serializeError=e.getMessageFromCode=e.getErrorCode=void 0;const t=$t;Object.defineProperty(e,"standardErrorCodes",{enumerable:!0,get:function(){return t.standardErrorCodes}});const r=yi;Object.defineProperty(e,"standardErrors",{enumerable:!0,get:function(){return r.standardErrors}});const n=Ei;Object.defineProperty(e,"serializeError",{enumerable:!0,get:function(){return n.serializeError}});const i=_i;Object.defineProperty(e,"getErrorCode",{enumerable:!0,get:function(){return i.getErrorCode}}),Object.defineProperty(e,"getMessageFromCode",{enumerable:!0,get:function(){return i.getMessageFromCode}})})(Cn);var qe={};Object.defineProperty(qe,"__esModule",{value:!0});qe.ProviderType=qe.RegExpString=qe.IntNumber=qe.BigIntString=qe.AddressString=qe.HexString=qe.OpaqueType=void 0;function kn(){return e=>e}qe.OpaqueType=kn;qe.HexString=kn();qe.AddressString=kn();qe.BigIntString=kn();function ju(e){return Math.floor(e)}qe.IntNumber=ju;qe.RegExpString=kn();var zo;(function(e){e.CoinbaseWallet="CoinbaseWallet",e.MetaMask="MetaMask",e.Unselected=""})(zo||(qe.ProviderType=zo={}));var Hu=G&&G.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(q,"__esModule",{value:!0});q.isMobileWeb=q.getLocation=q.isInIFrame=q.createQrUrl=q.getFavicon=q.range=q.isBigNumber=q.ensureParsedJSONObject=q.ensureBN=q.ensureRegExpString=q.ensureIntNumber=q.ensureBuffer=q.ensureAddressString=q.ensureEvenLengthHexString=q.ensureHexString=q.isHexString=q.prepend0x=q.strip0x=q.has0xPrefix=q.hexStringFromIntNumber=q.intNumberFromHexString=q.bigIntStringFromBN=q.hexStringFromBuffer=q.hexStringToUint8Array=q.uint8ArrayToHex=q.randomBytesHex=void 0;const Ut=Hu(wi),_r=Cn,ft=qe,Nc=/^[0-9]*$/,Tc=/^[a-f0-9]*$/;function Uu(e){return Lc(crypto.getRandomValues(new Uint8Array(e)))}q.randomBytesHex=Uu;function Lc(e){return[...e].map(t=>t.toString(16).padStart(2,"0")).join("")}q.uint8ArrayToHex=Lc;function Wu(e){return new Uint8Array(e.match(/.{1,2}/g).map(t=>parseInt(t,16)))}q.hexStringToUint8Array=Wu;function Vu(e,t=!1){const r=e.toString("hex");return(0,ft.HexString)(t?`0x${r}`:r)}q.hexStringFromBuffer=Vu;function qu(e){return(0,ft.BigIntString)(e.toString(10))}q.bigIntStringFromBN=qu;function zu(e){return(0,ft.IntNumber)(new Ut.default(xn(e,!1),16).toNumber())}q.intNumberFromHexString=zu;function Gu(e){return(0,ft.HexString)(`0x${new Ut.default(e).toString(16)}`)}q.hexStringFromIntNumber=Gu;function ao(e){return e.startsWith("0x")||e.startsWith("0X")}q.has0xPrefix=ao;function Si(e){return ao(e)?e.slice(2):e}q.strip0x=Si;function Oc(e){return ao(e)?`0x${e.slice(2)}`:`0x${e}`}q.prepend0x=Oc;function In(e){if(typeof e!="string")return!1;const t=Si(e).toLowerCase();return Tc.test(t)}q.isHexString=In;function Pc(e,t=!1){if(typeof e=="string"){const r=Si(e).toLowerCase();if(Tc.test(r))return(0,ft.HexString)(t?`0x${r}`:r)}throw _r.standardErrors.rpc.invalidParams(`"${String(e)}" is not a hexadecimal string`)}q.ensureHexString=Pc;function xn(e,t=!1){let r=Pc(e,!1);return r.length%2===1&&(r=(0,ft.HexString)(`0${r}`)),t?(0,ft.HexString)(`0x${r}`):r}q.ensureEvenLengthHexString=xn;function Ju(e){if(typeof e=="string"){const t=Si(e).toLowerCase();if(In(t)&&t.length===40)return(0,ft.AddressString)(Oc(t))}throw _r.standardErrors.rpc.invalidParams(`Invalid Ethereum address: ${String(e)}`)}q.ensureAddressString=Ju;function Zu(e){if(Buffer.isBuffer(e))return e;if(typeof e=="string"){if(In(e)){const t=xn(e,!1);return Buffer.from(t,"hex")}return Buffer.from(e,"utf8")}throw _r.standardErrors.rpc.invalidParams(`Not binary data: ${String(e)}`)}q.ensureBuffer=Zu;function Bc(e){if(typeof e=="number"&&Number.isInteger(e))return(0,ft.IntNumber)(e);if(typeof e=="string"){if(Nc.test(e))return(0,ft.IntNumber)(Number(e));if(In(e))return(0,ft.IntNumber)(new Ut.default(xn(e,!1),16).toNumber())}throw _r.standardErrors.rpc.invalidParams(`Not an integer: ${String(e)}`)}q.ensureIntNumber=Bc;function Ku(e){if(e instanceof RegExp)return(0,ft.RegExpString)(e.toString());throw _r.standardErrors.rpc.invalidParams(`Not a RegExp: ${String(e)}`)}q.ensureRegExpString=Ku;function Qu(e){if(e!==null&&(Ut.default.isBN(e)||$c(e)))return new Ut.default(e.toString(10),10);if(typeof e=="number")return new Ut.default(Bc(e));if(typeof e=="string"){if(Nc.test(e))return new Ut.default(e,10);if(In(e))return new Ut.default(xn(e,!1),16)}throw _r.standardErrors.rpc.invalidParams(`Not an integer: ${String(e)}`)}q.ensureBN=Qu;function Yu(e){if(typeof e=="string")return JSON.parse(e);if(typeof e=="object")return e;throw _r.standardErrors.rpc.invalidParams(`Not a JSON string or an object: ${String(e)}`)}q.ensureParsedJSONObject=Yu;function $c(e){if(e==null||typeof e.constructor!="function")return!1;const{constructor:t}=e;return typeof t.config=="function"&&typeof t.EUCLID=="number"}q.isBigNumber=$c;function Xu(e,t){return Array.from({length:t-e},(r,n)=>e+n)}q.range=Xu;function eh(){const e=document.querySelector('link[sizes="192x192"]')||document.querySelector('link[sizes="180x180"]')||document.querySelector('link[rel="icon"]')||document.querySelector('link[rel="shortcut icon"]'),{protocol:t,host:r}=document.location,n=e?e.getAttribute("href"):null;return!n||n.startsWith("javascript:")||n.startsWith("vbscript:")?null:n.startsWith("http://")||n.startsWith("https://")||n.startsWith("data:")?n:n.startsWith("//")?t+n:`${t}//${r}${n}`}q.getFavicon=eh;function th(e,t,r,n,i,s){const a=n?"parent-id":"id",c=new URLSearchParams({[a]:e,secret:t,server:r,v:i,chainId:s.toString()}).toString();return`${r}/#/link?${c}`}q.createQrUrl=th;function Dc(){try{return window.frameElement!==null}catch{return!1}}q.isInIFrame=Dc;function rh(){try{return Dc()&&window.top?window.top.location:window.location}catch{return window.location}}q.getLocation=rh;function nh(){var e;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test((e=window==null?void 0:window.navigator)===null||e===void 0?void 0:e.userAgent)}q.isMobileWeb=nh;var Ri={};Object.defineProperty(Ri,"__esModule",{value:!0});Ri.ScopedLocalStorage=void 0;class ih{constructor(t){this.scope=t}setItem(t,r){localStorage.setItem(this.scopedKey(t),r)}getItem(t){return localStorage.getItem(this.scopedKey(t))}removeItem(t){localStorage.removeItem(this.scopedKey(t))}clear(){const t=this.scopedKey(""),r=[];for(let n=0;n<localStorage.length;n++){const i=localStorage.key(n);typeof i=="string"&&i.startsWith(t)&&r.push(i)}r.forEach(n=>localStorage.removeItem(n))}scopedKey(t){return`${this.scope}:${t}`}}Ri.ScopedLocalStorage=ih;var Qr={},An={},Nn={},an={};Object.defineProperty(an,"__esModule",{value:!0});an.EVENTS=void 0;an.EVENTS={STARTED_CONNECTING:"walletlink_sdk.started.connecting",CONNECTED_STATE_CHANGE:"walletlink_sdk.connected",DISCONNECTED:"walletlink_sdk.disconnected",METADATA_DESTROYED:"walletlink_sdk_metadata_destroyed",LINKED:"walletlink_sdk.linked",FAILURE:"walletlink_sdk.generic_failure",SESSION_CONFIG_RECEIVED:"walletlink_sdk.session_config_event_received",ETH_ACCOUNTS_STATE:"walletlink_sdk.eth_accounts_state",SESSION_STATE_CHANGE:"walletlink_sdk.session_state_change",UNLINKED_ERROR_STATE:"walletlink_sdk.unlinked_error_state",SKIPPED_CLEARING_SESSION:"walletlink_sdk.skipped_clearing_session",GENERAL_ERROR:"walletlink_sdk.general_error",WEB3_REQUEST:"walletlink_sdk.web3.request",WEB3_REQUEST_PUBLISHED:"walletlink_sdk.web3.request_published",WEB3_RESPONSE:"walletlink_sdk.web3.response",METHOD_NOT_IMPLEMENTED:"walletlink_sdk.method_not_implemented",UNKNOWN_ADDRESS_ENCOUNTERED:"walletlink_sdk.unknown_address_encountered"};var dt={};Object.defineProperty(dt,"__esModule",{value:!0});dt.RelayAbstract=dt.APP_VERSION_KEY=dt.LOCAL_STORAGE_ADDRESSES_KEY=dt.WALLET_USER_NAME_KEY=void 0;const Go=Cn;dt.WALLET_USER_NAME_KEY="walletUsername";dt.LOCAL_STORAGE_ADDRESSES_KEY="Addresses";dt.APP_VERSION_KEY="AppVersion";class sh{async makeEthereumJSONRPCRequest(t,r){if(!r)throw new Error("Error: No jsonRpcUrl provided");return window.fetch(r,{method:"POST",body:JSON.stringify(t),mode:"cors",headers:{"Content-Type":"application/json"}}).then(n=>n.json()).then(n=>{if(!n)throw Go.standardErrors.rpc.parse({});const i=n,{error:s}=i;if(s)throw(0,Go.serializeError)(s,t.method);return i})}}dt.RelayAbstract=sh;var cn={},Fc={exports:{}},Ks={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(e,t){var r=gi,n=r.Buffer;function i(a,c){for(var h in a)c[h]=a[h]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(i(r,t),t.Buffer=s);function s(a,c,h){return n(a,c,h)}s.prototype=Object.create(n.prototype),i(n,s),s.from=function(a,c,h){if(typeof a=="number")throw new TypeError("Argument must not be a number");return n(a,c,h)},s.alloc=function(a,c,h){if(typeof a!="number")throw new TypeError("Argument must be a number");var d=n(a);return c!==void 0?typeof h=="string"?d.fill(c,h):d.fill(c):d.fill(0),d},s.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n(a)},s.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(a)}})(Ks,Ks.exports);var zt=Ks.exports,jc=zt.Buffer;function Mi(e,t){this._block=jc.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}Mi.prototype.update=function(e,t){typeof e=="string"&&(t=t||"utf8",e=jc.from(e,t));for(var r=this._block,n=this._blockSize,i=e.length,s=this._len,a=0;a<i;){for(var c=s%n,h=Math.min(i-a,n-c),d=0;d<h;d++)r[c+d]=e[a+d];s+=h,a+=h,s%n===0&&this._update(r)}return this._len+=i,this};Mi.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=this._len*8;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(r&4294967295)>>>0,i=(r-n)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var s=this._hash();return e?s.toString(e):s};Mi.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var ln=Mi,oh=wt,Hc=ln,ah=zt.Buffer,ch=[1518500249,1859775393,-1894007588,-899497514],lh=new Array(80);function Tn(){this.init(),this._w=lh,Hc.call(this,64,56)}oh(Tn,Hc);Tn.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function uh(e){return e<<5|e>>>27}function hh(e){return e<<30|e>>>2}function dh(e,t,r,n){return e===0?t&r|~t&n:e===2?t&r|t&n|r&n:t^r^n}Tn.prototype._update=function(e){for(var t=this._w,r=this._a|0,n=this._b|0,i=this._c|0,s=this._d|0,a=this._e|0,c=0;c<16;++c)t[c]=e.readInt32BE(c*4);for(;c<80;++c)t[c]=t[c-3]^t[c-8]^t[c-14]^t[c-16];for(var h=0;h<80;++h){var d=~~(h/20),p=uh(r)+dh(d,n,i,s)+a+t[h]+ch[d]|0;a=s,s=i,i=hh(n),n=r,r=p}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=a+this._e|0};Tn.prototype._hash=function(){var e=ah.allocUnsafe(20);return e.writeInt32BE(this._a|0,0),e.writeInt32BE(this._b|0,4),e.writeInt32BE(this._c|0,8),e.writeInt32BE(this._d|0,12),e.writeInt32BE(this._e|0,16),e};var fh=Tn,ph=wt,Uc=ln,gh=zt.Buffer,mh=[1518500249,1859775393,-1894007588,-899497514],bh=new Array(80);function Ln(){this.init(),this._w=bh,Uc.call(this,64,56)}ph(Ln,Uc);Ln.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function vh(e){return e<<1|e>>>31}function wh(e){return e<<5|e>>>27}function yh(e){return e<<30|e>>>2}function _h(e,t,r,n){return e===0?t&r|~t&n:e===2?t&r|t&n|r&n:t^r^n}Ln.prototype._update=function(e){for(var t=this._w,r=this._a|0,n=this._b|0,i=this._c|0,s=this._d|0,a=this._e|0,c=0;c<16;++c)t[c]=e.readInt32BE(c*4);for(;c<80;++c)t[c]=vh(t[c-3]^t[c-8]^t[c-14]^t[c-16]);for(var h=0;h<80;++h){var d=~~(h/20),p=wh(r)+_h(d,n,i,s)+a+t[h]+mh[d]|0;a=s,s=i,i=yh(n),n=r,r=p}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=a+this._e|0};Ln.prototype._hash=function(){var e=gh.allocUnsafe(20);return e.writeInt32BE(this._a|0,0),e.writeInt32BE(this._b|0,4),e.writeInt32BE(this._c|0,8),e.writeInt32BE(this._d|0,12),e.writeInt32BE(this._e|0,16),e};var Eh=Ln,Sh=wt,Wc=ln,Rh=zt.Buffer,Mh=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Ch=new Array(64);function On(){this.init(),this._w=Ch,Wc.call(this,64,56)}Sh(On,Wc);On.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function kh(e,t,r){return r^e&(t^r)}function Ih(e,t,r){return e&t|r&(e|t)}function xh(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function Ah(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function Nh(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}function Th(e){return(e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10}On.prototype._update=function(e){for(var t=this._w,r=this._a|0,n=this._b|0,i=this._c|0,s=this._d|0,a=this._e|0,c=this._f|0,h=this._g|0,d=this._h|0,p=0;p<16;++p)t[p]=e.readInt32BE(p*4);for(;p<64;++p)t[p]=Th(t[p-2])+t[p-7]+Nh(t[p-15])+t[p-16]|0;for(var w=0;w<64;++w){var y=d+Ah(a)+kh(a,c,h)+Mh[w]+t[w]|0,k=xh(r)+Ih(r,n,i)|0;d=h,h=c,c=a,a=s+y|0,s=i,i=n,n=r,r=y+k|0}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=a+this._e|0,this._f=c+this._f|0,this._g=h+this._g|0,this._h=d+this._h|0};On.prototype._hash=function(){var e=Rh.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e};var Vc=On,Lh=wt,Oh=Vc,Ph=ln,Bh=zt.Buffer,$h=new Array(64);function Ci(){this.init(),this._w=$h,Ph.call(this,64,56)}Lh(Ci,Oh);Ci.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this};Ci.prototype._hash=function(){var e=Bh.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e};var Dh=Ci,Fh=wt,qc=ln,jh=zt.Buffer,Jo=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],Hh=new Array(160);function Pn(){this.init(),this._w=Hh,qc.call(this,128,112)}Fh(Pn,qc);Pn.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function Zo(e,t,r){return r^e&(t^r)}function Ko(e,t,r){return e&t|r&(e|t)}function Qo(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function Yo(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function Uh(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function Wh(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function Vh(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function qh(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function Ge(e,t){return e>>>0<t>>>0?1:0}Pn.prototype._update=function(e){for(var t=this._w,r=this._ah|0,n=this._bh|0,i=this._ch|0,s=this._dh|0,a=this._eh|0,c=this._fh|0,h=this._gh|0,d=this._hh|0,p=this._al|0,w=this._bl|0,y=this._cl|0,k=this._dl|0,N=this._el|0,P=this._fl|0,L=this._gl|0,M=this._hl|0,x=0;x<32;x+=2)t[x]=e.readInt32BE(x*4),t[x+1]=e.readInt32BE(x*4+4);for(;x<160;x+=2){var T=t[x-30],$=t[x-15*2+1],O=Uh(T,$),D=Wh($,T);T=t[x-2*2],$=t[x-2*2+1];var J=Vh(T,$),z=qh($,T),W=t[x-7*2],ne=t[x-7*2+1],Q=t[x-16*2],ie=t[x-16*2+1],m=D+ne|0,o=O+W+Ge(m,D)|0;m=m+z|0,o=o+J+Ge(m,z)|0,m=m+ie|0,o=o+Q+Ge(m,ie)|0,t[x]=o,t[x+1]=m}for(var u=0;u<160;u+=2){o=t[u],m=t[u+1];var f=Ko(r,n,i),g=Ko(p,w,y),v=Qo(r,p),R=Qo(p,r),I=Yo(a,N),b=Yo(N,a),l=Jo[u],S=Jo[u+1],U=Zo(a,c,h),V=Zo(N,P,L),C=M+b|0,A=d+I+Ge(C,M)|0;C=C+V|0,A=A+U+Ge(C,V)|0,C=C+S|0,A=A+l+Ge(C,S)|0,C=C+m|0,A=A+o+Ge(C,m)|0;var B=R+g|0,H=v+f+Ge(B,R)|0;d=h,M=L,h=c,L=P,c=a,P=N,N=k+C|0,a=s+A+Ge(N,k)|0,s=i,k=y,i=n,y=w,n=r,w=p,p=C+B|0,r=A+H+Ge(p,C)|0}this._al=this._al+p|0,this._bl=this._bl+w|0,this._cl=this._cl+y|0,this._dl=this._dl+k|0,this._el=this._el+N|0,this._fl=this._fl+P|0,this._gl=this._gl+L|0,this._hl=this._hl+M|0,this._ah=this._ah+r+Ge(this._al,p)|0,this._bh=this._bh+n+Ge(this._bl,w)|0,this._ch=this._ch+i+Ge(this._cl,y)|0,this._dh=this._dh+s+Ge(this._dl,k)|0,this._eh=this._eh+a+Ge(this._el,N)|0,this._fh=this._fh+c+Ge(this._fl,P)|0,this._gh=this._gh+h+Ge(this._gl,L)|0,this._hh=this._hh+d+Ge(this._hl,M)|0};Pn.prototype._hash=function(){var e=jh.allocUnsafe(64);function t(r,n,i){e.writeInt32BE(r,i),e.writeInt32BE(n,i+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),e};var zc=Pn,zh=wt,Gh=zc,Jh=ln,Zh=zt.Buffer,Kh=new Array(160);function ki(){this.init(),this._w=Kh,Jh.call(this,128,112)}zh(ki,Gh);ki.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this};ki.prototype._hash=function(){var e=Zh.allocUnsafe(48);function t(r,n,i){e.writeInt32BE(r,i),e.writeInt32BE(n,i+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),e};var Qh=ki,Er=Fc.exports=function(t){t=t.toLowerCase();var r=Er[t];if(!r)throw new Error(t+" is not supported (we accept pull requests)");return new r};Er.sha=fh;Er.sha1=Eh;Er.sha224=Dh;Er.sha256=Vc;Er.sha384=Qh;Er.sha512=zc;var Yh=Fc.exports;Object.defineProperty(cn,"__esModule",{value:!0});cn.Session=void 0;const Xo=Yh,ea=q,ta="session:id",ra="session:secret",na="session:linked";class co{constructor(t,r,n,i){this._storage=t,this._id=r||(0,ea.randomBytesHex)(16),this._secret=n||(0,ea.randomBytesHex)(32),this._key=new Xo.sha256().update(`${this._id}, ${this._secret} WalletLink`).digest("hex"),this._linked=!!i}static load(t){const r=t.getItem(ta),n=t.getItem(na),i=t.getItem(ra);return r&&i?new co(t,r,i,n==="1"):null}static hash(t){return new Xo.sha256().update(t).digest("hex")}get id(){return this._id}get secret(){return this._secret}get key(){return this._key}get linked(){return this._linked}set linked(t){this._linked=t,this.persistLinked()}save(){return this._storage.setItem(ta,this._id),this._storage.setItem(ra,this._secret),this.persistLinked(),this}persistLinked(){this._storage.setItem(na,this._linked?"1":"0")}}cn.Session=co;var Ii={},xi={};Object.defineProperty(xi,"__esModule",{value:!0});xi.Cipher=void 0;const Kn=q;class Xh{constructor(t){this.secret=t}async encrypt(t){const r=this.secret;if(r.length!==64)throw Error("secret must be 256 bits");const n=crypto.getRandomValues(new Uint8Array(12)),i=await crypto.subtle.importKey("raw",(0,Kn.hexStringToUint8Array)(r),{name:"aes-gcm"},!1,["encrypt","decrypt"]),s=new TextEncoder,a=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:n},i,s.encode(t)),c=16,h=a.slice(a.byteLength-c),d=a.slice(0,a.byteLength-c),p=new Uint8Array(h),w=new Uint8Array(d),y=new Uint8Array([...n,...p,...w]);return(0,Kn.uint8ArrayToHex)(y)}async decrypt(t){const r=this.secret;if(r.length!==64)throw Error("secret must be 256 bits");return new Promise((n,i)=>{(async function(){const s=await crypto.subtle.importKey("raw",(0,Kn.hexStringToUint8Array)(r),{name:"aes-gcm"},!1,["encrypt","decrypt"]),a=(0,Kn.hexStringToUint8Array)(t),c=a.slice(0,12),h=a.slice(12,28),d=a.slice(28),p=new Uint8Array([...d,...h]),w={name:"AES-GCM",iv:new Uint8Array(c)};try{const y=await window.crypto.subtle.decrypt(w,s,p),k=new TextDecoder;n(k.decode(y))}catch(y){i(y)}})()})}}xi.Cipher=Xh;var Ai={};Object.defineProperty(Ai,"__esModule",{value:!0});Ai.WalletLinkHTTP=void 0;class ed{constructor(t,r,n){this.linkAPIUrl=t,this.sessionId=r;const i=`${r}:${n}`;this.auth=`Basic ${btoa(i)}`}async markUnseenEventsAsSeen(t){return Promise.all(t.map(r=>fetch(`${this.linkAPIUrl}/events/${r.eventId}/seen`,{method:"POST",headers:{Authorization:this.auth}}))).catch(r=>console.error("Unabled to mark event as failed:",r))}async fetchUnseenEvents(){var t;const r=await fetch(`${this.linkAPIUrl}/events?unseen=true`,{headers:{Authorization:this.auth}});if(r.ok){const{events:n,error:i}=await r.json();if(i)throw new Error(`Check unseen events failed: ${i}`);const s=(t=n==null?void 0:n.filter(a=>a.event==="Web3Response").map(a=>({type:"Event",sessionId:this.sessionId,eventId:a.id,event:a.event,data:a.data})))!==null&&t!==void 0?t:[];return this.markUnseenEventsAsSeen(s),s}throw new Error(`Check unseen events failed: ${r.status}`)}}Ai.WalletLinkHTTP=ed;var Yr={};Object.defineProperty(Yr,"__esModule",{value:!0});Yr.WalletLinkWebSocket=Yr.ConnectionState=void 0;var qr;(function(e){e[e.DISCONNECTED=0]="DISCONNECTED",e[e.CONNECTING=1]="CONNECTING",e[e.CONNECTED=2]="CONNECTED"})(qr||(Yr.ConnectionState=qr={}));class td{setConnectionStateListener(t){this.connectionStateListener=t}setIncomingDataListener(t){this.incomingDataListener=t}constructor(t,r=WebSocket){this.WebSocketClass=r,this.webSocket=null,this.pendingData=[],this.url=t.replace(/^http/,"ws")}async connect(){if(this.webSocket)throw new Error("webSocket object is not null");return new Promise((t,r)=>{var n;let i;try{this.webSocket=i=new this.WebSocketClass(this.url)}catch(s){r(s);return}(n=this.connectionStateListener)===null||n===void 0||n.call(this,qr.CONNECTING),i.onclose=s=>{var a;this.clearWebSocket(),r(new Error(`websocket error ${s.code}: ${s.reason}`)),(a=this.connectionStateListener)===null||a===void 0||a.call(this,qr.DISCONNECTED)},i.onopen=s=>{var a;t(),(a=this.connectionStateListener)===null||a===void 0||a.call(this,qr.CONNECTED),this.pendingData.length>0&&([...this.pendingData].forEach(h=>this.sendData(h)),this.pendingData=[])},i.onmessage=s=>{var a,c;if(s.data==="h")(a=this.incomingDataListener)===null||a===void 0||a.call(this,{type:"Heartbeat"});else try{const h=JSON.parse(s.data);(c=this.incomingDataListener)===null||c===void 0||c.call(this,h)}catch{}}})}disconnect(){var t;const{webSocket:r}=this;if(r){this.clearWebSocket(),(t=this.connectionStateListener)===null||t===void 0||t.call(this,qr.DISCONNECTED),this.connectionStateListener=void 0,this.incomingDataListener=void 0;try{r.close()}catch{}}}sendData(t){const{webSocket:r}=this;if(!r){this.pendingData.push(t),this.connect();return}r.send(t)}clearWebSocket(){const{webSocket:t}=this;t&&(this.webSocket=null,t.onclose=null,t.onerror=null,t.onmessage=null,t.onopen=null)}}Yr.WalletLinkWebSocket=td;Object.defineProperty(Ii,"__esModule",{value:!0});Ii.WalletLinkConnection=void 0;const Dr=qe,rd=xi,St=an,ia=dt,Fr=cn,nd=Ai,Qn=Yr,sa=1e4,id=6e4;class sd{constructor({session:t,linkAPIUrl:r,listener:n,diagnostic:i,WebSocketClass:s=WebSocket}){this.destroyed=!1,this.lastHeartbeatResponse=0,this.nextReqId=(0,Dr.IntNumber)(1),this._connected=!1,this._linked=!1,this.shouldFetchUnseenEventsOnConnect=!1,this.requestResolutions=new Map,this.handleSessionMetadataUpdated=c=>{if(!c)return;new Map([["__destroyed",this.handleDestroyed],["EthereumAddress",this.handleAccountUpdated],["WalletUsername",this.handleWalletUsernameUpdated],["AppVersion",this.handleAppVersionUpdated],["ChainId",d=>c.JsonRpcUrl&&this.handleChainUpdated(d,c.JsonRpcUrl)]]).forEach((d,p)=>{const w=c[p];w!==void 0&&d(w)})},this.handleDestroyed=c=>{var h,d;c==="1"&&((h=this.listener)===null||h===void 0||h.resetAndReload(),(d=this.diagnostic)===null||d===void 0||d.log(St.EVENTS.METADATA_DESTROYED,{alreadyDestroyed:this.isDestroyed,sessionIdHash:Fr.Session.hash(this.session.id)}))},this.handleAccountUpdated=async c=>{var h,d;try{const p=await this.cipher.decrypt(c);(h=this.listener)===null||h===void 0||h.accountUpdated(p)}catch{(d=this.diagnostic)===null||d===void 0||d.log(St.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"selectedAddress"})}},this.handleMetadataUpdated=async(c,h)=>{var d,p;try{const w=await this.cipher.decrypt(h);(d=this.listener)===null||d===void 0||d.metadataUpdated(c,w)}catch{(p=this.diagnostic)===null||p===void 0||p.log(St.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:c})}},this.handleWalletUsernameUpdated=async c=>{this.handleMetadataUpdated(ia.WALLET_USER_NAME_KEY,c)},this.handleAppVersionUpdated=async c=>{this.handleMetadataUpdated(ia.APP_VERSION_KEY,c)},this.handleChainUpdated=async(c,h)=>{var d,p;try{const w=await this.cipher.decrypt(c),y=await this.cipher.decrypt(h);(d=this.listener)===null||d===void 0||d.chainUpdated(w,y)}catch{(p=this.diagnostic)===null||p===void 0||p.log(St.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"chainId|jsonRpcUrl"})}},this.session=t,this.cipher=new rd.Cipher(t.secret),this.diagnostic=i,this.listener=n;const a=new Qn.WalletLinkWebSocket(`${r}/rpc`,s);a.setConnectionStateListener(async c=>{var h;(h=this.diagnostic)===null||h===void 0||h.log(St.EVENTS.CONNECTED_STATE_CHANGE,{state:c,sessionIdHash:Fr.Session.hash(t.id)});let d=!1;switch(c){case Qn.ConnectionState.DISCONNECTED:if(!this.destroyed){const p=async()=>{await new Promise(w=>setTimeout(w,5e3)),this.destroyed||a.connect().catch(()=>{p()})};p()}break;case Qn.ConnectionState.CONNECTED:try{await this.authenticate(),this.sendIsLinked(),this.sendGetSessionConfig(),d=!0}catch{}this.updateLastHeartbeat(),setInterval(()=>{this.heartbeat()},sa),this.shouldFetchUnseenEventsOnConnect&&this.fetchUnseenEventsAPI();break;case Qn.ConnectionState.CONNECTING:break}this.connected!==d&&(this.connected=d)}),a.setIncomingDataListener(c=>{var h,d,p;switch(c.type){case"Heartbeat":this.updateLastHeartbeat();return;case"IsLinkedOK":case"Linked":{const w=c.type==="IsLinkedOK"?c.linked:void 0;(h=this.diagnostic)===null||h===void 0||h.log(St.EVENTS.LINKED,{sessionIdHash:Fr.Session.hash(t.id),linked:w,type:c.type,onlineGuests:c.onlineGuests}),this.linked=w||c.onlineGuests>0;break}case"GetSessionConfigOK":case"SessionConfigUpdated":{(d=this.diagnostic)===null||d===void 0||d.log(St.EVENTS.SESSION_CONFIG_RECEIVED,{sessionIdHash:Fr.Session.hash(t.id),metadata_keys:c&&c.metadata?Object.keys(c.metadata):void 0}),this.handleSessionMetadataUpdated(c.metadata);break}case"Event":{this.handleIncomingEvent(c);break}}c.id!==void 0&&((p=this.requestResolutions.get(c.id))===null||p===void 0||p(c))}),this.ws=a,this.http=new nd.WalletLinkHTTP(r,t.id,t.key)}connect(){var t;if(this.destroyed)throw new Error("instance is destroyed");(t=this.diagnostic)===null||t===void 0||t.log(St.EVENTS.STARTED_CONNECTING,{sessionIdHash:Fr.Session.hash(this.session.id)}),this.ws.connect()}destroy(){var t;this.destroyed=!0,this.ws.disconnect(),(t=this.diagnostic)===null||t===void 0||t.log(St.EVENTS.DISCONNECTED,{sessionIdHash:Fr.Session.hash(this.session.id)}),this.listener=void 0}get isDestroyed(){return this.destroyed}get connected(){return this._connected}set connected(t){var r,n;this._connected=t,t&&((r=this.onceConnected)===null||r===void 0||r.call(this)),(n=this.listener)===null||n===void 0||n.connectedUpdated(t)}setOnceConnected(t){return new Promise(r=>{this.connected?t().then(r):this.onceConnected=()=>{t().then(r),this.onceConnected=void 0}})}get linked(){return this._linked}set linked(t){var r,n;this._linked=t,t&&((r=this.onceLinked)===null||r===void 0||r.call(this)),(n=this.listener)===null||n===void 0||n.linkedUpdated(t)}setOnceLinked(t){return new Promise(r=>{this.linked?t().then(r):this.onceLinked=()=>{t().then(r),this.onceLinked=void 0}})}async handleIncomingEvent(t){var r,n;if(!(t.type!=="Event"||t.event!=="Web3Response"))try{const i=await this.cipher.decrypt(t.data),s=JSON.parse(i);if(s.type!=="WEB3_RESPONSE")return;(r=this.listener)===null||r===void 0||r.handleWeb3ResponseMessage(s)}catch{(n=this.diagnostic)===null||n===void 0||n.log(St.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"incomingEvent"})}}async checkUnseenEvents(){if(!this.connected){this.shouldFetchUnseenEventsOnConnect=!0;return}await new Promise(t=>setTimeout(t,250));try{await this.fetchUnseenEventsAPI()}catch(t){console.error("Unable to check for unseen events",t)}}async fetchUnseenEventsAPI(){this.shouldFetchUnseenEventsOnConnect=!1,(await this.http.fetchUnseenEvents()).forEach(r=>this.handleIncomingEvent(r))}async setSessionMetadata(t,r){const n={type:"SetSessionConfig",id:(0,Dr.IntNumber)(this.nextReqId++),sessionId:this.session.id,metadata:{[t]:r}};return this.setOnceConnected(async()=>{const i=await this.makeRequest(n);if(i.type==="Fail")throw new Error(i.error||"failed to set session metadata")})}async publishEvent(t,r,n=!1){const i=await this.cipher.encrypt(JSON.stringify(Object.assign(Object.assign({},r),{origin:location.origin,relaySource:window.coinbaseWalletExtension?"injected_sdk":"sdk"}))),s={type:"PublishEvent",id:(0,Dr.IntNumber)(this.nextReqId++),sessionId:this.session.id,event:t,data:i,callWebhook:n};return this.setOnceLinked(async()=>{const a=await this.makeRequest(s);if(a.type==="Fail")throw new Error(a.error||"failed to publish event");return a.eventId})}sendData(t){this.ws.sendData(JSON.stringify(t))}updateLastHeartbeat(){this.lastHeartbeatResponse=Date.now()}heartbeat(){if(Date.now()-this.lastHeartbeatResponse>sa*2){this.ws.disconnect();return}try{this.ws.sendData("h")}catch{}}async makeRequest(t,r=id){const n=t.id;this.sendData(t);let i;return Promise.race([new Promise((s,a)=>{i=window.setTimeout(()=>{a(new Error(`request ${n} timed out`))},r)}),new Promise(s=>{this.requestResolutions.set(n,a=>{clearTimeout(i),s(a),this.requestResolutions.delete(n)})})])}async authenticate(){const t={type:"HostSession",id:(0,Dr.IntNumber)(this.nextReqId++),sessionId:this.session.id,sessionKey:this.session.key},r=await this.makeRequest(t);if(r.type==="Fail")throw new Error(r.error||"failed to authentcate")}sendIsLinked(){const t={type:"IsLinked",id:(0,Dr.IntNumber)(this.nextReqId++),sessionId:this.session.id};this.sendData(t)}sendGetSessionConfig(){const t={type:"GetSessionConfig",id:(0,Dr.IntNumber)(this.nextReqId++),sessionId:this.session.id};this.sendData(t)}}Ii.WalletLinkConnection=sd;var Bn={},$n={},lo={};Object.defineProperty(lo,"__esModule",{value:!0});lo.default='@namespace svg "http://www.w3.org/2000/svg";.-cbwsdk-css-reset,.-cbwsdk-css-reset *{animation:none;animation-delay:0;animation-direction:normal;animation-duration:0;animation-fill-mode:none;animation-iteration-count:1;animation-name:none;animation-play-state:running;animation-timing-function:ease;backface-visibility:visible;background:0;background-attachment:scroll;background-clip:border-box;background-color:rgba(0,0,0,0);background-image:none;background-origin:padding-box;background-position:0 0;background-position-x:0;background-position-y:0;background-repeat:repeat;background-size:auto auto;border:0;border-style:none;border-width:medium;border-color:inherit;border-bottom:0;border-bottom-color:inherit;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-style:none;border-bottom-width:medium;border-collapse:separate;border-image:none;border-left:0;border-left-color:inherit;border-left-style:none;border-left-width:medium;border-radius:0;border-right:0;border-right-color:inherit;border-right-style:none;border-right-width:medium;border-spacing:0;border-top:0;border-top-color:inherit;border-top-left-radius:0;border-top-right-radius:0;border-top-style:none;border-top-width:medium;box-shadow:none;box-sizing:border-box;caption-side:top;clear:none;clip:auto;color:inherit;columns:auto;column-count:auto;column-fill:balance;column-gap:normal;column-rule:medium none currentColor;column-rule-color:currentColor;column-rule-style:none;column-rule-width:none;column-span:1;column-width:auto;counter-increment:none;counter-reset:none;direction:ltr;empty-cells:show;float:none;font:normal;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;height:auto;hyphens:none;letter-spacing:normal;line-height:normal;list-style:none;list-style-image:none;list-style-position:outside;list-style-type:disc;margin:0;margin-bottom:0;margin-left:0;margin-right:0;margin-top:0;opacity:1;orphans:0;outline:0;outline-color:invert;outline-style:none;outline-width:medium;overflow:visible;overflow-x:visible;overflow-y:visible;padding:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;perspective:none;perspective-origin:50% 50%;pointer-events:auto;position:static;quotes:"\\201C" "\\201D" "\\2018" "\\2019";tab-size:8;table-layout:auto;text-align:inherit;text-align-last:auto;text-decoration:none;text-decoration-color:inherit;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-shadow:none;text-transform:none;transform:none;transform-style:flat;transition:none;transition-delay:0s;transition-duration:0s;transition-property:none;transition-timing-function:ease;unicode-bidi:normal;vertical-align:baseline;visibility:visible;white-space:normal;widows:0;word-spacing:normal;z-index:auto}.-cbwsdk-css-reset strong{font-weight:bold}.-cbwsdk-css-reset *{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;line-height:1}.-cbwsdk-css-reset [class*=container]{margin:0;padding:0}.-cbwsdk-css-reset style{display:none}';var od=G&&G.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($n,"__esModule",{value:!0});$n.injectCssReset=void 0;const ad=od(lo);function cd(){const e=document.createElement("style");e.type="text/css",e.appendChild(document.createTextNode(ad.default)),document.documentElement.appendChild(e)}$n.injectCssReset=cd;var Ni={};const nt=Mn(ku);var Ti={};const Dn=Mn(Iu),Li=Mn(xu);var Xr={},Oi={};Object.defineProperty(Oi,"__esModule",{value:!0});Oi.CloseIcon=void 0;const oa=nt;function ld(e){return(0,oa.h)("svg",Object.assign({width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),(0,oa.h)("path",{d:"M13.7677 13L12.3535 14.4142L18.3535 20.4142L12.3535 26.4142L13.7677 27.8284L19.7677 21.8284L25.7677 27.8284L27.1819 26.4142L21.1819 20.4142L27.1819 14.4142L25.7677 13L19.7677 19L13.7677 13Z"}))}Oi.CloseIcon=ld;var Pi={};Object.defineProperty(Pi,"__esModule",{value:!0});Pi.CoinbaseWalletRound=void 0;const Yn=nt;function ud(e){return(0,Yn.h)("svg",Object.assign({width:"28",height:"28",viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),(0,Yn.h)("circle",{cx:"14",cy:"14",r:"14",fill:"#0052FF"}),(0,Yn.h)("path",{d:"M23.8521 14.0003C23.8521 19.455 19.455 23.8521 14.0003 23.8521C8.54559 23.8521 4.14844 19.455 4.14844 14.0003C4.14844 8.54559 8.54559 4.14844 14.0003 4.14844C19.455 4.14844 23.8521 8.54559 23.8521 14.0003Z",fill:"white"}),(0,Yn.h)("path",{d:"M11.1855 12.5042C11.1855 12.0477 11.1855 11.7942 11.2835 11.642C11.3814 11.4899 11.4793 11.3377 11.6261 11.287C11.8219 11.1855 12.0178 11.1855 12.5073 11.1855H15.4934C15.983 11.1855 16.1788 11.1855 16.3746 11.287C16.5215 11.3884 16.6683 11.4899 16.7173 11.642C16.8152 11.8449 16.8152 12.0477 16.8152 12.5042V15.4965C16.8152 15.953 16.8152 16.2066 16.7173 16.3587C16.6194 16.5109 16.5215 16.663 16.3746 16.7137C16.1788 16.8152 15.983 16.8152 15.4934 16.8152H12.5073C12.0178 16.8152 11.8219 16.8152 11.6261 16.7137C11.4793 16.6123 11.3324 16.5109 11.2835 16.3587C11.1855 16.1558 11.1855 15.953 11.1855 15.4965V12.5042Z",fill:"#0052FF"}))}Pi.CoinbaseWalletRound=ud;var Bi={};Object.defineProperty(Bi,"__esModule",{value:!0});Bi.QRCodeIcon=void 0;const pn=nt;function hd(e){return(0,pn.h)("svg",Object.assign({width:"18",height:"18",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),(0,pn.h)("path",{d:"M3 3V8.99939L5 8.99996V5H9V3H3Z"}),(0,pn.h)("path",{d:"M15 21L21 21V15.0006L19 15V19L15 19V21Z"}),(0,pn.h)("path",{d:"M21 9H19V5H15.0006L15 3H21V9Z"}),(0,pn.h)("path",{d:"M3 15V21H8.99939L8.99996 19H5L5 15H3Z"}))}Bi.QRCodeIcon=hd;var $i={};function Gc(e){this.mode=at.MODE_8BIT_BYTE,this.data=e,this.parsedData=[];for(var t=0,r=this.data.length;t<r;t++){var n=[],i=this.data.charCodeAt(t);i>65536?(n[0]=240|(i&1835008)>>>18,n[1]=128|(i&258048)>>>12,n[2]=128|(i&4032)>>>6,n[3]=128|i&63):i>2048?(n[0]=224|(i&61440)>>>12,n[1]=128|(i&4032)>>>6,n[2]=128|i&63):i>128?(n[0]=192|(i&1984)>>>6,n[1]=128|i&63):n[0]=i,this.parsedData.push(n)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}Gc.prototype={getLength:function(e){return this.parsedData.length},write:function(e){for(var t=0,r=this.parsedData.length;t<r;t++)e.put(this.parsedData[t],8)}};function xt(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}xt.prototype={addData:function(e){var t=new Gc(e);this.dataList.push(t),this.dataCache=null},isDark:function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,t){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[r][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),this.dataCache==null&&(this.dataCache=xt.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},setupPositionProbePattern:function(e,t){for(var r=-1;r<=7;r++)if(!(e+r<=-1||this.moduleCount<=e+r))for(var n=-1;n<=7;n++)t+n<=-1||this.moduleCount<=t+n||(0<=r&&r<=6&&(n==0||n==6)||0<=n&&n<=6&&(r==0||r==6)||2<=r&&r<=4&&2<=n&&n<=4?this.modules[e+r][t+n]=!0:this.modules[e+r][t+n]=!1)},getBestMaskPattern:function(){for(var e=0,t=0,r=0;r<8;r++){this.makeImpl(!0,r);var n=He.getLostPoint(this);(r==0||e>n)&&(e=n,t=r)}return t},createMovieClip:function(e,t,r){var n=e.createEmptyMovieClip(t,r),i=1;this.make();for(var s=0;s<this.modules.length;s++)for(var a=s*i,c=0;c<this.modules[s].length;c++){var h=c*i,d=this.modules[s][c];d&&(n.beginFill(0,100),n.moveTo(h,a),n.lineTo(h+i,a),n.lineTo(h+i,a+i),n.lineTo(h,a+i),n.endFill())}return n},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)this.modules[e][6]==null&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)this.modules[6][t]==null&&(this.modules[6][t]=t%2==0)},setupPositionAdjustPattern:function(){for(var e=He.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var r=0;r<e.length;r++){var n=e[t],i=e[r];if(this.modules[n][i]==null)for(var s=-2;s<=2;s++)for(var a=-2;a<=2;a++)s==-2||s==2||a==-2||a==2||s==0&&a==0?this.modules[n+s][i+a]=!0:this.modules[n+s][i+a]=!1}},setupTypeNumber:function(e){for(var t=He.getBCHTypeNumber(this.typeNumber),r=0;r<18;r++){var n=!e&&(t>>r&1)==1;this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=n}for(var r=0;r<18;r++){var n=!e&&(t>>r&1)==1;this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=n}},setupTypeInfo:function(e,t){for(var r=this.errorCorrectLevel<<3|t,n=He.getBCHTypeInfo(r),i=0;i<15;i++){var s=!e&&(n>>i&1)==1;i<6?this.modules[i][8]=s:i<8?this.modules[i+1][8]=s:this.modules[this.moduleCount-15+i][8]=s}for(var i=0;i<15;i++){var s=!e&&(n>>i&1)==1;i<8?this.modules[8][this.moduleCount-i-1]=s:i<9?this.modules[8][15-i-1+1]=s:this.modules[8][15-i-1]=s}this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){for(var r=-1,n=this.moduleCount-1,i=7,s=0,a=this.moduleCount-1;a>0;a-=2)for(a==6&&a--;;){for(var c=0;c<2;c++)if(this.modules[n][a-c]==null){var h=!1;s<e.length&&(h=(e[s]>>>i&1)==1);var d=He.getMask(t,n,a-c);d&&(h=!h),this.modules[n][a-c]=h,i--,i==-1&&(s++,i=7)}if(n+=r,n<0||this.moduleCount<=n){n-=r,r=-r;break}}}};xt.PAD0=236;xt.PAD1=17;xt.createData=function(e,t,r){for(var n=It.getRSBlocks(e,t),i=new Jc,s=0;s<r.length;s++){var a=r[s];i.put(a.mode,4),i.put(a.getLength(),He.getLengthInBits(a.mode,e)),a.write(i)}for(var c=0,s=0;s<n.length;s++)c+=n[s].dataCount;if(i.getLengthInBits()>c*8)throw new Error("code length overflow. ("+i.getLengthInBits()+">"+c*8+")");for(i.getLengthInBits()+4<=c*8&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=c*8||(i.put(xt.PAD0,8),i.getLengthInBits()>=c*8));)i.put(xt.PAD1,8);return xt.createBytes(i,n)};xt.createBytes=function(e,t){for(var r=0,n=0,i=0,s=new Array(t.length),a=new Array(t.length),c=0;c<t.length;c++){var h=t[c].dataCount,d=t[c].totalCount-h;n=Math.max(n,h),i=Math.max(i,d),s[c]=new Array(h);for(var p=0;p<s[c].length;p++)s[c][p]=255&e.buffer[p+r];r+=h;var w=He.getErrorCorrectPolynomial(d),y=new zr(s[c],w.getLength()-1),k=y.mod(w);a[c]=new Array(w.getLength()-1);for(var p=0;p<a[c].length;p++){var N=p+k.getLength()-a[c].length;a[c][p]=N>=0?k.get(N):0}}for(var P=0,p=0;p<t.length;p++)P+=t[p].totalCount;for(var L=new Array(P),M=0,p=0;p<n;p++)for(var c=0;c<t.length;c++)p<s[c].length&&(L[M++]=s[c][p]);for(var p=0;p<i;p++)for(var c=0;c<t.length;c++)p<a[c].length&&(L[M++]=a[c][p]);return L};var at={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},Wt={L:1,M:0,Q:3,H:2},jt={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},He={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;He.getBCHDigit(t)-He.getBCHDigit(He.G15)>=0;)t^=He.G15<<He.getBCHDigit(t)-He.getBCHDigit(He.G15);return(e<<10|t)^He.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;He.getBCHDigit(t)-He.getBCHDigit(He.G18)>=0;)t^=He.G18<<He.getBCHDigit(t)-He.getBCHDigit(He.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;e!=0;)t++,e>>>=1;return t},getPatternPosition:function(e){return He.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,r){switch(e){case jt.PATTERN000:return(t+r)%2==0;case jt.PATTERN001:return t%2==0;case jt.PATTERN010:return r%3==0;case jt.PATTERN011:return(t+r)%3==0;case jt.PATTERN100:return(Math.floor(t/2)+Math.floor(r/3))%2==0;case jt.PATTERN101:return t*r%2+t*r%3==0;case jt.PATTERN110:return(t*r%2+t*r%3)%2==0;case jt.PATTERN111:return(t*r%3+(t+r)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new zr([1],0),r=0;r<e;r++)t=t.multiply(new zr([1,Ze.gexp(r)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case at.MODE_NUMBER:return 10;case at.MODE_ALPHA_NUM:return 9;case at.MODE_8BIT_BYTE:return 8;case at.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case at.MODE_NUMBER:return 12;case at.MODE_ALPHA_NUM:return 11;case at.MODE_8BIT_BYTE:return 16;case at.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else if(t<41)switch(e){case at.MODE_NUMBER:return 14;case at.MODE_ALPHA_NUM:return 13;case at.MODE_8BIT_BYTE:return 16;case at.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}else throw new Error("type:"+t)},getLostPoint:function(e){for(var t=e.getModuleCount(),r=0,n=0;n<t;n++)for(var i=0;i<t;i++){for(var s=0,a=e.isDark(n,i),c=-1;c<=1;c++)if(!(n+c<0||t<=n+c))for(var h=-1;h<=1;h++)i+h<0||t<=i+h||c==0&&h==0||a==e.isDark(n+c,i+h)&&s++;s>5&&(r+=3+s-5)}for(var n=0;n<t-1;n++)for(var i=0;i<t-1;i++){var d=0;e.isDark(n,i)&&d++,e.isDark(n+1,i)&&d++,e.isDark(n,i+1)&&d++,e.isDark(n+1,i+1)&&d++,(d==0||d==4)&&(r+=3)}for(var n=0;n<t;n++)for(var i=0;i<t-6;i++)e.isDark(n,i)&&!e.isDark(n,i+1)&&e.isDark(n,i+2)&&e.isDark(n,i+3)&&e.isDark(n,i+4)&&!e.isDark(n,i+5)&&e.isDark(n,i+6)&&(r+=40);for(var i=0;i<t;i++)for(var n=0;n<t-6;n++)e.isDark(n,i)&&!e.isDark(n+1,i)&&e.isDark(n+2,i)&&e.isDark(n+3,i)&&e.isDark(n+4,i)&&!e.isDark(n+5,i)&&e.isDark(n+6,i)&&(r+=40);for(var p=0,i=0;i<t;i++)for(var n=0;n<t;n++)e.isDark(n,i)&&p++;var w=Math.abs(100*p/t/t-50)/5;return r+=w*10,r}},Ze={glog:function(e){if(e<1)throw new Error("glog("+e+")");return Ze.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return Ze.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var Qe=0;Qe<8;Qe++)Ze.EXP_TABLE[Qe]=1<<Qe;for(var Qe=8;Qe<256;Qe++)Ze.EXP_TABLE[Qe]=Ze.EXP_TABLE[Qe-4]^Ze.EXP_TABLE[Qe-5]^Ze.EXP_TABLE[Qe-6]^Ze.EXP_TABLE[Qe-8];for(var Qe=0;Qe<255;Qe++)Ze.LOG_TABLE[Ze.EXP_TABLE[Qe]]=Qe;function zr(e,t){if(e.length==null)throw new Error(e.length+"/"+t);for(var r=0;r<e.length&&e[r]==0;)r++;this.num=new Array(e.length-r+t);for(var n=0;n<e.length-r;n++)this.num[n]=e[n+r]}zr.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),r=0;r<this.getLength();r++)for(var n=0;n<e.getLength();n++)t[r+n]^=Ze.gexp(Ze.glog(this.get(r))+Ze.glog(e.get(n)));return new zr(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=Ze.glog(this.get(0))-Ze.glog(e.get(0)),r=new Array(this.getLength()),n=0;n<this.getLength();n++)r[n]=this.get(n);for(var n=0;n<e.getLength();n++)r[n]^=Ze.gexp(Ze.glog(e.get(n))+t);return new zr(r,0).mod(e)}};function It(e,t){this.totalCount=e,this.dataCount=t}It.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];It.getRSBlocks=function(e,t){var r=It.getRsBlockTable(e,t);if(r==null)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var n=r.length/3,i=[],s=0;s<n;s++)for(var a=r[s*3+0],c=r[s*3+1],h=r[s*3+2],d=0;d<a;d++)i.push(new It(c,h));return i};It.getRsBlockTable=function(e,t){switch(t){case Wt.L:return It.RS_BLOCK_TABLE[(e-1)*4+0];case Wt.M:return It.RS_BLOCK_TABLE[(e-1)*4+1];case Wt.Q:return It.RS_BLOCK_TABLE[(e-1)*4+2];case Wt.H:return It.RS_BLOCK_TABLE[(e-1)*4+3];default:return}};function Jc(){this.buffer=[],this.length=0}Jc.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(var r=0;r<t;r++)this.putBit((e>>>t-r-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var vs=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function Zc(e){if(this.options={padding:4,width:256,height:256,typeNumber:4,color:"#000000",background:"#ffffff",ecl:"M",image:{svg:"",width:0,height:0}},typeof e=="string"&&(e={content:e}),e)for(var t in e)this.options[t]=e[t];if(typeof this.options.content!="string")throw new Error("Expected 'content' as string!");if(this.options.content.length===0)throw new Error("Expected 'content' to be non-empty!");if(!(this.options.padding>=0))throw new Error("Expected 'padding' value to be non-negative!");if(!(this.options.width>0)||!(this.options.height>0))throw new Error("Expected 'width' or 'height' value to be higher than zero!");function r(h){switch(h){case"L":return Wt.L;case"M":return Wt.M;case"Q":return Wt.Q;case"H":return Wt.H;default:throw new Error("Unknwon error correction level: "+h)}}function n(h,d){for(var p=i(h),w=1,y=0,k=0,N=vs.length;k<=N;k++){var P=vs[k];if(!P)throw new Error("Content too long: expected "+y+" but got "+p);switch(d){case"L":y=P[0];break;case"M":y=P[1];break;case"Q":y=P[2];break;case"H":y=P[3];break;default:throw new Error("Unknwon error correction level: "+d)}if(p<=y)break;w++}if(w>vs.length)throw new Error("Content too long");return w}function i(h){var d=encodeURI(h).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return d.length+(d.length!=h?3:0)}var s=this.options.content,a=n(s,this.options.ecl),c=r(this.options.ecl);this.qrcode=new xt(a,c),this.qrcode.addData(s),this.qrcode.make()}Zc.prototype.svg=function(e){var t=this.options||{},r=this.qrcode.modules;typeof e>"u"&&(e={container:t.container||"svg"});for(var n=typeof t.pretty<"u"?!!t.pretty:!0,i=n?"  ":"",s=n?`\r
`:"",a=t.width,c=t.height,h=r.length,d=a/(h+2*t.padding),p=c/(h+2*t.padding),w=typeof t.join<"u"?!!t.join:!1,y=typeof t.swap<"u"?!!t.swap:!1,k=typeof t.xmlDeclaration<"u"?!!t.xmlDeclaration:!0,N=typeof t.predefined<"u"?!!t.predefined:!1,P=N?i+'<defs><path id="qrmodule" d="M0 0 h'+p+" v"+d+' H0 z" style="fill:'+t.color+';shape-rendering:crispEdges;" /></defs>'+s:"",L=i+'<rect x="0" y="0" width="'+a+'" height="'+c+'" style="fill:'+t.background+';shape-rendering:crispEdges;"/>'+s,M="",x="",T=0;T<h;T++)for(var $=0;$<h;$++){var O=r[$][T];if(O){var D=$*d+t.padding*d,J=T*p+t.padding*p;if(y){var z=D;D=J,J=z}if(w){var W=d+D,ne=p+J;D=Number.isInteger(D)?Number(D):D.toFixed(2),J=Number.isInteger(J)?Number(J):J.toFixed(2),W=Number.isInteger(W)?Number(W):W.toFixed(2),ne=Number.isInteger(ne)?Number(ne):ne.toFixed(2),x+="M"+D+","+J+" V"+ne+" H"+W+" V"+J+" H"+D+" Z "}else N?M+=i+'<use x="'+D.toString()+'" y="'+J.toString()+'" href="#qrmodule" />'+s:M+=i+'<rect x="'+D.toString()+'" y="'+J.toString()+'" width="'+d+'" height="'+p+'" style="fill:'+t.color+';shape-rendering:crispEdges;"/>'+s}}w&&(M=i+'<path x="0" y="0" style="fill:'+t.color+';shape-rendering:crispEdges;" d="'+x+'" />');let Q="";if(this.options.image!==void 0&&this.options.image.svg){const m=a*this.options.image.width/100,o=c*this.options.image.height/100,u=a/2-m/2,f=c/2-o/2;Q+=`<svg x="${u}" y="${f}" width="${m}" height="${o}" viewBox="0 0 100 100" preserveAspectRatio="xMinYMin meet">`,Q+=this.options.image.svg+s,Q+="</svg>"}var ie="";switch(e.container){case"svg":k&&(ie+='<?xml version="1.0" standalone="yes"?>'+s),ie+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+a+'" height="'+c+'">'+s,ie+=P+L+M,ie+=Q,ie+="</svg>";break;case"svg-viewbox":k&&(ie+='<?xml version="1.0" standalone="yes"?>'+s),ie+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '+a+" "+c+'">'+s,ie+=P+L+M,ie+=Q,ie+="</svg>";break;case"g":ie+='<g width="'+a+'" height="'+c+'">'+s,ie+=P+L+M,ie+=Q,ie+="</g>";break;default:ie+=(P+L+M+Q).replace(/^\s+/,"");break}return ie};var dd=Zc,fd=G&&G.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($i,"__esModule",{value:!0});$i.QRCode=void 0;const pd=nt,aa=Li,gd=fd(dd),md=e=>{const[t,r]=(0,aa.useState)("");return(0,aa.useEffect)(()=>{var n,i;const s=new gd.default({content:e.content,background:e.bgColor||"#ffffff",color:e.fgColor||"#000000",container:"svg",ecl:"M",width:(n=e.width)!==null&&n!==void 0?n:256,height:(i=e.height)!==null&&i!==void 0?i:256,padding:0,image:e.image}),a=Buffer.from(s.svg(),"utf8").toString("base64");r(`data:image/svg+xml;base64,${a}`)},[e.bgColor,e.content,e.fgColor,e.height,e.image,e.width]),t?(0,pd.h)("img",{src:t,alt:"QR Code"}):null};$i.QRCode=md;var Di={},uo={};Object.defineProperty(uo,"__esModule",{value:!0});uo.default=".-cbwsdk-css-reset .-cbwsdk-spinner{display:inline-block}.-cbwsdk-css-reset .-cbwsdk-spinner svg{display:inline-block;animation:2s linear infinite -cbwsdk-spinner-svg}.-cbwsdk-css-reset .-cbwsdk-spinner svg circle{animation:1.9s ease-in-out infinite both -cbwsdk-spinner-circle;display:block;fill:rgba(0,0,0,0);stroke-dasharray:283;stroke-dashoffset:280;stroke-linecap:round;stroke-width:10px;transform-origin:50% 50%}@keyframes -cbwsdk-spinner-svg{0%{transform:rotateZ(0deg)}100%{transform:rotateZ(360deg)}}@keyframes -cbwsdk-spinner-circle{0%,25%{stroke-dashoffset:280;transform:rotate(0)}50%,75%{stroke-dashoffset:75;transform:rotate(45deg)}100%{stroke-dashoffset:280;transform:rotate(360deg)}}";var bd=G&&G.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Di,"__esModule",{value:!0});Di.Spinner=void 0;const Xn=nt,vd=bd(uo),wd=e=>{var t;const r=(t=e.size)!==null&&t!==void 0?t:64,n=e.color||"#000";return(0,Xn.h)("div",{class:"-cbwsdk-spinner"},(0,Xn.h)("style",null,vd.default),(0,Xn.h)("svg",{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",style:{width:r,height:r}},(0,Xn.h)("circle",{style:{cx:50,cy:50,r:45,stroke:n}})))};Di.Spinner=wd;var ho={};Object.defineProperty(ho,"__esModule",{value:!0});ho.default=".-cbwsdk-css-reset .-cbwsdk-connect-content{height:430px;width:700px;border-radius:12px;padding:30px}.-cbwsdk-css-reset .-cbwsdk-connect-content.light{background:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content.dark{background:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-connect-content-header{display:flex;align-items:center;justify-content:space-between;margin:0 0 30px}.-cbwsdk-css-reset .-cbwsdk-connect-content-heading{font-style:normal;font-weight:500;font-size:28px;line-height:36px;margin:0}.-cbwsdk-css-reset .-cbwsdk-connect-content-heading.light{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-connect-content-heading.dark{color:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content-layout{display:flex;flex-direction:row}.-cbwsdk-css-reset .-cbwsdk-connect-content-column-left{margin-right:30px;display:flex;flex-direction:column;justify-content:space-between}.-cbwsdk-css-reset .-cbwsdk-connect-content-column-right{flex:25%;margin-right:34px}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-wrapper{width:220px;height:220px;border-radius:12px;display:flex;justify-content:center;align-items:center;background:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting{position:absolute;top:0;bottom:0;left:0;right:0;display:flex;flex-direction:column;align-items:center;justify-content:center}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.light{background-color:rgba(255,255,255,.95)}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.light>p{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.dark{background-color:rgba(10,11,13,.9)}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.dark>p{color:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting>p{font-size:12px;font-weight:bold;margin-top:16px}.-cbwsdk-css-reset .-cbwsdk-connect-content-update-app{border-radius:8px;font-size:14px;line-height:20px;padding:12px;width:339px}.-cbwsdk-css-reset .-cbwsdk-connect-content-update-app.light{background:#eef0f3;color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-connect-content-update-app.dark{background:#1e2025;color:#8a919e}.-cbwsdk-css-reset .-cbwsdk-cancel-button{-webkit-appearance:none;border:none;background:none;cursor:pointer;padding:0;margin:0}.-cbwsdk-css-reset .-cbwsdk-cancel-button-x{position:relative;display:block;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-wallet-steps{padding:0 0 0 16px;margin:0;width:100%;list-style:decimal}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item{list-style-type:decimal;display:list-item;font-style:normal;font-weight:400;font-size:16px;line-height:24px;margin-top:20px}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item.light{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item.dark{color:#fff}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item-wrapper{display:flex;align-items:center}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-pad-left{margin-left:6px}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon{display:flex;border-radius:50%;height:24px;width:24px}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon svg{margin:auto;display:block}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon.light{background:#0052ff}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon.dark{background:#588af5}.-cbwsdk-css-reset .-cbwsdk-connect-item{align-items:center;display:flex;flex-direction:row;padding:16px 24px;gap:12px;cursor:pointer;border-radius:100px;font-weight:600}.-cbwsdk-css-reset .-cbwsdk-connect-item.light{background:#f5f8ff;color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-connect-item.dark{background:#001033;color:#588af5}.-cbwsdk-css-reset .-cbwsdk-connect-item-copy-wrapper{margin:0 4px 0 8px}.-cbwsdk-css-reset .-cbwsdk-connect-item-title{margin:0 0 0;font-size:16px;line-height:24px;font-weight:500}.-cbwsdk-css-reset .-cbwsdk-connect-item-description{font-weight:400;font-size:14px;line-height:20px;margin:0}";var Kc=G&&G.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Xr,"__esModule",{value:!0});Xr.CoinbaseWalletSteps=Xr.ConnectContent=void 0;const br=Kc(Dn),oe=nt,yd=q,_d=on,Ed=Oi,Sd=Pi,Rd=Bi,Md=$i,Cd=Di,kd=Kc(ho),ws={title:"Coinbase Wallet app",description:"Connect with your self-custody wallet",steps:Qc},Id=e=>e==="light"?"#FFFFFF":"#0A0B0D";function xd(e){const{theme:t}=e,r=(0,yd.createQrUrl)(e.sessionId,e.sessionSecret,e.linkAPIUrl,e.isParentConnection,e.version,e.chainId),n=ws.steps;return(0,oe.h)("div",{"data-testid":"connect-content",className:(0,br.default)("-cbwsdk-connect-content",t)},(0,oe.h)("style",null,kd.default),(0,oe.h)("div",{className:"-cbwsdk-connect-content-header"},(0,oe.h)("h2",{className:(0,br.default)("-cbwsdk-connect-content-heading",t)},"Scan to connect with our mobile app"),e.onCancel&&(0,oe.h)("button",{type:"button",className:"-cbwsdk-cancel-button",onClick:e.onCancel},(0,oe.h)(Ed.CloseIcon,{fill:t==="light"?"#0A0B0D":"#FFFFFF"}))),(0,oe.h)("div",{className:"-cbwsdk-connect-content-layout"},(0,oe.h)("div",{className:"-cbwsdk-connect-content-column-left"},(0,oe.h)(Ad,{title:ws.title,description:ws.description,theme:t})),(0,oe.h)("div",{className:"-cbwsdk-connect-content-column-right"},(0,oe.h)("div",{className:"-cbwsdk-connect-content-qr-wrapper"},(0,oe.h)(Md.QRCode,{content:r,width:200,height:200,fgColor:"#000",bgColor:"transparent"}),(0,oe.h)("input",{type:"hidden",name:"cbw-cbwsdk-version",value:_d.LIB_VERSION}),(0,oe.h)("input",{type:"hidden",value:r})),(0,oe.h)(n,{theme:t}),!e.isConnected&&(0,oe.h)("div",{"data-testid":"connecting-spinner",className:(0,br.default)("-cbwsdk-connect-content-qr-connecting",t)},(0,oe.h)(Cd.Spinner,{size:36,color:t==="dark"?"#FFF":"#000"}),(0,oe.h)("p",null,"Connecting...")))))}Xr.ConnectContent=xd;function Ad({title:e,description:t,theme:r}){return(0,oe.h)("div",{className:(0,br.default)("-cbwsdk-connect-item",r)},(0,oe.h)("div",null,(0,oe.h)(Sd.CoinbaseWalletRound,null)),(0,oe.h)("div",{className:"-cbwsdk-connect-item-copy-wrapper"},(0,oe.h)("h3",{className:"-cbwsdk-connect-item-title"},e),(0,oe.h)("p",{className:"-cbwsdk-connect-item-description"},t)))}function Qc({theme:e}){return(0,oe.h)("ol",{className:"-cbwsdk-wallet-steps"},(0,oe.h)("li",{className:(0,br.default)("-cbwsdk-wallet-steps-item",e)},(0,oe.h)("div",{className:"-cbwsdk-wallet-steps-item-wrapper"},"Open Coinbase Wallet app")),(0,oe.h)("li",{className:(0,br.default)("-cbwsdk-wallet-steps-item",e)},(0,oe.h)("div",{className:"-cbwsdk-wallet-steps-item-wrapper"},(0,oe.h)("span",null,"Tap ",(0,oe.h)("strong",null,"Scan")," "),(0,oe.h)("span",{className:(0,br.default)("-cbwsdk-wallet-steps-pad-left","-cbwsdk-wallet-steps-icon",e)},(0,oe.h)(Rd.QRCodeIcon,{fill:Id(e)})))))}Xr.CoinbaseWalletSteps=Qc;var Fi={},ji={};Object.defineProperty(ji,"__esModule",{value:!0});ji.ArrowLeftIcon=void 0;const ca=nt;function Nd(e){return(0,ca.h)("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},e),(0,ca.h)("path",{d:"M8.60675 0.155884L7.37816 1.28209L12.7723 7.16662H0V8.83328H12.6548L6.82149 14.6666L8 15.8451L15.8201 8.02501L8.60675 0.155884Z"}))}ji.ArrowLeftIcon=Nd;var Hi={};Object.defineProperty(Hi,"__esModule",{value:!0});Hi.LaptopIcon=void 0;const ys=nt;function Td(e){return(0,ys.h)("svg",Object.assign({width:"14",height:"14",viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg"},e),(0,ys.h)("path",{d:"M1.8001 2.2002H12.2001V9.40019H1.8001V2.2002ZM3.4001 3.8002V7.80019H10.6001V3.8002H3.4001Z"}),(0,ys.h)("path",{d:"M13.4001 10.2002H0.600098C0.600098 11.0838 1.31644 11.8002 2.2001 11.8002H11.8001C12.6838 11.8002 13.4001 11.0838 13.4001 10.2002Z"}))}Hi.LaptopIcon=Td;var Ui={};Object.defineProperty(Ui,"__esModule",{value:!0});Ui.SafeIcon=void 0;const la=nt;function Ld(e){return(0,la.h)("svg",Object.assign({width:"14",height:"14",viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg"},e),(0,la.h)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.600098 0.600098V11.8001H13.4001V0.600098H0.600098ZM7.0001 9.2001C5.3441 9.2001 4.0001 7.8561 4.0001 6.2001C4.0001 4.5441 5.3441 3.2001 7.0001 3.2001C8.6561 3.2001 10.0001 4.5441 10.0001 6.2001C10.0001 7.8561 8.6561 9.2001 7.0001 9.2001ZM0.600098 12.6001H3.8001V13.4001H0.600098V12.6001ZM10.2001 12.6001H13.4001V13.4001H10.2001V12.6001ZM8.8001 6.2001C8.8001 7.19421 7.99421 8.0001 7.0001 8.0001C6.00598 8.0001 5.2001 7.19421 5.2001 6.2001C5.2001 5.20598 6.00598 4.4001 7.0001 4.4001C7.99421 4.4001 8.8001 5.20598 8.8001 6.2001Z"}))}Ui.SafeIcon=Ld;var fo={};Object.defineProperty(fo,"__esModule",{value:!0});fo.default=".-cbwsdk-css-reset .-cbwsdk-try-extension{display:flex;margin-top:12px;height:202px;width:700px;border-radius:12px;padding:30px}.-cbwsdk-css-reset .-cbwsdk-try-extension.light{background:#fff}.-cbwsdk-css-reset .-cbwsdk-try-extension.dark{background:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-try-extension-column-half{flex:50%}.-cbwsdk-css-reset .-cbwsdk-try-extension-heading{font-style:normal;font-weight:500;font-size:25px;line-height:32px;margin:0;max-width:204px}.-cbwsdk-css-reset .-cbwsdk-try-extension-heading.light{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-try-extension-heading.dark{color:#fff}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta{appearance:none;border:none;background:none;color:#0052ff;cursor:pointer;padding:0;text-decoration:none;display:block;font-weight:600;font-size:16px;line-height:24px}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta.light{color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta.dark{color:#588af5}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta-wrapper{display:flex;align-items:center;margin-top:12px}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta-icon{display:block;margin-left:4px;height:14px}.-cbwsdk-css-reset .-cbwsdk-try-extension-list{display:flex;flex-direction:column;justify-content:center;align-items:center;margin:0;padding:0;list-style:none;height:100%}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item{display:flex;align-items:center;flex-flow:nowrap;margin-top:24px}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item:first-of-type{margin-top:0}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon-wrapper{display:block}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon{display:flex;height:32px;width:32px;border-radius:50%}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon svg{margin:auto;display:block}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon.light{background:#eef0f3}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon.dark{background:#1e2025}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-copy{display:block;font-weight:400;font-size:14px;line-height:20px;padding-left:12px}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-copy.light{color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-copy.dark{color:#8a919e}";var Yc=G&&G.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fi,"__esModule",{value:!0});Fi.TryExtensionContent=void 0;const ar=Yc(Dn),Ve=nt,_s=Li,Od=ji,Pd=Hi,Bd=Ui,$d=Yc(fo);function Dd({theme:e}){const[t,r]=(0,_s.useState)(!1),n=(0,_s.useCallback)(()=>{window.open("https://api.wallet.coinbase.com/rpc/v2/desktop/chrome","_blank")},[]),i=(0,_s.useCallback)(()=>{t?window.location.reload():(n(),r(!0))},[n,t]);return(0,Ve.h)("div",{class:(0,ar.default)("-cbwsdk-try-extension",e)},(0,Ve.h)("style",null,$d.default),(0,Ve.h)("div",{class:"-cbwsdk-try-extension-column-half"},(0,Ve.h)("h3",{class:(0,ar.default)("-cbwsdk-try-extension-heading",e)},"Or try the Coinbase Wallet browser extension"),(0,Ve.h)("div",{class:"-cbwsdk-try-extension-cta-wrapper"},(0,Ve.h)("button",{class:(0,ar.default)("-cbwsdk-try-extension-cta",e),onClick:i},t?"Refresh":"Install"),(0,Ve.h)("div",null,!t&&(0,Ve.h)(Od.ArrowLeftIcon,{class:"-cbwsdk-try-extension-cta-icon",fill:e==="light"?"#0052FF":"#588AF5"})))),(0,Ve.h)("div",{class:"-cbwsdk-try-extension-column-half"},(0,Ve.h)("ul",{class:"-cbwsdk-try-extension-list"},(0,Ve.h)("li",{class:"-cbwsdk-try-extension-list-item"},(0,Ve.h)("div",{class:"-cbwsdk-try-extension-list-item-icon-wrapper"},(0,Ve.h)("span",{class:(0,ar.default)("-cbwsdk-try-extension-list-item-icon",e)},(0,Ve.h)(Pd.LaptopIcon,{fill:e==="light"?"#0A0B0D":"#FFFFFF"}))),(0,Ve.h)("div",{class:(0,ar.default)("-cbwsdk-try-extension-list-item-copy",e)},"Connect with dapps with just one click on your desktop browser")),(0,Ve.h)("li",{class:"-cbwsdk-try-extension-list-item"},(0,Ve.h)("div",{class:"-cbwsdk-try-extension-list-item-icon-wrapper"},(0,Ve.h)("span",{class:(0,ar.default)("-cbwsdk-try-extension-list-item-icon",e)},(0,Ve.h)(Bd.SafeIcon,{fill:e==="light"?"#0A0B0D":"#FFFFFF"}))),(0,Ve.h)("div",{class:(0,ar.default)("-cbwsdk-try-extension-list-item-copy",e)},"Add an additional layer of security by using a supported Ledger hardware wallet")))))}Fi.TryExtensionContent=Dd;var po={};Object.defineProperty(po,"__esModule",{value:!0});po.default=".-cbwsdk-css-reset .-cbwsdk-connect-dialog{z-index:2147483647;position:fixed;top:0;left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop{z-index:2147483647;position:fixed;top:0;left:0;right:0;bottom:0;transition:opacity .25s}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop.light{background-color:rgba(0,0,0,.5)}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop.dark{background-color:rgba(50,53,61,.4)}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop-hidden{opacity:0}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-box{display:flex;position:relative;flex-direction:column;transform:scale(1);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-box-hidden{opacity:0;transform:scale(0.85)}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-container{display:block}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-container-hidden{display:none}";var Xc=G&&G.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ti,"__esModule",{value:!0});Ti.ConnectDialog=void 0;const Es=Xc(Dn),cr=nt,Ss=Li,Fd=Xr,jd=Fi,Hd=Xc(po),Ud=e=>{const{isOpen:t,darkMode:r}=e,[n,i]=(0,Ss.useState)(!t),[s,a]=(0,Ss.useState)(!t);(0,Ss.useEffect)(()=>{const h=[window.setTimeout(()=>{a(!t)},10)];return t?i(!1):h.push(window.setTimeout(()=>{i(!0)},360)),()=>{h.forEach(window.clearTimeout)}},[t]);const c=r?"dark":"light";return(0,cr.h)("div",{class:(0,Es.default)("-cbwsdk-connect-dialog-container",n&&"-cbwsdk-connect-dialog-container-hidden")},(0,cr.h)("style",null,Hd.default),(0,cr.h)("div",{class:(0,Es.default)("-cbwsdk-connect-dialog-backdrop",c,s&&"-cbwsdk-connect-dialog-backdrop-hidden")}),(0,cr.h)("div",{class:"-cbwsdk-connect-dialog"},(0,cr.h)("div",{class:(0,Es.default)("-cbwsdk-connect-dialog-box",s&&"-cbwsdk-connect-dialog-box-hidden")},e.connectDisabled?null:(0,cr.h)(Fd.ConnectContent,{theme:c,version:e.version,sessionId:e.sessionId,sessionSecret:e.sessionSecret,linkAPIUrl:e.linkAPIUrl,isConnected:e.isConnected,isParentConnection:e.isParentConnection,chainId:e.chainId,onCancel:e.onCancel}),(0,cr.h)(jd.TryExtensionContent,{theme:c}))))};Ti.ConnectDialog=Ud;Object.defineProperty(Ni,"__esModule",{value:!0});Ni.LinkFlow=void 0;const Rs=nt,Wd=Ti;class Vd{constructor(t){this.connected=!1,this.chainId=1,this.isOpen=!1,this.onCancel=null,this.root=null,this.connectDisabled=!1,this.darkMode=t.darkMode,this.version=t.version,this.sessionId=t.sessionId,this.sessionSecret=t.sessionSecret,this.linkAPIUrl=t.linkAPIUrl,this.isParentConnection=t.isParentConnection}attach(t){this.root=document.createElement("div"),this.root.className="-cbwsdk-link-flow-root",t.appendChild(this.root),this.render()}setConnected(t){this.connected!==t&&(this.connected=t,this.render())}setChainId(t){this.chainId!==t&&(this.chainId=t,this.render())}detach(){var t;this.root&&((0,Rs.render)(null,this.root),(t=this.root.parentElement)===null||t===void 0||t.removeChild(this.root))}setConnectDisabled(t){this.connectDisabled=t}open(t){this.isOpen=!0,this.onCancel=t.onCancel,this.render()}close(){this.isOpen=!1,this.onCancel=null,this.render()}render(){this.root&&(0,Rs.render)((0,Rs.h)(Wd.ConnectDialog,{darkMode:this.darkMode,version:this.version,sessionId:this.sessionId,sessionSecret:this.sessionSecret,linkAPIUrl:this.linkAPIUrl,isOpen:this.isOpen,isConnected:this.connected,isParentConnection:this.isParentConnection,chainId:this.chainId,onCancel:this.onCancel,connectDisabled:this.connectDisabled}),this.root)}}Ni.LinkFlow=Vd;var go={},mo={};Object.defineProperty(mo,"__esModule",{value:!0});mo.default=".-cbwsdk-css-reset .-gear-container{margin-left:16px !important;margin-right:9px !important;display:flex;align-items:center;justify-content:center;width:24px;height:24px;transition:opacity .25s}.-cbwsdk-css-reset .-gear-container *{user-select:none}.-cbwsdk-css-reset .-gear-container svg{opacity:0;position:absolute}.-cbwsdk-css-reset .-gear-icon{height:12px;width:12px;z-index:10000}.-cbwsdk-css-reset .-cbwsdk-snackbar{align-items:flex-end;display:flex;flex-direction:column;position:fixed;right:0;top:0;z-index:2147483647}.-cbwsdk-css-reset .-cbwsdk-snackbar *{user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance{display:flex;flex-direction:column;margin:8px 16px 0 16px;overflow:visible;text-align:left;transform:translateX(0);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header:hover .-gear-container svg{opacity:1}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header{display:flex;align-items:center;background:#fff;overflow:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-cblogo{margin:8px 8px 8px 8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-message{color:#000;font-size:13px;line-height:1.5;user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu{background:#fff;transition:opacity .25s ease-in-out,transform .25s linear,visibility 0s;visibility:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;opacity:0;flex-direction:column;padding-left:8px;padding-right:8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:last-child{margin-bottom:8px !important}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover{background:#f5f7f8;border-radius:6px;transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover span{color:#050f19;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover svg path{fill:#000;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item{visibility:inherit;height:35px;margin-top:8px;margin-bottom:0;display:flex;flex-direction:row;align-items:center;padding:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item *{visibility:inherit;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover{background:rgba(223,95,103,.2);transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover svg path{fill:#df5f67;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover span{color:#df5f67;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-info{color:#aaa;font-size:13px;margin:0 8px 0 32px;position:absolute}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-hidden{opacity:0;text-align:left;transform:translateX(25%);transition:opacity .5s linear}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-expanded .-cbwsdk-snackbar-instance-menu{opacity:1;display:flex;transform:translateY(8px);visibility:visible}";(function(e){var t=G&&G.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(e,"__esModule",{value:!0}),e.SnackbarInstance=e.SnackbarContainer=e.Snackbar=void 0;const r=t(Dn),n=nt,i=Li,s=t(mo),a="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEuNDkyIDEwLjQxOWE4LjkzIDguOTMgMCAwMTguOTMtOC45M2gxMS4xNjNhOC45MyA4LjkzIDAgMDE4LjkzIDguOTN2MTEuMTYzYTguOTMgOC45MyAwIDAxLTguOTMgOC45M0gxMC40MjJhOC45MyA4LjkzIDAgMDEtOC45My04LjkzVjEwLjQxOXoiIGZpbGw9IiMxNjUyRjAiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEwLjQxOSAwSDIxLjU4QzI3LjMzNSAwIDMyIDQuNjY1IDMyIDEwLjQxOVYyMS41OEMzMiAyNy4zMzUgMjcuMzM1IDMyIDIxLjU4MSAzMkgxMC40MkM0LjY2NSAzMiAwIDI3LjMzNSAwIDIxLjU4MVYxMC40MkMwIDQuNjY1IDQuNjY1IDAgMTAuNDE5IDB6bTAgMS40ODhhOC45MyA4LjkzIDAgMDAtOC45MyA4LjkzdjExLjE2M2E4LjkzIDguOTMgMCAwMDguOTMgOC45M0gyMS41OGE4LjkzIDguOTMgMCAwMDguOTMtOC45M1YxMC40MmE4LjkzIDguOTMgMCAwMC04LjkzLTguOTNIMTAuNDJ6IiBmaWxsPSIjZmZmIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNS45OTggMjYuMDQ5Yy01LjU0OSAwLTEwLjA0Ny00LjQ5OC0xMC4wNDctMTAuMDQ3IDAtNS41NDggNC40OTgtMTAuMDQ2IDEwLjA0Ny0xMC4wNDYgNS41NDggMCAxMC4wNDYgNC40OTggMTAuMDQ2IDEwLjA0NiAwIDUuNTQ5LTQuNDk4IDEwLjA0Ny0xMC4wNDYgMTAuMDQ3eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0xMi43NjIgMTQuMjU0YzAtLjgyMi42NjctMS40ODkgMS40ODktMS40ODloMy40OTdjLjgyMiAwIDEuNDg4LjY2NiAxLjQ4OCAxLjQ4OXYzLjQ5N2MwIC44MjItLjY2NiAxLjQ4OC0xLjQ4OCAxLjQ4OGgtMy40OTdhMS40ODggMS40ODggMCAwMS0xLjQ4OS0xLjQ4OHYtMy40OTh6IiBmaWxsPSIjMTY1MkYwIi8+PC9zdmc+",c="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyIDYuNzV2LTEuNWwtMS43Mi0uNTdjLS4wOC0uMjctLjE5LS41Mi0uMzItLjc3bC44MS0xLjYyLTEuMDYtMS4wNi0xLjYyLjgxYy0uMjQtLjEzLS41LS4yNC0uNzctLjMyTDYuNzUgMGgtMS41bC0uNTcgMS43MmMtLjI3LjA4LS41My4xOS0uNzcuMzJsLTEuNjItLjgxLTEuMDYgMS4wNi44MSAxLjYyYy0uMTMuMjQtLjI0LjUtLjMyLjc3TDAgNS4yNXYxLjVsMS43Mi41N2MuMDguMjcuMTkuNTMuMzIuNzdsLS44MSAxLjYyIDEuMDYgMS4wNiAxLjYyLS44MWMuMjQuMTMuNS4yMy43Ny4zMkw1LjI1IDEyaDEuNWwuNTctMS43MmMuMjctLjA4LjUyLS4xOS43Ny0uMzJsMS42Mi44MSAxLjA2LTEuMDYtLjgxLTEuNjJjLjEzLS4yNC4yMy0uNS4zMi0uNzdMMTIgNi43NXpNNiA4LjVhMi41IDIuNSAwIDAxMC01IDIuNSAyLjUgMCAwMTAgNXoiIGZpbGw9IiMwNTBGMTkiLz48L3N2Zz4=";class h{constructor(y){this.items=new Map,this.nextItemKey=0,this.root=null,this.darkMode=y.darkMode}attach(y){this.root=document.createElement("div"),this.root.className="-cbwsdk-snackbar-root",y.appendChild(this.root),this.render()}presentItem(y){const k=this.nextItemKey++;return this.items.set(k,y),this.render(),()=>{this.items.delete(k),this.render()}}clear(){this.items.clear(),this.render()}render(){this.root&&(0,n.render)((0,n.h)("div",null,(0,n.h)(e.SnackbarContainer,{darkMode:this.darkMode},Array.from(this.items.entries()).map(([y,k])=>(0,n.h)(e.SnackbarInstance,Object.assign({},k,{key:y}))))),this.root)}}e.Snackbar=h;const d=w=>(0,n.h)("div",{class:(0,r.default)("-cbwsdk-snackbar-container")},(0,n.h)("style",null,s.default),(0,n.h)("div",{class:"-cbwsdk-snackbar"},w.children));e.SnackbarContainer=d;const p=({autoExpand:w,message:y,menuItems:k})=>{const[N,P]=(0,i.useState)(!0),[L,M]=(0,i.useState)(w??!1);(0,i.useEffect)(()=>{const T=[window.setTimeout(()=>{P(!1)},1),window.setTimeout(()=>{M(!0)},1e4)];return()=>{T.forEach(window.clearTimeout)}});const x=()=>{M(!L)};return(0,n.h)("div",{class:(0,r.default)("-cbwsdk-snackbar-instance",N&&"-cbwsdk-snackbar-instance-hidden",L&&"-cbwsdk-snackbar-instance-expanded")},(0,n.h)("div",{class:"-cbwsdk-snackbar-instance-header",onClick:x},(0,n.h)("img",{src:a,class:"-cbwsdk-snackbar-instance-header-cblogo"})," ",(0,n.h)("div",{class:"-cbwsdk-snackbar-instance-header-message"},y),(0,n.h)("div",{class:"-gear-container"},!L&&(0,n.h)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,n.h)("circle",{cx:"12",cy:"12",r:"12",fill:"#F5F7F8"})),(0,n.h)("img",{src:c,class:"-gear-icon",title:"Expand"}))),k&&k.length>0&&(0,n.h)("div",{class:"-cbwsdk-snackbar-instance-menu"},k.map((T,$)=>(0,n.h)("div",{class:(0,r.default)("-cbwsdk-snackbar-instance-menu-item",T.isRed&&"-cbwsdk-snackbar-instance-menu-item-is-red"),onClick:T.onClick,key:$},(0,n.h)("svg",{width:T.svgWidth,height:T.svgHeight,viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,n.h)("path",{"fill-rule":T.defaultFillRule,"clip-rule":T.defaultClipRule,d:T.path,fill:"#AAAAAA"})),(0,n.h)("span",{class:(0,r.default)("-cbwsdk-snackbar-instance-menu-item-info",T.isRed&&"-cbwsdk-snackbar-instance-menu-item-info-is-red")},T.info)))))};e.SnackbarInstance=p})(go);Object.defineProperty(Bn,"__esModule",{value:!0});Bn.WalletLinkRelayUI=void 0;const qd=$n,zd=Ni,Gd=go;class Jd{constructor(t){this.standalone=null,this.attached=!1,this.snackbar=new Gd.Snackbar({darkMode:t.darkMode}),this.linkFlow=new zd.LinkFlow({darkMode:t.darkMode,version:t.version,sessionId:t.session.id,sessionSecret:t.session.secret,linkAPIUrl:t.linkAPIUrl,isParentConnection:!1})}attach(){if(this.attached)throw new Error("Coinbase Wallet SDK UI is already attached");const t=document.documentElement,r=document.createElement("div");r.className="-cbwsdk-css-reset",t.appendChild(r),this.linkFlow.attach(r),this.snackbar.attach(r),this.attached=!0,(0,qd.injectCssReset)()}setConnected(t){this.linkFlow.setConnected(t)}setChainId(t){this.linkFlow.setChainId(t)}setConnectDisabled(t){this.linkFlow.setConnectDisabled(t)}addEthereumChain(){}watchAsset(){}switchEthereumChain(){}requestEthereumAccounts(t){this.linkFlow.open({onCancel:t.onCancel})}hideRequestEthereumAccounts(){this.linkFlow.close()}signEthereumMessage(){}signEthereumTransaction(){}submitEthereumTransaction(){}ethereumAddressFromSignedMessage(){}showConnecting(t){let r;return t.isUnlinkedErrorState?r={autoExpand:!0,message:"Connection lost",menuItems:[{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:t.onResetConnection}]}:r={message:"Confirm on phone",menuItems:[{isRed:!0,info:"Cancel transaction",svgWidth:"11",svgHeight:"11",path:"M10.3711 1.52346L9.21775 0.370117L5.37109 4.21022L1.52444 0.370117L0.371094 1.52346L4.2112 5.37012L0.371094 9.21677L1.52444 10.3701L5.37109 6.53001L9.21775 10.3701L10.3711 9.21677L6.53099 5.37012L10.3711 1.52346Z",defaultFillRule:"inherit",defaultClipRule:"inherit",onClick:t.onCancel},{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:t.onResetConnection}]},this.snackbar.presentItem(r)}reloadUI(){document.location.reload()}inlineAccountsResponse(){return!1}inlineAddEthereumChain(){return!1}inlineWatchAsset(){return!1}inlineSwitchEthereumChain(){return!1}setStandalone(t){this.standalone=t}isStandalone(){var t;return(t=this.standalone)!==null&&t!==void 0?t:!1}}Bn.WalletLinkRelayUI=Jd;Object.defineProperty(Nn,"__esModule",{value:!0});Nn.WalletLinkRelay=void 0;const jr=Cn,Zd=qe,je=q,lr=an,ua=dt,Ht=cn,Kd=Ii,ur=sn,Qd=Bn;class Pt extends ua.RelayAbstract{constructor(t){var r;super(),this.accountsCallback=null,this.chainCallbackParams={chainId:"",jsonRpcUrl:""},this.chainCallback=null,this.dappDefaultChain=1,this.appName="",this.appLogoUrl=null,this.linkedUpdated=a=>{var c;this.isLinked=a;const h=this.storage.getItem(ua.LOCAL_STORAGE_ADDRESSES_KEY);if(a&&(this.session.linked=a),this.isUnlinkedErrorState=!1,h){const d=h.split(" "),p=this.storage.getItem("IsStandaloneSigning")==="true";if(d[0]!==""&&!a&&this.session.linked&&!p){this.isUnlinkedErrorState=!0;const w=this.getSessionIdHash();(c=this.diagnostic)===null||c===void 0||c.log(lr.EVENTS.UNLINKED_ERROR_STATE,{sessionIdHash:w})}}},this.metadataUpdated=(a,c)=>{this.storage.setItem(a,c)},this.chainUpdated=(a,c)=>{this.chainCallbackParams.chainId===a&&this.chainCallbackParams.jsonRpcUrl===c||(this.chainCallbackParams={chainId:a,jsonRpcUrl:c},this.chainCallback&&this.chainCallback(a,c))},this.accountUpdated=a=>{this.accountsCallback&&this.accountsCallback([a]),Pt.accountRequestCallbackIds.size>0&&(Array.from(Pt.accountRequestCallbackIds.values()).forEach(c=>{const h={type:"WEB3_RESPONSE",id:c,response:{method:"requestEthereumAccounts",result:[a]}};this.invokeCallback(Object.assign(Object.assign({},h),{id:c}))}),Pt.accountRequestCallbackIds.clear())},this.connectedUpdated=a=>{this.ui.setConnected(a)},this.resetAndReload=this.resetAndReload.bind(this),this.linkAPIUrl=t.linkAPIUrl,this.storage=t.storage,this.options=t;const{session:n,ui:i,connection:s}=this.subscribe();this._session=n,this.connection=s,this.relayEventManager=t.relayEventManager,this.diagnostic=t.diagnosticLogger,this._reloadOnDisconnect=(r=t.reloadOnDisconnect)!==null&&r!==void 0?r:!0,this.ui=i}subscribe(){const t=Ht.Session.load(this.storage)||new Ht.Session(this.storage).save(),{linkAPIUrl:r,diagnostic:n}=this,i=new Kd.WalletLinkConnection({session:t,linkAPIUrl:r,diagnostic:n,listener:this}),{version:s,darkMode:a}=this.options,c=this.options.uiConstructor({linkAPIUrl:r,version:s,darkMode:a,session:t});return i.connect(),{session:t,ui:c,connection:i}}attachUI(){this.ui.attach()}resetAndReload(){Promise.race([this.connection.setSessionMetadata("__destroyed","1"),new Promise(t=>setTimeout(()=>t(null),1e3))]).then(()=>{var t,r;const n=this.ui.isStandalone();(t=this.diagnostic)===null||t===void 0||t.log(lr.EVENTS.SESSION_STATE_CHANGE,{method:"relay::resetAndReload",sessionMetadataChange:"__destroyed, 1",sessionIdHash:this.getSessionIdHash()}),this.connection.destroy();const i=Ht.Session.load(this.storage);if((i==null?void 0:i.id)===this._session.id?this.storage.clear():i&&((r=this.diagnostic)===null||r===void 0||r.log(lr.EVENTS.SKIPPED_CLEARING_SESSION,{sessionIdHash:this.getSessionIdHash(),storedSessionIdHash:Ht.Session.hash(i.id)})),this._reloadOnDisconnect){this.ui.reloadUI();return}this.accountsCallback&&this.accountsCallback([],!0);const{session:s,ui:a,connection:c}=this.subscribe();this._session=s,this.connection=c,this.ui=a,n&&this.ui.setStandalone&&this.ui.setStandalone(!0),this.options.headlessMode||this.attachUI()}).catch(t=>{var r;(r=this.diagnostic)===null||r===void 0||r.log(lr.EVENTS.FAILURE,{method:"relay::resetAndReload",message:`failed to reset and reload with ${t}`,sessionIdHash:this.getSessionIdHash()})})}setAppInfo(t,r){this.appName=t,this.appLogoUrl=r}getStorageItem(t){return this.storage.getItem(t)}get session(){return this._session}setStorageItem(t,r){this.storage.setItem(t,r)}signEthereumMessage(t,r,n,i){return this.sendRequest({method:"signEthereumMessage",params:{message:(0,je.hexStringFromBuffer)(t,!0),address:r,addPrefix:n,typedDataJson:i||null}})}ethereumAddressFromSignedMessage(t,r,n){return this.sendRequest({method:"ethereumAddressFromSignedMessage",params:{message:(0,je.hexStringFromBuffer)(t,!0),signature:(0,je.hexStringFromBuffer)(r,!0),addPrefix:n}})}signEthereumTransaction(t){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:t.fromAddress,toAddress:t.toAddress,weiValue:(0,je.bigIntStringFromBN)(t.weiValue),data:(0,je.hexStringFromBuffer)(t.data,!0),nonce:t.nonce,gasPriceInWei:t.gasPriceInWei?(0,je.bigIntStringFromBN)(t.gasPriceInWei):null,maxFeePerGas:t.gasPriceInWei?(0,je.bigIntStringFromBN)(t.gasPriceInWei):null,maxPriorityFeePerGas:t.gasPriceInWei?(0,je.bigIntStringFromBN)(t.gasPriceInWei):null,gasLimit:t.gasLimit?(0,je.bigIntStringFromBN)(t.gasLimit):null,chainId:t.chainId,shouldSubmit:!1}})}signAndSubmitEthereumTransaction(t){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:t.fromAddress,toAddress:t.toAddress,weiValue:(0,je.bigIntStringFromBN)(t.weiValue),data:(0,je.hexStringFromBuffer)(t.data,!0),nonce:t.nonce,gasPriceInWei:t.gasPriceInWei?(0,je.bigIntStringFromBN)(t.gasPriceInWei):null,maxFeePerGas:t.maxFeePerGas?(0,je.bigIntStringFromBN)(t.maxFeePerGas):null,maxPriorityFeePerGas:t.maxPriorityFeePerGas?(0,je.bigIntStringFromBN)(t.maxPriorityFeePerGas):null,gasLimit:t.gasLimit?(0,je.bigIntStringFromBN)(t.gasLimit):null,chainId:t.chainId,shouldSubmit:!0}})}submitEthereumTransaction(t,r){return this.sendRequest({method:"submitEthereumTransaction",params:{signedTransaction:(0,je.hexStringFromBuffer)(t,!0),chainId:r}})}scanQRCode(t){return this.sendRequest({method:"scanQRCode",params:{regExp:t}})}getQRCodeUrl(){return(0,je.createQrUrl)(this._session.id,this._session.secret,this.linkAPIUrl,!1,this.options.version,this.dappDefaultChain)}genericRequest(t,r){return this.sendRequest({method:"generic",params:{action:r,data:t}})}sendGenericMessage(t){return this.sendRequest(t)}sendRequest(t){let r=null;const n=(0,je.randomBytesHex)(8),i=a=>{this.publishWeb3RequestCanceledEvent(n),this.handleErrorResponse(n,t.method,a),r==null||r()};return{promise:new Promise((a,c)=>{this.ui.isStandalone()||(r=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:i,onResetConnection:this.resetAndReload})),this.relayEventManager.callbacks.set(n,h=>{if(r==null||r(),(0,ur.isErrorResponse)(h))return c(new Error(h.errorMessage));a(h)}),this.ui.isStandalone()?this.sendRequestStandalone(n,t):this.publishWeb3RequestEvent(n,t)}),cancel:i}}setConnectDisabled(t){this.ui.setConnectDisabled(t)}setAccountsCallback(t){this.accountsCallback=t}setChainCallback(t){this.chainCallback=t}setDappDefaultChainCallback(t){this.dappDefaultChain=t,this.ui instanceof Qd.WalletLinkRelayUI&&this.ui.setChainId(t)}publishWeb3RequestEvent(t,r){var n;const i={type:"WEB3_REQUEST",id:t,request:r},s=Ht.Session.load(this.storage);(n=this.diagnostic)===null||n===void 0||n.log(lr.EVENTS.WEB3_REQUEST,{eventId:i.id,method:`relay::${r.method}`,sessionIdHash:this.getSessionIdHash(),storedSessionIdHash:s?Ht.Session.hash(s.id):"",isSessionMismatched:((s==null?void 0:s.id)!==this._session.id).toString()}),this.publishEvent("Web3Request",i,!0).then(a=>{var c;(c=this.diagnostic)===null||c===void 0||c.log(lr.EVENTS.WEB3_REQUEST_PUBLISHED,{eventId:i.id,method:`relay::${r.method}`,sessionIdHash:this.getSessionIdHash(),storedSessionIdHash:s?Ht.Session.hash(s.id):"",isSessionMismatched:((s==null?void 0:s.id)!==this._session.id).toString()})}).catch(a=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:i.id,response:{method:r.method,errorMessage:a.message}})})}publishWeb3RequestCanceledEvent(t){const r={type:"WEB3_REQUEST_CANCELED",id:t};this.publishEvent("Web3RequestCanceled",r,!1).then()}publishEvent(t,r,n){return this.connection.publishEvent(t,r,n)}handleWeb3ResponseMessage(t){var r;const{response:n}=t;if((r=this.diagnostic)===null||r===void 0||r.log(lr.EVENTS.WEB3_RESPONSE,{eventId:t.id,method:`relay::${n.method}`,sessionIdHash:this.getSessionIdHash()}),n.method==="requestEthereumAccounts"){Pt.accountRequestCallbackIds.forEach(i=>this.invokeCallback(Object.assign(Object.assign({},t),{id:i}))),Pt.accountRequestCallbackIds.clear();return}this.invokeCallback(t)}handleErrorResponse(t,r,n,i){var s;const a=(s=n==null?void 0:n.message)!==null&&s!==void 0?s:(0,jr.getMessageFromCode)(i);this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:t,response:{method:r,errorMessage:a,errorCode:i}})}invokeCallback(t){const r=this.relayEventManager.callbacks.get(t.id);r&&(r(t.response),this.relayEventManager.callbacks.delete(t.id))}requestEthereumAccounts(){const t={method:"requestEthereumAccounts",params:{appName:this.appName,appLogoUrl:this.appLogoUrl||null}},r=(0,je.randomBytesHex)(8),n=s=>{this.publishWeb3RequestCanceledEvent(r),this.handleErrorResponse(r,t.method,s)};return{promise:new Promise((s,a)=>{if(this.relayEventManager.callbacks.set(r,c=>{if(this.ui.hideRequestEthereumAccounts(),(0,ur.isErrorResponse)(c))return a(new Error(c.errorMessage));s(c)}),this.ui.inlineAccountsResponse()){const c=h=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:r,response:{method:"requestEthereumAccounts",result:h}})};this.ui.requestEthereumAccounts({onCancel:n,onAccounts:c})}else{const c=jr.standardErrors.provider.userRejectedRequest("User denied account authorization");this.ui.requestEthereumAccounts({onCancel:()=>n(c)})}Pt.accountRequestCallbackIds.add(r),!this.ui.inlineAccountsResponse()&&!this.ui.isStandalone()&&this.publishWeb3RequestEvent(r,t)}),cancel:n}}selectProvider(t){const r={method:"selectProvider",params:{providerOptions:t}},n=(0,je.randomBytesHex)(8),i=a=>{this.publishWeb3RequestCanceledEvent(n),this.handleErrorResponse(n,r.method,a)},s=new Promise((a,c)=>{this.relayEventManager.callbacks.set(n,p=>{if((0,ur.isErrorResponse)(p))return c(new Error(p.errorMessage));a(p)});const h=p=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:n,response:{method:"selectProvider",result:Zd.ProviderType.Unselected}})},d=p=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:n,response:{method:"selectProvider",result:p}})};this.ui.selectProvider&&this.ui.selectProvider({onApprove:d,onCancel:h,providerOptions:t})});return{cancel:i,promise:s}}watchAsset(t,r,n,i,s,a){const c={method:"watchAsset",params:{type:t,options:{address:r,symbol:n,decimals:i,image:s},chainId:a}};let h=null;const d=(0,je.randomBytesHex)(8),p=y=>{this.publishWeb3RequestCanceledEvent(d),this.handleErrorResponse(d,c.method,y),h==null||h()};this.ui.inlineWatchAsset()||(h=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:p,onResetConnection:this.resetAndReload}));const w=new Promise((y,k)=>{this.relayEventManager.callbacks.set(d,L=>{if(h==null||h(),(0,ur.isErrorResponse)(L))return k(new Error(L.errorMessage));y(L)});const N=L=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:d,response:{method:"watchAsset",result:!1}})},P=()=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:d,response:{method:"watchAsset",result:!0}})};this.ui.inlineWatchAsset()&&this.ui.watchAsset({onApprove:P,onCancel:N,type:t,address:r,symbol:n,decimals:i,image:s,chainId:a}),!this.ui.inlineWatchAsset()&&!this.ui.isStandalone()&&this.publishWeb3RequestEvent(d,c)});return{cancel:p,promise:w}}addEthereumChain(t,r,n,i,s,a){const c={method:"addEthereumChain",params:{chainId:t,rpcUrls:r,blockExplorerUrls:i,chainName:s,iconUrls:n,nativeCurrency:a}};let h=null;const d=(0,je.randomBytesHex)(8),p=y=>{this.publishWeb3RequestCanceledEvent(d),this.handleErrorResponse(d,c.method,y),h==null||h()};return this.ui.inlineAddEthereumChain(t)||(h=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:p,onResetConnection:this.resetAndReload})),{promise:new Promise((y,k)=>{this.relayEventManager.callbacks.set(d,L=>{if(h==null||h(),(0,ur.isErrorResponse)(L))return k(new Error(L.errorMessage));y(L)});const N=L=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:d,response:{method:"addEthereumChain",result:{isApproved:!1,rpcUrl:""}}})},P=L=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:d,response:{method:"addEthereumChain",result:{isApproved:!0,rpcUrl:L}}})};this.ui.inlineAddEthereumChain(t)&&this.ui.addEthereumChain({onCancel:N,onApprove:P,chainId:c.params.chainId,rpcUrls:c.params.rpcUrls,blockExplorerUrls:c.params.blockExplorerUrls,chainName:c.params.chainName,iconUrls:c.params.iconUrls,nativeCurrency:c.params.nativeCurrency}),!this.ui.inlineAddEthereumChain(t)&&!this.ui.isStandalone()&&this.publishWeb3RequestEvent(d,c)}),cancel:p}}switchEthereumChain(t,r){const n={method:"switchEthereumChain",params:Object.assign({chainId:t},{address:r})},i=(0,je.randomBytesHex)(8),s=c=>{this.publishWeb3RequestCanceledEvent(i),this.handleErrorResponse(i,n.method,c)};return{promise:new Promise((c,h)=>{this.relayEventManager.callbacks.set(i,w=>{if((0,ur.isErrorResponse)(w)&&w.errorCode)return h(jr.standardErrors.provider.custom({code:w.errorCode,message:"Unrecognized chain ID. Try adding the chain using addEthereumChain first."}));if((0,ur.isErrorResponse)(w))return h(new Error(w.errorMessage));c(w)});const d=w=>{var y;if(w){const k=(y=(0,jr.getErrorCode)(w))!==null&&y!==void 0?y:jr.standardErrorCodes.provider.unsupportedChain;this.handleErrorResponse(i,"switchEthereumChain",w instanceof Error?w:jr.standardErrors.provider.unsupportedChain(t),k)}else this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:i,response:{method:"switchEthereumChain",result:{isApproved:!1,rpcUrl:""}}})},p=w=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:i,response:{method:"switchEthereumChain",result:{isApproved:!0,rpcUrl:w}}})};this.ui.switchEthereumChain({onCancel:d,onApprove:p,chainId:n.params.chainId,address:n.params.address}),!this.ui.inlineSwitchEthereumChain()&&!this.ui.isStandalone()&&this.publishWeb3RequestEvent(i,n)}),cancel:s}}inlineAddEthereumChain(t){return this.ui.inlineAddEthereumChain(t)}getSessionIdHash(){return Ht.Session.hash(this._session.id)}sendRequestStandalone(t,r){const n=s=>{this.handleErrorResponse(t,r.method,s)},i=s=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:t,response:s})};switch(r.method){case"signEthereumMessage":this.ui.signEthereumMessage({request:r,onSuccess:i,onCancel:n});break;case"signEthereumTransaction":this.ui.signEthereumTransaction({request:r,onSuccess:i,onCancel:n});break;case"submitEthereumTransaction":this.ui.submitEthereumTransaction({request:r,onSuccess:i,onCancel:n});break;case"ethereumAddressFromSignedMessage":this.ui.ethereumAddressFromSignedMessage({request:r,onSuccess:i});break;default:n();break}}}Nn.WalletLinkRelay=Pt;Pt.accountRequestCallbackIds=new Set;var Fn={},Wi={},el={};(function(e){var t=G&&G.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var c=Object.getOwnPropertyDescriptor(i,s);(!c||("get"in c?!i.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,c)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),r=G&&G.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&t(i,n,s)};Object.defineProperty(e,"__esModule",{value:!0}),r(go,e)})(el);var bo={};Object.defineProperty(bo,"__esModule",{value:!0});bo.default=".-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop{position:fixed;top:0;left:0;right:0;bottom:0;transition:opacity .25s;background-color:rgba(10,11,13,.5)}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop-hidden{opacity:0}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box{display:block;position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);padding:20px;border-radius:8px;background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box p{display:block;font-weight:400;font-size:14px;line-height:20px;padding-bottom:12px;color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box button{appearance:none;border:none;background:none;color:#0052ff;padding:0;text-decoration:none;display:block;font-weight:600;font-size:16px;line-height:24px}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark{background-color:#0a0b0d;color:#fff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark button{color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light{background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light button{color:#0052ff}";var tl=G&&G.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Wi,"__esModule",{value:!0});Wi.RedirectDialog=void 0;const Yd=tl(Dn),kt=nt,Xd=$n,ef=el,tf=tl(bo);class rf{constructor(){this.root=null}attach(){const t=document.documentElement;this.root=document.createElement("div"),this.root.className="-cbwsdk-css-reset",t.appendChild(this.root),(0,Xd.injectCssReset)()}present(t){this.render(t)}clear(){this.render(null)}render(t){this.root&&((0,kt.render)(null,this.root),t&&(0,kt.render)((0,kt.h)(nf,Object.assign({},t,{onDismiss:()=>{this.clear()}})),this.root))}}Wi.RedirectDialog=rf;const nf=({title:e,buttonText:t,darkMode:r,onButtonClick:n,onDismiss:i})=>{const s=r?"dark":"light";return(0,kt.h)(ef.SnackbarContainer,{darkMode:r},(0,kt.h)("div",{class:"-cbwsdk-redirect-dialog"},(0,kt.h)("style",null,tf.default),(0,kt.h)("div",{class:"-cbwsdk-redirect-dialog-backdrop",onClick:i}),(0,kt.h)("div",{class:(0,Yd.default)("-cbwsdk-redirect-dialog-box",s)},(0,kt.h)("p",null,e),(0,kt.h)("button",{onClick:n},t))))};Object.defineProperty(Fn,"__esModule",{value:!0});Fn.MobileRelayUI=void 0;const sf=Wi;class of{constructor(t){this.attached=!1,this.darkMode=!1,this.redirectDialog=new sf.RedirectDialog,this.darkMode=t.darkMode}attach(){if(this.attached)throw new Error("Coinbase Wallet SDK UI is already attached");this.redirectDialog.attach(),this.attached=!0}setConnected(t){}redirectToCoinbaseWallet(t){const r=new URL("https://go.cb-w.com/walletlink");r.searchParams.append("redirect_url",window.location.href),t&&r.searchParams.append("wl_url",t);const n=document.createElement("a");n.target="cbw-opener",n.href=r.href,n.rel="noreferrer noopener",n.click()}openCoinbaseWalletDeeplink(t){this.redirectDialog.present({title:"Redirecting to Coinbase Wallet...",buttonText:"Open",darkMode:this.darkMode,onButtonClick:()=>{this.redirectToCoinbaseWallet(t)}}),setTimeout(()=>{this.redirectToCoinbaseWallet(t)},99)}showConnecting(t){return()=>{this.redirectDialog.clear()}}hideRequestEthereumAccounts(){this.redirectDialog.clear()}requestEthereumAccounts(){}addEthereumChain(){}watchAsset(){}selectProvider(){}switchEthereumChain(){}signEthereumMessage(){}signEthereumTransaction(){}submitEthereumTransaction(){}ethereumAddressFromSignedMessage(){}reloadUI(){}setStandalone(){}setConnectDisabled(){}inlineAccountsResponse(){return!1}inlineAddEthereumChain(){return!1}inlineWatchAsset(){return!1}inlineSwitchEthereumChain(){return!1}isStandalone(){return!1}}Fn.MobileRelayUI=of;Object.defineProperty(An,"__esModule",{value:!0});An.MobileRelay=void 0;const af=q,cf=Nn,lf=Fn;class uf extends cf.WalletLinkRelay{constructor(t){var r;super(t),this._enableMobileWalletLink=(r=t.enableMobileWalletLink)!==null&&r!==void 0?r:!1}requestEthereumAccounts(){return this._enableMobileWalletLink?super.requestEthereumAccounts():{promise:new Promise(()=>{const t=(0,af.getLocation)();t.href=`https://go.cb-w.com/dapp?cb_url=${encodeURIComponent(t.href)}`}),cancel:()=>{}}}publishWeb3RequestEvent(t,r){if(super.publishWeb3RequestEvent(t,r),!(this._enableMobileWalletLink&&this.ui instanceof lf.MobileRelayUI))return;let n=!1;switch(r.method){case"requestEthereumAccounts":case"connectAndSignIn":n=!0,this.ui.openCoinbaseWalletDeeplink(this.getQRCodeUrl());break;case"switchEthereumChain":return;default:n=!0,this.ui.openCoinbaseWalletDeeplink();break}n&&window.addEventListener("blur",()=>{window.addEventListener("focus",()=>{this.connection.checkUnseenEvents()},{once:!0})},{once:!0})}handleWeb3ResponseMessage(t){super.handleWeb3ResponseMessage(t)}connectAndSignIn(t){if(!this._enableMobileWalletLink)throw new Error("connectAndSignIn is supported only when enableMobileWalletLink is on");return this.sendRequest({method:"connectAndSignIn",params:{appName:this.appName,appLogoUrl:this.appLogoUrl,domain:window.location.hostname,aud:window.location.href,version:"1",type:"eip4361",nonce:t.nonce,iat:new Date().toISOString(),chainId:`eip155:${this.dappDefaultChain}`,statement:t.statement,resources:t.resources}})}}An.MobileRelay=uf;var Qs={exports:{}},rl=mi.EventEmitter,Ms,ha;function hf(){if(ha)return Ms;ha=1;function e(N,P){var L=Object.keys(N);if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(N);P&&(M=M.filter(function(x){return Object.getOwnPropertyDescriptor(N,x).enumerable})),L.push.apply(L,M)}return L}function t(N){for(var P=1;P<arguments.length;P++){var L=arguments[P]!=null?arguments[P]:{};P%2?e(Object(L),!0).forEach(function(M){r(N,M,L[M])}):Object.getOwnPropertyDescriptors?Object.defineProperties(N,Object.getOwnPropertyDescriptors(L)):e(Object(L)).forEach(function(M){Object.defineProperty(N,M,Object.getOwnPropertyDescriptor(L,M))})}return N}function r(N,P,L){return P=a(P),P in N?Object.defineProperty(N,P,{value:L,enumerable:!0,configurable:!0,writable:!0}):N[P]=L,N}function n(N,P){if(!(N instanceof P))throw new TypeError("Cannot call a class as a function")}function i(N,P){for(var L=0;L<P.length;L++){var M=P[L];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(N,a(M.key),M)}}function s(N,P,L){return i(N.prototype,P),Object.defineProperty(N,"prototype",{writable:!1}),N}function a(N){var P=c(N,"string");return typeof P=="symbol"?P:String(P)}function c(N,P){if(typeof N!="object"||N===null)return N;var L=N[Symbol.toPrimitive];if(L!==void 0){var M=L.call(N,P);if(typeof M!="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(N)}var h=gi,d=h.Buffer,p=so,w=p.inspect,y=w&&w.custom||"inspect";function k(N,P,L){d.prototype.copy.call(N,P,L)}return Ms=function(){function N(){n(this,N),this.head=null,this.tail=null,this.length=0}return s(N,[{key:"push",value:function(L){var M={data:L,next:null};this.length>0?this.tail.next=M:this.head=M,this.tail=M,++this.length}},{key:"unshift",value:function(L){var M={data:L,next:this.head};this.length===0&&(this.tail=M),this.head=M,++this.length}},{key:"shift",value:function(){if(this.length!==0){var L=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,L}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(L){if(this.length===0)return"";for(var M=this.head,x=""+M.data;M=M.next;)x+=L+M.data;return x}},{key:"concat",value:function(L){if(this.length===0)return d.alloc(0);for(var M=d.allocUnsafe(L>>>0),x=this.head,T=0;x;)k(x.data,M,T),T+=x.data.length,x=x.next;return M}},{key:"consume",value:function(L,M){var x;return L<this.head.data.length?(x=this.head.data.slice(0,L),this.head.data=this.head.data.slice(L)):L===this.head.data.length?x=this.shift():x=M?this._getString(L):this._getBuffer(L),x}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(L){var M=this.head,x=1,T=M.data;for(L-=T.length;M=M.next;){var $=M.data,O=L>$.length?$.length:L;if(O===$.length?T+=$:T+=$.slice(0,L),L-=O,L===0){O===$.length?(++x,M.next?this.head=M.next:this.head=this.tail=null):(this.head=M,M.data=$.slice(O));break}++x}return this.length-=x,T}},{key:"_getBuffer",value:function(L){var M=d.allocUnsafe(L),x=this.head,T=1;for(x.data.copy(M),L-=x.data.length;x=x.next;){var $=x.data,O=L>$.length?$.length:L;if($.copy(M,M.length-L,0,O),L-=O,L===0){O===$.length?(++T,x.next?this.head=x.next:this.head=this.tail=null):(this.head=x,x.data=$.slice(O));break}++T}return this.length-=T,M}},{key:y,value:function(L,M){return w(this,t(t({},M),{},{depth:0,customInspect:!1}))}}]),N}(),Ms}function df(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(Ys,this,e)):process.nextTick(Ys,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(s){!t&&s?r._writableState?r._writableState.errorEmitted?process.nextTick(li,r):(r._writableState.errorEmitted=!0,process.nextTick(da,r,s)):process.nextTick(da,r,s):t?(process.nextTick(li,r),t(s)):process.nextTick(li,r)}),this)}function da(e,t){Ys(e,t),li(e)}function li(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function ff(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Ys(e,t){e.emit("error",t)}function pf(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}var nl={destroy:df,undestroy:ff,errorOrDestroy:pf},Sr={};function gf(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var il={};function gt(e,t,r){r||(r=Error);function n(s,a,c){return typeof t=="string"?t:t(s,a,c)}var i=function(s){gf(a,s);function a(c,h,d){return s.call(this,n(c,h,d))||this}return a}(r);i.prototype.name=r.name,i.prototype.code=e,il[e]=i}function fa(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map(function(n){return String(n)}),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:r===2?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}else return"of ".concat(t," ").concat(String(e))}function mf(e,t,r){return e.substr(0,t.length)===t}function bf(e,t,r){return(r===void 0||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function vf(e,t,r){return typeof r!="number"&&(r=0),r+t.length>e.length?!1:e.indexOf(t,r)!==-1}gt("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError);gt("ERR_INVALID_ARG_TYPE",function(e,t,r){var n;typeof t=="string"&&mf(t,"not ")?(n="must not be",t=t.replace(/^not /,"")):n="must be";var i;if(bf(e," argument"))i="The ".concat(e," ").concat(n," ").concat(fa(t,"type"));else{var s=vf(e,".")?"property":"argument";i='The "'.concat(e,'" ').concat(s," ").concat(n," ").concat(fa(t,"type"))}return i+=". Received type ".concat(typeof r),i},TypeError);gt("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");gt("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"});gt("ERR_STREAM_PREMATURE_CLOSE","Premature close");gt("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"});gt("ERR_MULTIPLE_CALLBACK","Callback called multiple times");gt("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");gt("ERR_STREAM_WRITE_AFTER_END","write after end");gt("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);gt("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError);gt("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");Sr.codes=il;var wf=Sr.codes.ERR_INVALID_OPT_VALUE;function yf(e,t,r){return e.highWaterMark!=null?e.highWaterMark:t?e[r]:null}function _f(e,t,r,n){var i=yf(t,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var s=n?r:"highWaterMark";throw new wf(s,i)}return Math.floor(i)}return e.objectMode?16:16*1024}var sl={getHighWaterMark:_f},Ef=Sf;function Sf(e,t){if(Cs("noDeprecation"))return e;var r=!1;function n(){if(!r){if(Cs("throwDeprecation"))throw new Error(t);Cs("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}return n}function Cs(e){try{if(!G.localStorage)return!1}catch{return!1}var t=G.localStorage[e];return t==null?!1:String(t).toLowerCase()==="true"}var ks,pa;function ol(){if(pa)return ks;pa=1,ks=z;function e(C){var A=this;this.next=null,this.entry=null,this.finish=function(){V(A,C)}}var t;z.WritableState=D;var r={deprecate:Ef},n=rl,i=gi.Buffer,s=(typeof G<"u"?G:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function a(C){return i.from(C)}function c(C){return i.isBuffer(C)||C instanceof s}var h=nl,d=sl,p=d.getHighWaterMark,w=Sr.codes,y=w.ERR_INVALID_ARG_TYPE,k=w.ERR_METHOD_NOT_IMPLEMENTED,N=w.ERR_MULTIPLE_CALLBACK,P=w.ERR_STREAM_CANNOT_PIPE,L=w.ERR_STREAM_DESTROYED,M=w.ERR_STREAM_NULL_VALUES,x=w.ERR_STREAM_WRITE_AFTER_END,T=w.ERR_UNKNOWN_ENCODING,$=h.errorOrDestroy;wt(z,n);function O(){}function D(C,A,B){t=t||en(),C=C||{},typeof B!="boolean"&&(B=A instanceof t),this.objectMode=!!C.objectMode,B&&(this.objectMode=this.objectMode||!!C.writableObjectMode),this.highWaterMark=p(this,C,"writableHighWaterMark",B),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var H=C.decodeStrings===!1;this.decodeStrings=!H,this.defaultEncoding=C.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(ee){f(A,ee)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=C.emitClose!==!1,this.autoDestroy=!!C.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}D.prototype.getBuffer=function(){for(var A=this.bufferedRequest,B=[];A;)B.push(A),A=A.next;return B},function(){try{Object.defineProperty(D.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var J;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(J=Function.prototype[Symbol.hasInstance],Object.defineProperty(z,Symbol.hasInstance,{value:function(A){return J.call(this,A)?!0:this!==z?!1:A&&A._writableState instanceof D}})):J=function(A){return A instanceof this};function z(C){t=t||en();var A=this instanceof t;if(!A&&!J.call(z,this))return new z(C);this._writableState=new D(C,this,A),this.writable=!0,C&&(typeof C.write=="function"&&(this._write=C.write),typeof C.writev=="function"&&(this._writev=C.writev),typeof C.destroy=="function"&&(this._destroy=C.destroy),typeof C.final=="function"&&(this._final=C.final)),n.call(this)}z.prototype.pipe=function(){$(this,new P)};function W(C,A){var B=new x;$(C,B),process.nextTick(A,B)}function ne(C,A,B,H){var ee;return B===null?ee=new M:typeof B!="string"&&!A.objectMode&&(ee=new y("chunk",["string","Buffer"],B)),ee?($(C,ee),process.nextTick(H,ee),!1):!0}z.prototype.write=function(C,A,B){var H=this._writableState,ee=!1,_=!H.objectMode&&c(C);return _&&!i.isBuffer(C)&&(C=a(C)),typeof A=="function"&&(B=A,A=null),_?A="buffer":A||(A=H.defaultEncoding),typeof B!="function"&&(B=O),H.ending?W(this,B):(_||ne(this,H,C,B))&&(H.pendingcb++,ee=ie(this,H,_,C,A,B)),ee},z.prototype.cork=function(){this._writableState.corked++},z.prototype.uncork=function(){var C=this._writableState;C.corked&&(C.corked--,!C.writing&&!C.corked&&!C.bufferProcessing&&C.bufferedRequest&&R(this,C))},z.prototype.setDefaultEncoding=function(A){if(typeof A=="string"&&(A=A.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((A+"").toLowerCase())>-1))throw new T(A);return this._writableState.defaultEncoding=A,this},Object.defineProperty(z.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function Q(C,A,B){return!C.objectMode&&C.decodeStrings!==!1&&typeof A=="string"&&(A=i.from(A,B)),A}Object.defineProperty(z.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function ie(C,A,B,H,ee,_){if(!B){var E=Q(A,H,ee);H!==E&&(B=!0,ee="buffer",H=E)}var F=A.objectMode?1:H.length;A.length+=F;var j=A.length<A.highWaterMark;if(j||(A.needDrain=!0),A.writing||A.corked){var K=A.lastBufferedRequest;A.lastBufferedRequest={chunk:H,encoding:ee,isBuf:B,callback:_,next:null},K?K.next=A.lastBufferedRequest:A.bufferedRequest=A.lastBufferedRequest,A.bufferedRequestCount+=1}else m(C,A,!1,F,H,ee,_);return j}function m(C,A,B,H,ee,_,E){A.writelen=H,A.writecb=E,A.writing=!0,A.sync=!0,A.destroyed?A.onwrite(new L("write")):B?C._writev(ee,A.onwrite):C._write(ee,_,A.onwrite),A.sync=!1}function o(C,A,B,H,ee){--A.pendingcb,B?(process.nextTick(ee,H),process.nextTick(S,C,A),C._writableState.errorEmitted=!0,$(C,H)):(ee(H),C._writableState.errorEmitted=!0,$(C,H),S(C,A))}function u(C){C.writing=!1,C.writecb=null,C.length-=C.writelen,C.writelen=0}function f(C,A){var B=C._writableState,H=B.sync,ee=B.writecb;if(typeof ee!="function")throw new N;if(u(B),A)o(C,B,H,A,ee);else{var _=I(B)||C.destroyed;!_&&!B.corked&&!B.bufferProcessing&&B.bufferedRequest&&R(C,B),H?process.nextTick(g,C,B,_,ee):g(C,B,_,ee)}}function g(C,A,B,H){B||v(C,A),A.pendingcb--,H(),S(C,A)}function v(C,A){A.length===0&&A.needDrain&&(A.needDrain=!1,C.emit("drain"))}function R(C,A){A.bufferProcessing=!0;var B=A.bufferedRequest;if(C._writev&&B&&B.next){var H=A.bufferedRequestCount,ee=new Array(H),_=A.corkedRequestsFree;_.entry=B;for(var E=0,F=!0;B;)ee[E]=B,B.isBuf||(F=!1),B=B.next,E+=1;ee.allBuffers=F,m(C,A,!0,A.length,ee,"",_.finish),A.pendingcb++,A.lastBufferedRequest=null,_.next?(A.corkedRequestsFree=_.next,_.next=null):A.corkedRequestsFree=new e(A),A.bufferedRequestCount=0}else{for(;B;){var j=B.chunk,K=B.encoding,X=B.callback,Z=A.objectMode?1:j.length;if(m(C,A,!1,Z,j,K,X),B=B.next,A.bufferedRequestCount--,A.writing)break}B===null&&(A.lastBufferedRequest=null)}A.bufferedRequest=B,A.bufferProcessing=!1}z.prototype._write=function(C,A,B){B(new k("_write()"))},z.prototype._writev=null,z.prototype.end=function(C,A,B){var H=this._writableState;return typeof C=="function"?(B=C,C=null,A=null):typeof A=="function"&&(B=A,A=null),C!=null&&this.write(C,A),H.corked&&(H.corked=1,this.uncork()),H.ending||U(this,H,B),this},Object.defineProperty(z.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function I(C){return C.ending&&C.length===0&&C.bufferedRequest===null&&!C.finished&&!C.writing}function b(C,A){C._final(function(B){A.pendingcb--,B&&$(C,B),A.prefinished=!0,C.emit("prefinish"),S(C,A)})}function l(C,A){!A.prefinished&&!A.finalCalled&&(typeof C._final=="function"&&!A.destroyed?(A.pendingcb++,A.finalCalled=!0,process.nextTick(b,C,A)):(A.prefinished=!0,C.emit("prefinish")))}function S(C,A){var B=I(A);if(B&&(l(C,A),A.pendingcb===0&&(A.finished=!0,C.emit("finish"),A.autoDestroy))){var H=C._readableState;(!H||H.autoDestroy&&H.endEmitted)&&C.destroy()}return B}function U(C,A,B){A.ending=!0,S(C,A),B&&(A.finished?process.nextTick(B):C.once("finish",B)),A.ended=!0,C.writable=!1}function V(C,A,B){var H=C.entry;for(C.entry=null;H;){var ee=H.callback;A.pendingcb--,ee(B),H=H.next}A.corkedRequestsFree.next=C}return Object.defineProperty(z.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(A){this._writableState&&(this._writableState.destroyed=A)}}),z.prototype.destroy=h.destroy,z.prototype._undestroy=h.undestroy,z.prototype._destroy=function(C,A){A(C)},ks}var Is,ga;function en(){if(ga)return Is;ga=1;var e=Object.keys||function(d){var p=[];for(var w in d)p.push(w);return p};Is=a;var t=cl(),r=ol();wt(a,t);for(var n=e(r.prototype),i=0;i<n.length;i++){var s=n[i];a.prototype[s]||(a.prototype[s]=r.prototype[s])}function a(d){if(!(this instanceof a))return new a(d);t.call(this,d),r.call(this,d),this.allowHalfOpen=!0,d&&(d.readable===!1&&(this.readable=!1),d.writable===!1&&(this.writable=!1),d.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",c)))}Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(a.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(a.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function c(){this._writableState.ended||process.nextTick(h,this)}function h(d){d.end()}return Object.defineProperty(a.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(p){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=p,this._writableState.destroyed=p)}}),Is}var xs={},ma;function ba(){if(ma)return xs;ma=1;var e=zt.Buffer,t=e.isEncoding||function(M){switch(M=""+M,M&&M.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(M){if(!M)return"utf8";for(var x;;)switch(M){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return M;default:if(x)return;M=(""+M).toLowerCase(),x=!0}}function n(M){var x=r(M);if(typeof x!="string"&&(e.isEncoding===t||!t(M)))throw new Error("Unknown encoding: "+M);return x||M}xs.StringDecoder=i;function i(M){this.encoding=n(M);var x;switch(this.encoding){case"utf16le":this.text=w,this.end=y,x=4;break;case"utf8":this.fillLast=h,x=4;break;case"base64":this.text=k,this.end=N,x=3;break;default:this.write=P,this.end=L;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(x)}i.prototype.write=function(M){if(M.length===0)return"";var x,T;if(this.lastNeed){if(x=this.fillLast(M),x===void 0)return"";T=this.lastNeed,this.lastNeed=0}else T=0;return T<M.length?x?x+this.text(M,T):this.text(M,T):x||""},i.prototype.end=p,i.prototype.text=d,i.prototype.fillLast=function(M){if(this.lastNeed<=M.length)return M.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);M.copy(this.lastChar,this.lastTotal-this.lastNeed,0,M.length),this.lastNeed-=M.length};function s(M){return M<=127?0:M>>5===6?2:M>>4===14?3:M>>3===30?4:M>>6===2?-1:-2}function a(M,x,T){var $=x.length-1;if($<T)return 0;var O=s(x[$]);return O>=0?(O>0&&(M.lastNeed=O-1),O):--$<T||O===-2?0:(O=s(x[$]),O>=0?(O>0&&(M.lastNeed=O-2),O):--$<T||O===-2?0:(O=s(x[$]),O>=0?(O>0&&(O===2?O=0:M.lastNeed=O-3),O):0))}function c(M,x,T){if((x[0]&192)!==128)return M.lastNeed=0,"�";if(M.lastNeed>1&&x.length>1){if((x[1]&192)!==128)return M.lastNeed=1,"�";if(M.lastNeed>2&&x.length>2&&(x[2]&192)!==128)return M.lastNeed=2,"�"}}function h(M){var x=this.lastTotal-this.lastNeed,T=c(this,M);if(T!==void 0)return T;if(this.lastNeed<=M.length)return M.copy(this.lastChar,x,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);M.copy(this.lastChar,x,0,M.length),this.lastNeed-=M.length}function d(M,x){var T=a(this,M,x);if(!this.lastNeed)return M.toString("utf8",x);this.lastTotal=T;var $=M.length-(T-this.lastNeed);return M.copy(this.lastChar,0,$),M.toString("utf8",x,$)}function p(M){var x=M&&M.length?this.write(M):"";return this.lastNeed?x+"�":x}function w(M,x){if((M.length-x)%2===0){var T=M.toString("utf16le",x);if(T){var $=T.charCodeAt(T.length-1);if($>=55296&&$<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=M[M.length-2],this.lastChar[1]=M[M.length-1],T.slice(0,-1)}return T}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=M[M.length-1],M.toString("utf16le",x,M.length-1)}function y(M){var x=M&&M.length?this.write(M):"";if(this.lastNeed){var T=this.lastTotal-this.lastNeed;return x+this.lastChar.toString("utf16le",0,T)}return x}function k(M,x){var T=(M.length-x)%3;return T===0?M.toString("base64",x):(this.lastNeed=3-T,this.lastTotal=3,T===1?this.lastChar[0]=M[M.length-1]:(this.lastChar[0]=M[M.length-2],this.lastChar[1]=M[M.length-1]),M.toString("base64",x,M.length-T))}function N(M){var x=M&&M.length?this.write(M):"";return this.lastNeed?x+this.lastChar.toString("base64",0,3-this.lastNeed):x}function P(M){return M.toString(this.encoding)}function L(M){return M&&M.length?this.write(M):""}return xs}var va=Sr.codes.ERR_STREAM_PREMATURE_CLOSE;function Rf(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}function Mf(){}function Cf(e){return e.setHeader&&typeof e.abort=="function"}function al(e,t,r){if(typeof t=="function")return al(e,null,t);t||(t={}),r=Rf(r||Mf);var n=t.readable||t.readable!==!1&&e.readable,i=t.writable||t.writable!==!1&&e.writable,s=function(){e.writable||c()},a=e._writableState&&e._writableState.finished,c=function(){i=!1,a=!0,n||r.call(e)},h=e._readableState&&e._readableState.endEmitted,d=function(){n=!1,h=!0,i||r.call(e)},p=function(N){r.call(e,N)},w=function(){var N;if(n&&!h)return(!e._readableState||!e._readableState.ended)&&(N=new va),r.call(e,N);if(i&&!a)return(!e._writableState||!e._writableState.ended)&&(N=new va),r.call(e,N)},y=function(){e.req.on("finish",c)};return Cf(e)?(e.on("complete",c),e.on("abort",w),e.req?y():e.on("request",y)):i&&!e._writableState&&(e.on("end",s),e.on("close",s)),e.on("end",d),e.on("finish",c),t.error!==!1&&e.on("error",p),e.on("close",w),function(){e.removeListener("complete",c),e.removeListener("abort",w),e.removeListener("request",y),e.req&&e.req.removeListener("finish",c),e.removeListener("end",s),e.removeListener("close",s),e.removeListener("finish",c),e.removeListener("end",d),e.removeListener("error",p),e.removeListener("close",w)}}var vo=al,As,wa;function kf(){if(wa)return As;wa=1;var e;function t(T,$,O){return $=r($),$ in T?Object.defineProperty(T,$,{value:O,enumerable:!0,configurable:!0,writable:!0}):T[$]=O,T}function r(T){var $=n(T,"string");return typeof $=="symbol"?$:String($)}function n(T,$){if(typeof T!="object"||T===null)return T;var O=T[Symbol.toPrimitive];if(O!==void 0){var D=O.call(T,$||"default");if(typeof D!="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(T)}var i=vo,s=Symbol("lastResolve"),a=Symbol("lastReject"),c=Symbol("error"),h=Symbol("ended"),d=Symbol("lastPromise"),p=Symbol("handlePromise"),w=Symbol("stream");function y(T,$){return{value:T,done:$}}function k(T){var $=T[s];if($!==null){var O=T[w].read();O!==null&&(T[d]=null,T[s]=null,T[a]=null,$(y(O,!1)))}}function N(T){process.nextTick(k,T)}function P(T,$){return function(O,D){T.then(function(){if($[h]){O(y(void 0,!0));return}$[p](O,D)},D)}}var L=Object.getPrototypeOf(function(){}),M=Object.setPrototypeOf((e={get stream(){return this[w]},next:function(){var $=this,O=this[c];if(O!==null)return Promise.reject(O);if(this[h])return Promise.resolve(y(void 0,!0));if(this[w].destroyed)return new Promise(function(W,ne){process.nextTick(function(){$[c]?ne($[c]):W(y(void 0,!0))})});var D=this[d],J;if(D)J=new Promise(P(D,this));else{var z=this[w].read();if(z!==null)return Promise.resolve(y(z,!1));J=new Promise(this[p])}return this[d]=J,J}},t(e,Symbol.asyncIterator,function(){return this}),t(e,"return",function(){var $=this;return new Promise(function(O,D){$[w].destroy(null,function(J){if(J){D(J);return}O(y(void 0,!0))})})}),e),L),x=function($){var O,D=Object.create(M,(O={},t(O,w,{value:$,writable:!0}),t(O,s,{value:null,writable:!0}),t(O,a,{value:null,writable:!0}),t(O,c,{value:null,writable:!0}),t(O,h,{value:$._readableState.endEmitted,writable:!0}),t(O,p,{value:function(z,W){var ne=D[w].read();ne?(D[d]=null,D[s]=null,D[a]=null,z(y(ne,!1))):(D[s]=z,D[a]=W)},writable:!0}),O));return D[d]=null,i($,function(J){if(J&&J.code!=="ERR_STREAM_PREMATURE_CLOSE"){var z=D[a];z!==null&&(D[d]=null,D[s]=null,D[a]=null,z(J)),D[c]=J;return}var W=D[s];W!==null&&(D[d]=null,D[s]=null,D[a]=null,W(y(void 0,!0))),D[h]=!0}),$.on("readable",N.bind(null,D)),D};return As=x,As}var Ns,ya;function If(){return ya||(ya=1,Ns=function(){throw new Error("Readable.from is not available in the browser")}),Ns}var Ts,_a;function cl(){if(_a)return Ts;_a=1,Ts=W;var e;W.ReadableState=z,mi.EventEmitter;var t=function(E,F){return E.listeners(F).length},r=rl,n=gi.Buffer,i=(typeof G<"u"?G:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function s(_){return n.from(_)}function a(_){return n.isBuffer(_)||_ instanceof i}var c=so,h;c&&c.debuglog?h=c.debuglog("stream"):h=function(){};var d=hf(),p=nl,w=sl,y=w.getHighWaterMark,k=Sr.codes,N=k.ERR_INVALID_ARG_TYPE,P=k.ERR_STREAM_PUSH_AFTER_EOF,L=k.ERR_METHOD_NOT_IMPLEMENTED,M=k.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,x,T,$;wt(W,r);var O=p.errorOrDestroy,D=["error","close","destroy","pause","resume"];function J(_,E,F){if(typeof _.prependListener=="function")return _.prependListener(E,F);!_._events||!_._events[E]?_.on(E,F):Array.isArray(_._events[E])?_._events[E].unshift(F):_._events[E]=[F,_._events[E]]}function z(_,E,F){e=e||en(),_=_||{},typeof F!="boolean"&&(F=E instanceof e),this.objectMode=!!_.objectMode,F&&(this.objectMode=this.objectMode||!!_.readableObjectMode),this.highWaterMark=y(this,_,"readableHighWaterMark",F),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=_.emitClose!==!1,this.autoDestroy=!!_.autoDestroy,this.destroyed=!1,this.defaultEncoding=_.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,_.encoding&&(x||(x=ba().StringDecoder),this.decoder=new x(_.encoding),this.encoding=_.encoding)}function W(_){if(e=e||en(),!(this instanceof W))return new W(_);var E=this instanceof e;this._readableState=new z(_,this,E),this.readable=!0,_&&(typeof _.read=="function"&&(this._read=_.read),typeof _.destroy=="function"&&(this._destroy=_.destroy)),r.call(this)}Object.defineProperty(W.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(E){this._readableState&&(this._readableState.destroyed=E)}}),W.prototype.destroy=p.destroy,W.prototype._undestroy=p.undestroy,W.prototype._destroy=function(_,E){E(_)},W.prototype.push=function(_,E){var F=this._readableState,j;return F.objectMode?j=!0:typeof _=="string"&&(E=E||F.defaultEncoding,E!==F.encoding&&(_=n.from(_,E),E=""),j=!0),ne(this,_,E,!1,j)},W.prototype.unshift=function(_){return ne(this,_,null,!0,!1)};function ne(_,E,F,j,K){h("readableAddChunk",E);var X=_._readableState;if(E===null)X.reading=!1,f(_,X);else{var Z;if(K||(Z=ie(X,E)),Z)O(_,Z);else if(X.objectMode||E&&E.length>0)if(typeof E!="string"&&!X.objectMode&&Object.getPrototypeOf(E)!==n.prototype&&(E=s(E)),j)X.endEmitted?O(_,new M):Q(_,X,E,!0);else if(X.ended)O(_,new P);else{if(X.destroyed)return!1;X.reading=!1,X.decoder&&!F?(E=X.decoder.write(E),X.objectMode||E.length!==0?Q(_,X,E,!1):R(_,X)):Q(_,X,E,!1)}else j||(X.reading=!1,R(_,X))}return!X.ended&&(X.length<X.highWaterMark||X.length===0)}function Q(_,E,F,j){E.flowing&&E.length===0&&!E.sync?(E.awaitDrain=0,_.emit("data",F)):(E.length+=E.objectMode?1:F.length,j?E.buffer.unshift(F):E.buffer.push(F),E.needReadable&&g(_)),R(_,E)}function ie(_,E){var F;return!a(E)&&typeof E!="string"&&E!==void 0&&!_.objectMode&&(F=new N("chunk",["string","Buffer","Uint8Array"],E)),F}W.prototype.isPaused=function(){return this._readableState.flowing===!1},W.prototype.setEncoding=function(_){x||(x=ba().StringDecoder);var E=new x(_);this._readableState.decoder=E,this._readableState.encoding=this._readableState.decoder.encoding;for(var F=this._readableState.buffer.head,j="";F!==null;)j+=E.write(F.data),F=F.next;return this._readableState.buffer.clear(),j!==""&&this._readableState.buffer.push(j),this._readableState.length=j.length,this};var m=1073741824;function o(_){return _>=m?_=m:(_--,_|=_>>>1,_|=_>>>2,_|=_>>>4,_|=_>>>8,_|=_>>>16,_++),_}function u(_,E){return _<=0||E.length===0&&E.ended?0:E.objectMode?1:_!==_?E.flowing&&E.length?E.buffer.head.data.length:E.length:(_>E.highWaterMark&&(E.highWaterMark=o(_)),_<=E.length?_:E.ended?E.length:(E.needReadable=!0,0))}W.prototype.read=function(_){h("read",_),_=parseInt(_,10);var E=this._readableState,F=_;if(_!==0&&(E.emittedReadable=!1),_===0&&E.needReadable&&((E.highWaterMark!==0?E.length>=E.highWaterMark:E.length>0)||E.ended))return h("read: emitReadable",E.length,E.ended),E.length===0&&E.ended?B(this):g(this),null;if(_=u(_,E),_===0&&E.ended)return E.length===0&&B(this),null;var j=E.needReadable;h("need readable",j),(E.length===0||E.length-_<E.highWaterMark)&&(j=!0,h("length less than watermark",j)),E.ended||E.reading?(j=!1,h("reading or ended",j)):j&&(h("do read"),E.reading=!0,E.sync=!0,E.length===0&&(E.needReadable=!0),this._read(E.highWaterMark),E.sync=!1,E.reading||(_=u(F,E)));var K;return _>0?K=A(_,E):K=null,K===null?(E.needReadable=E.length<=E.highWaterMark,_=0):(E.length-=_,E.awaitDrain=0),E.length===0&&(E.ended||(E.needReadable=!0),F!==_&&E.ended&&B(this)),K!==null&&this.emit("data",K),K};function f(_,E){if(h("onEofChunk"),!E.ended){if(E.decoder){var F=E.decoder.end();F&&F.length&&(E.buffer.push(F),E.length+=E.objectMode?1:F.length)}E.ended=!0,E.sync?g(_):(E.needReadable=!1,E.emittedReadable||(E.emittedReadable=!0,v(_)))}}function g(_){var E=_._readableState;h("emitReadable",E.needReadable,E.emittedReadable),E.needReadable=!1,E.emittedReadable||(h("emitReadable",E.flowing),E.emittedReadable=!0,process.nextTick(v,_))}function v(_){var E=_._readableState;h("emitReadable_",E.destroyed,E.length,E.ended),!E.destroyed&&(E.length||E.ended)&&(_.emit("readable"),E.emittedReadable=!1),E.needReadable=!E.flowing&&!E.ended&&E.length<=E.highWaterMark,C(_)}function R(_,E){E.readingMore||(E.readingMore=!0,process.nextTick(I,_,E))}function I(_,E){for(;!E.reading&&!E.ended&&(E.length<E.highWaterMark||E.flowing&&E.length===0);){var F=E.length;if(h("maybeReadMore read 0"),_.read(0),F===E.length)break}E.readingMore=!1}W.prototype._read=function(_){O(this,new L("_read()"))},W.prototype.pipe=function(_,E){var F=this,j=this._readableState;switch(j.pipesCount){case 0:j.pipes=_;break;case 1:j.pipes=[j.pipes,_];break;default:j.pipes.push(_);break}j.pipesCount+=1,h("pipe count=%d opts=%j",j.pipesCount,E);var K=(!E||E.end!==!1)&&_!==process.stdout&&_!==process.stderr,X=K?le:he;j.endEmitted?process.nextTick(X):F.once("end",X),_.on("unpipe",Z);function Z(ue,st){h("onunpipe"),ue===F&&st&&st.hasUnpiped===!1&&(st.hasUnpiped=!0,ge())}function le(){h("onend"),_.end()}var Et=b(F);_.on("drain",Et);var pe=!1;function ge(){h("cleanup"),_.removeListener("close",fe),_.removeListener("finish",Tt),_.removeListener("drain",Et),_.removeListener("error",de),_.removeListener("unpipe",Z),F.removeListener("end",le),F.removeListener("end",he),F.removeListener("data",Ft),pe=!0,j.awaitDrain&&(!_._writableState||_._writableState.needDrain)&&Et()}F.on("data",Ft);function Ft(ue){h("ondata");var st=_.write(ue);h("dest.write",st),st===!1&&((j.pipesCount===1&&j.pipes===_||j.pipesCount>1&&ee(j.pipes,_)!==-1)&&!pe&&(h("false write response, pause",j.awaitDrain),j.awaitDrain++),F.pause())}function de(ue){h("onerror",ue),he(),_.removeListener("error",de),t(_,"error")===0&&O(_,ue)}J(_,"error",de);function fe(){_.removeListener("finish",Tt),he()}_.once("close",fe);function Tt(){h("onfinish"),_.removeListener("close",fe),he()}_.once("finish",Tt);function he(){h("unpipe"),F.unpipe(_)}return _.emit("pipe",F),j.flowing||(h("pipe resume"),F.resume()),_};function b(_){return function(){var F=_._readableState;h("pipeOnDrain",F.awaitDrain),F.awaitDrain&&F.awaitDrain--,F.awaitDrain===0&&t(_,"data")&&(F.flowing=!0,C(_))}}W.prototype.unpipe=function(_){var E=this._readableState,F={hasUnpiped:!1};if(E.pipesCount===0)return this;if(E.pipesCount===1)return _&&_!==E.pipes?this:(_||(_=E.pipes),E.pipes=null,E.pipesCount=0,E.flowing=!1,_&&_.emit("unpipe",this,F),this);if(!_){var j=E.pipes,K=E.pipesCount;E.pipes=null,E.pipesCount=0,E.flowing=!1;for(var X=0;X<K;X++)j[X].emit("unpipe",this,{hasUnpiped:!1});return this}var Z=ee(E.pipes,_);return Z===-1?this:(E.pipes.splice(Z,1),E.pipesCount-=1,E.pipesCount===1&&(E.pipes=E.pipes[0]),_.emit("unpipe",this,F),this)},W.prototype.on=function(_,E){var F=r.prototype.on.call(this,_,E),j=this._readableState;return _==="data"?(j.readableListening=this.listenerCount("readable")>0,j.flowing!==!1&&this.resume()):_==="readable"&&!j.endEmitted&&!j.readableListening&&(j.readableListening=j.needReadable=!0,j.flowing=!1,j.emittedReadable=!1,h("on readable",j.length,j.reading),j.length?g(this):j.reading||process.nextTick(S,this)),F},W.prototype.addListener=W.prototype.on,W.prototype.removeListener=function(_,E){var F=r.prototype.removeListener.call(this,_,E);return _==="readable"&&process.nextTick(l,this),F},W.prototype.removeAllListeners=function(_){var E=r.prototype.removeAllListeners.apply(this,arguments);return(_==="readable"||_===void 0)&&process.nextTick(l,this),E};function l(_){var E=_._readableState;E.readableListening=_.listenerCount("readable")>0,E.resumeScheduled&&!E.paused?E.flowing=!0:_.listenerCount("data")>0&&_.resume()}function S(_){h("readable nexttick read 0"),_.read(0)}W.prototype.resume=function(){var _=this._readableState;return _.flowing||(h("resume"),_.flowing=!_.readableListening,U(this,_)),_.paused=!1,this};function U(_,E){E.resumeScheduled||(E.resumeScheduled=!0,process.nextTick(V,_,E))}function V(_,E){h("resume",E.reading),E.reading||_.read(0),E.resumeScheduled=!1,_.emit("resume"),C(_),E.flowing&&!E.reading&&_.read(0)}W.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function C(_){var E=_._readableState;for(h("flow",E.flowing);E.flowing&&_.read()!==null;);}W.prototype.wrap=function(_){var E=this,F=this._readableState,j=!1;_.on("end",function(){if(h("wrapped end"),F.decoder&&!F.ended){var Z=F.decoder.end();Z&&Z.length&&E.push(Z)}E.push(null)}),_.on("data",function(Z){if(h("wrapped data"),F.decoder&&(Z=F.decoder.write(Z)),!(F.objectMode&&Z==null)&&!(!F.objectMode&&(!Z||!Z.length))){var le=E.push(Z);le||(j=!0,_.pause())}});for(var K in _)this[K]===void 0&&typeof _[K]=="function"&&(this[K]=function(le){return function(){return _[le].apply(_,arguments)}}(K));for(var X=0;X<D.length;X++)_.on(D[X],this.emit.bind(this,D[X]));return this._read=function(Z){h("wrapped _read",Z),j&&(j=!1,_.resume())},this},typeof Symbol=="function"&&(W.prototype[Symbol.asyncIterator]=function(){return T===void 0&&(T=kf()),T(this)}),Object.defineProperty(W.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(W.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(W.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(E){this._readableState&&(this._readableState.flowing=E)}}),W._fromList=A,Object.defineProperty(W.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function A(_,E){if(E.length===0)return null;var F;return E.objectMode?F=E.buffer.shift():!_||_>=E.length?(E.decoder?F=E.buffer.join(""):E.buffer.length===1?F=E.buffer.first():F=E.buffer.concat(E.length),E.buffer.clear()):F=E.buffer.consume(_,E.decoder),F}function B(_){var E=_._readableState;h("endReadable",E.endEmitted),E.endEmitted||(E.ended=!0,process.nextTick(H,E,_))}function H(_,E){if(h("endReadableNT",_.endEmitted,_.length),!_.endEmitted&&_.length===0&&(_.endEmitted=!0,E.readable=!1,E.emit("end"),_.autoDestroy)){var F=E._writableState;(!F||F.autoDestroy&&F.finished)&&E.destroy()}}typeof Symbol=="function"&&(W.from=function(_,E){return $===void 0&&($=If()),$(W,_,E)});function ee(_,E){for(var F=0,j=_.length;F<j;F++)if(_[F]===E)return F;return-1}return Ts}var ll=Dt,Vi=Sr.codes,xf=Vi.ERR_METHOD_NOT_IMPLEMENTED,Af=Vi.ERR_MULTIPLE_CALLBACK,Nf=Vi.ERR_TRANSFORM_ALREADY_TRANSFORMING,Tf=Vi.ERR_TRANSFORM_WITH_LENGTH_0,qi=en();wt(Dt,qi);function Lf(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new Af);r.writechunk=null,r.writecb=null,t!=null&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Dt(e){if(!(this instanceof Dt))return new Dt(e);qi.call(this,e),this._transformState={afterTransform:Lf.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",Of)}function Of(){var e=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(t,r){Ea(e,t,r)}):Ea(this,null,null)}Dt.prototype.push=function(e,t){return this._transformState.needTransform=!1,qi.prototype.push.call(this,e,t)};Dt.prototype._transform=function(e,t,r){r(new xf("_transform()"))};Dt.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};Dt.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};Dt.prototype._destroy=function(e,t){qi.prototype._destroy.call(this,e,function(r){t(r)})};function Ea(e,t,r){if(t)return e.emit("error",t);if(r!=null&&e.push(r),e._writableState.length)throw new Tf;if(e._transformState.transforming)throw new Nf;return e.push(null)}var Pf=En,ul=ll;wt(En,ul);function En(e){if(!(this instanceof En))return new En(e);ul.call(this,e)}En.prototype._transform=function(e,t,r){r(null,e)};var Ls;function Bf(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}var hl=Sr.codes,$f=hl.ERR_MISSING_ARGS,Df=hl.ERR_STREAM_DESTROYED;function Sa(e){if(e)throw e}function Ff(e){return e.setHeader&&typeof e.abort=="function"}function jf(e,t,r,n){n=Bf(n);var i=!1;e.on("close",function(){i=!0}),Ls===void 0&&(Ls=vo),Ls(e,{readable:t,writable:r},function(a){if(a)return n(a);i=!0,n()});var s=!1;return function(a){if(!i&&!s){if(s=!0,Ff(e))return e.abort();if(typeof e.destroy=="function")return e.destroy();n(a||new Df("pipe"))}}}function Ra(e){e()}function Hf(e,t){return e.pipe(t)}function Uf(e){return!e.length||typeof e[e.length-1]!="function"?Sa:e.pop()}function Wf(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=Uf(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new $f("streams");var i,s=t.map(function(a,c){var h=c<t.length-1,d=c>0;return jf(a,h,d,function(p){i||(i=p),p&&s.forEach(Ra),!h&&(s.forEach(Ra),n(i))})});return t.reduce(Hf)}var Vf=Wf;(function(e,t){t=e.exports=cl(),t.Stream=t,t.Readable=t,t.Writable=ol(),t.Duplex=en(),t.Transform=ll,t.PassThrough=Pf,t.finished=vo,t.pipeline=Vf})(Qs,Qs.exports);var dl=Qs.exports;const{Transform:qf}=dl;var zf=e=>class fl extends qf{constructor(r,n,i,s,a){super(a),this._rate=r,this._capacity=n,this._delimitedSuffix=i,this._hashBitLength=s,this._options=a,this._state=new e,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,i){let s=null;try{this.update(r,n)}catch(a){s=a}i(s)}_flush(r){let n=null;try{this.push(this.digest())}catch(i){n=i}r(n)}update(r,n){if(!Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");return Buffer.isBuffer(r)||(r=Buffer.from(r,n)),this._state.absorb(r),this}digest(r){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let n=this._state.squeeze(this._hashBitLength/8);return r!==void 0&&(n=n.toString(r)),this._resetState(),n}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const r=new fl(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}};const{Transform:Gf}=dl;var Jf=e=>class pl extends Gf{constructor(r,n,i,s){super(s),this._rate=r,this._capacity=n,this._delimitedSuffix=i,this._options=s,this._state=new e,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,i){let s=null;try{this.update(r,n)}catch(a){s=a}i(s)}_flush(){}_read(r){this.push(this.squeeze(r))}update(r,n){if(!Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Squeeze already called");return Buffer.isBuffer(r)||(r=Buffer.from(r,n)),this._state.absorb(r),this}squeeze(r,n){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let i=this._state.squeeze(r);return n!==void 0&&(i=i.toString(n)),i}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const r=new pl(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}};const Zf=zf,Kf=Jf;var Qf=function(e){const t=Zf(e),r=Kf(e);return function(n,i){switch(typeof n=="string"?n.toLowerCase():n){case"keccak224":return new t(1152,448,null,224,i);case"keccak256":return new t(1088,512,null,256,i);case"keccak384":return new t(832,768,null,384,i);case"keccak512":return new t(576,1024,null,512,i);case"sha3-224":return new t(1152,448,6,224,i);case"sha3-256":return new t(1088,512,6,256,i);case"sha3-384":return new t(832,768,6,384,i);case"sha3-512":return new t(576,1024,6,512,i);case"shake128":return new r(1344,256,31,i);case"shake256":return new r(1088,512,31,i);default:throw new Error("Invald algorithm: "+n)}}},gl={};const Ma=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];gl.p1600=function(e){for(let t=0;t<24;++t){const r=e[0]^e[10]^e[20]^e[30]^e[40],n=e[1]^e[11]^e[21]^e[31]^e[41],i=e[2]^e[12]^e[22]^e[32]^e[42],s=e[3]^e[13]^e[23]^e[33]^e[43],a=e[4]^e[14]^e[24]^e[34]^e[44],c=e[5]^e[15]^e[25]^e[35]^e[45],h=e[6]^e[16]^e[26]^e[36]^e[46],d=e[7]^e[17]^e[27]^e[37]^e[47],p=e[8]^e[18]^e[28]^e[38]^e[48],w=e[9]^e[19]^e[29]^e[39]^e[49];let y=p^(i<<1|s>>>31),k=w^(s<<1|i>>>31);const N=e[0]^y,P=e[1]^k,L=e[10]^y,M=e[11]^k,x=e[20]^y,T=e[21]^k,$=e[30]^y,O=e[31]^k,D=e[40]^y,J=e[41]^k;y=r^(a<<1|c>>>31),k=n^(c<<1|a>>>31);const z=e[2]^y,W=e[3]^k,ne=e[12]^y,Q=e[13]^k,ie=e[22]^y,m=e[23]^k,o=e[32]^y,u=e[33]^k,f=e[42]^y,g=e[43]^k;y=i^(h<<1|d>>>31),k=s^(d<<1|h>>>31);const v=e[4]^y,R=e[5]^k,I=e[14]^y,b=e[15]^k,l=e[24]^y,S=e[25]^k,U=e[34]^y,V=e[35]^k,C=e[44]^y,A=e[45]^k;y=a^(p<<1|w>>>31),k=c^(w<<1|p>>>31);const B=e[6]^y,H=e[7]^k,ee=e[16]^y,_=e[17]^k,E=e[26]^y,F=e[27]^k,j=e[36]^y,K=e[37]^k,X=e[46]^y,Z=e[47]^k;y=h^(r<<1|n>>>31),k=d^(n<<1|r>>>31);const le=e[8]^y,Et=e[9]^k,pe=e[18]^y,ge=e[19]^k,Ft=e[28]^y,de=e[29]^k,fe=e[38]^y,Tt=e[39]^k,he=e[48]^y,ue=e[49]^k,st=N,me=P,be=M<<4|L>>>28,Cr=L<<4|M>>>28,ve=x<<3|T>>>29,we=T<<3|x>>>29,kr=O<<9|$>>>23,ye=$<<9|O>>>23,_e=D<<18|J>>>14,Ir=J<<18|D>>>14,Ee=z<<1|W>>>31,Se=W<<1|z>>>31,xr=Q<<12|ne>>>20,Re=ne<<12|Q>>>20,Me=ie<<10|m>>>22,Ar=m<<10|ie>>>22,Ce=u<<13|o>>>19,ke=o<<13|u>>>19,Nr=f<<2|g>>>30,Ie=g<<2|f>>>30,xe=R<<30|v>>>2,Tr=v<<30|R>>>2,Ae=I<<6|b>>>26,Ne=b<<6|I>>>26,Lr=S<<11|l>>>21,Te=l<<11|S>>>21,Le=U<<15|V>>>17,Or=V<<15|U>>>17,Oe=A<<29|C>>>3,Pe=C<<29|A>>>3,Pr=B<<28|H>>>4,Be=H<<28|B>>>4,$e=_<<23|ee>>>9,Br=ee<<23|_>>>9,De=E<<25|F>>>7,Fe=F<<25|E>>>7,Gt=j<<21|K>>>11,Jt=K<<21|j>>>11,Zt=Z<<24|X>>>8,Kt=X<<24|Z>>>8,Qt=le<<27|Et>>>5,Yt=Et<<27|le>>>5,Xt=pe<<20|ge>>>12,er=ge<<20|pe>>>12,tr=de<<7|Ft>>>25,rr=Ft<<7|de>>>25,nr=fe<<8|Tt>>>24,ir=Tt<<8|fe>>>24,sr=he<<14|ue>>>18,or=ue<<14|he>>>18;e[0]=st^~xr&Lr,e[1]=me^~Re&Te,e[10]=Pr^~Xt&ve,e[11]=Be^~er&we,e[20]=Ee^~Ae&De,e[21]=Se^~Ne&Fe,e[30]=Qt^~be&Me,e[31]=Yt^~Cr&Ar,e[40]=xe^~$e&tr,e[41]=Tr^~Br&rr,e[2]=xr^~Lr&Gt,e[3]=Re^~Te&Jt,e[12]=Xt^~ve&Ce,e[13]=er^~we&ke,e[22]=Ae^~De&nr,e[23]=Ne^~Fe&ir,e[32]=be^~Me&Le,e[33]=Cr^~Ar&Or,e[42]=$e^~tr&kr,e[43]=Br^~rr&ye,e[4]=Lr^~Gt&sr,e[5]=Te^~Jt&or,e[14]=ve^~Ce&Oe,e[15]=we^~ke&Pe,e[24]=De^~nr&_e,e[25]=Fe^~ir&Ir,e[34]=Me^~Le&Zt,e[35]=Ar^~Or&Kt,e[44]=tr^~kr&Nr,e[45]=rr^~ye&Ie,e[6]=Gt^~sr&st,e[7]=Jt^~or&me,e[16]=Ce^~Oe&Pr,e[17]=ke^~Pe&Be,e[26]=nr^~_e&Ee,e[27]=ir^~Ir&Se,e[36]=Le^~Zt&Qt,e[37]=Or^~Kt&Yt,e[46]=kr^~Nr&xe,e[47]=ye^~Ie&Tr,e[8]=sr^~st&xr,e[9]=or^~me&Re,e[18]=Oe^~Pr&Xt,e[19]=Pe^~Be&er,e[28]=_e^~Ee&Ae,e[29]=Ir^~Se&Ne,e[38]=Zt^~Qt&be,e[39]=Kt^~Yt&Cr,e[48]=Nr^~xe&$e,e[49]=Ie^~Tr&Br,e[0]^=Ma[t*2],e[1]^=Ma[t*2+1]}};const hi=gl;function un(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}un.prototype.initialize=function(e,t){for(let r=0;r<50;++r)this.state[r]=0;this.blockSize=e/8,this.count=0,this.squeezing=!1};un.prototype.absorb=function(e){for(let t=0;t<e.length;++t)this.state[~~(this.count/4)]^=e[t]<<8*(this.count%4),this.count+=1,this.count===this.blockSize&&(hi.p1600(this.state),this.count=0)};un.prototype.absorbLastFewBits=function(e){this.state[~~(this.count/4)]^=e<<8*(this.count%4),e&128&&this.count===this.blockSize-1&&hi.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<8*((this.blockSize-1)%4),hi.p1600(this.state),this.count=0,this.squeezing=!0};un.prototype.squeeze=function(e){this.squeezing||this.absorbLastFewBits(1);const t=Buffer.alloc(e);for(let r=0;r<e;++r)t[r]=this.state[~~(this.count/4)]>>>8*(this.count%4)&255,this.count+=1,this.count===this.blockSize&&(hi.p1600(this.state),this.count=0);return t};un.prototype.copy=function(e){for(let t=0;t<50;++t)e.state[t]=this.state[t];e.blockSize=this.blockSize,e.count=this.count,e.squeezing=this.squeezing};var Yf=un,Xf=Qf(Yf);const e0=Xf,t0=wi;function ml(e){return Buffer.allocUnsafe(e).fill(0)}function bl(e,t,r){const n=ml(t);return e=zi(e),r?e.length<t?(e.copy(n),n):e.slice(0,t):e.length<t?(e.copy(n,t-e.length),n):e.slice(-t)}function r0(e,t){return bl(e,t,!0)}function zi(e){if(!Buffer.isBuffer(e))if(Array.isArray(e))e=Buffer.from(e);else if(typeof e=="string")vl(e)?e=Buffer.from(s0(wl(e)),"hex"):e=Buffer.from(e);else if(typeof e=="number")e=intToBuffer(e);else if(e==null)e=Buffer.allocUnsafe(0);else if(t0.isBN(e))e=e.toArrayLike(Buffer);else if(e.toArray)e=Buffer.from(e.toArray());else throw new Error("invalid type");return e}function n0(e){return e=zi(e),"0x"+e.toString("hex")}function i0(e,t){return e=zi(e),t||(t=256),e0("keccak"+t).update(e).digest()}function s0(e){return e.length%2?"0"+e:e}function vl(e){return typeof e=="string"&&e.match(/^0x[0-9A-Fa-f]*$/)}function wl(e){return typeof e=="string"&&e.startsWith("0x")?e.slice(2):e}var yl={zeros:ml,setLength:bl,setLengthRight:r0,isHexString:vl,stripHexPrefix:wl,toBuffer:zi,bufferToHex:n0,keccak:i0};const vr=yl,pr=wi;function _l(e){return e.startsWith("int[")?"int256"+e.slice(3):e==="int"?"int256":e.startsWith("uint[")?"uint256"+e.slice(4):e==="uint"?"uint256":e.startsWith("fixed[")?"fixed128x128"+e.slice(5):e==="fixed"?"fixed128x128":e.startsWith("ufixed[")?"ufixed128x128"+e.slice(6):e==="ufixed"?"ufixed128x128":e}function Gr(e){return parseInt(/^\D+(\d+)$/.exec(e)[1],10)}function Ca(e){var t=/^\D+(\d+)x(\d+)$/.exec(e);return[parseInt(t[1],10),parseInt(t[2],10)]}function El(e){var t=e.match(/(.*)\[(.*?)\]$/);return t?t[2]===""?"dynamic":parseInt(t[2],10):null}function hr(e){var t=typeof e;if(t==="string")return vr.isHexString(e)?new pr(vr.stripHexPrefix(e),16):new pr(e,10);if(t==="number")return new pr(e);if(e.toArray)return e;throw new Error("Argument is not a number")}function Ct(e,t){var r,n,i,s;if(e==="address")return Ct("uint160",hr(t));if(e==="bool")return Ct("uint8",t?1:0);if(e==="string")return Ct("bytes",new Buffer(t,"utf8"));if(a0(e)){if(typeof t.length>"u")throw new Error("Not an array?");if(r=El(e),r!=="dynamic"&&r!==0&&t.length>r)throw new Error("Elements exceed array size: "+r);i=[],e=e.slice(0,e.lastIndexOf("[")),typeof t=="string"&&(t=JSON.parse(t));for(s in t)i.push(Ct(e,t[s]));if(r==="dynamic"){var a=Ct("uint256",t.length);i.unshift(a)}return Buffer.concat(i)}else{if(e==="bytes")return t=new Buffer(t),i=Buffer.concat([Ct("uint256",t.length),t]),t.length%32!==0&&(i=Buffer.concat([i,vr.zeros(32-t.length%32)])),i;if(e.startsWith("bytes")){if(r=Gr(e),r<1||r>32)throw new Error("Invalid bytes<N> width: "+r);return vr.setLengthRight(t,32)}else if(e.startsWith("uint")){if(r=Gr(e),r%8||r<8||r>256)throw new Error("Invalid uint<N> width: "+r);if(n=hr(t),n.bitLength()>r)throw new Error("Supplied uint exceeds width: "+r+" vs "+n.bitLength());if(n<0)throw new Error("Supplied uint is negative");return n.toArrayLike(Buffer,"be",32)}else if(e.startsWith("int")){if(r=Gr(e),r%8||r<8||r>256)throw new Error("Invalid int<N> width: "+r);if(n=hr(t),n.bitLength()>r)throw new Error("Supplied int exceeds width: "+r+" vs "+n.bitLength());return n.toTwos(256).toArrayLike(Buffer,"be",32)}else if(e.startsWith("ufixed")){if(r=Ca(e),n=hr(t),n<0)throw new Error("Supplied ufixed is negative");return Ct("uint256",n.mul(new pr(2).pow(new pr(r[1]))))}else if(e.startsWith("fixed"))return r=Ca(e),Ct("int256",hr(t).mul(new pr(2).pow(new pr(r[1]))))}throw new Error("Unsupported or invalid type: "+e)}function o0(e){return e==="string"||e==="bytes"||El(e)==="dynamic"}function a0(e){return e.lastIndexOf("]")===e.length-1}function c0(e,t){var r=[],n=[],i=32*e.length;for(var s in e){var a=_l(e[s]),c=t[s],h=Ct(a,c);o0(a)?(r.push(Ct("uint256",i)),n.push(h),i+=h.length):r.push(h)}return Buffer.concat(r.concat(n))}function Sl(e,t){if(e.length!==t.length)throw new Error("Number of types are not matching the values");for(var r,n,i=[],s=0;s<e.length;s++){var a=_l(e[s]),c=t[s];if(a==="bytes")i.push(c);else if(a==="string")i.push(new Buffer(c,"utf8"));else if(a==="bool")i.push(new Buffer(c?"01":"00","hex"));else if(a==="address")i.push(vr.setLength(c,20));else if(a.startsWith("bytes")){if(r=Gr(a),r<1||r>32)throw new Error("Invalid bytes<N> width: "+r);i.push(vr.setLengthRight(c,r))}else if(a.startsWith("uint")){if(r=Gr(a),r%8||r<8||r>256)throw new Error("Invalid uint<N> width: "+r);if(n=hr(c),n.bitLength()>r)throw new Error("Supplied uint exceeds width: "+r+" vs "+n.bitLength());i.push(n.toArrayLike(Buffer,"be",r/8))}else if(a.startsWith("int")){if(r=Gr(a),r%8||r<8||r>256)throw new Error("Invalid int<N> width: "+r);if(n=hr(c),n.bitLength()>r)throw new Error("Supplied int exceeds width: "+r+" vs "+n.bitLength());i.push(n.toTwos(r).toArrayLike(Buffer,"be",r/8))}else throw new Error("Unsupported or invalid type: "+a)}return Buffer.concat(i)}function l0(e,t){return vr.keccak(Sl(e,t))}var u0={rawEncode:c0,solidityPack:Sl,soliditySHA3:l0};const bt=yl,wn=u0,Rl={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},Os={encodeData(e,t,r,n=!0){const i=["bytes32"],s=[this.hashType(e,r)];if(n){const a=(c,h,d)=>{if(r[h]!==void 0)return["bytes32",d==null?"0x0000000000000000000000000000000000000000000000000000000000000000":bt.keccak(this.encodeData(h,d,r,n))];if(d===void 0)throw new Error(`missing value for field ${c} of type ${h}`);if(h==="bytes")return["bytes32",bt.keccak(d)];if(h==="string")return typeof d=="string"&&(d=Buffer.from(d,"utf8")),["bytes32",bt.keccak(d)];if(h.lastIndexOf("]")===h.length-1){const p=h.slice(0,h.lastIndexOf("[")),w=d.map(y=>a(c,p,y));return["bytes32",bt.keccak(wn.rawEncode(w.map(([y])=>y),w.map(([,y])=>y)))]}return[h,d]};for(const c of r[e]){const[h,d]=a(c.name,c.type,t[c.name]);i.push(h),s.push(d)}}else for(const a of r[e]){let c=t[a.name];if(c!==void 0)if(a.type==="bytes")i.push("bytes32"),c=bt.keccak(c),s.push(c);else if(a.type==="string")i.push("bytes32"),typeof c=="string"&&(c=Buffer.from(c,"utf8")),c=bt.keccak(c),s.push(c);else if(r[a.type]!==void 0)i.push("bytes32"),c=bt.keccak(this.encodeData(a.type,c,r,n)),s.push(c);else{if(a.type.lastIndexOf("]")===a.type.length-1)throw new Error("Arrays currently unimplemented in encodeData");i.push(a.type),s.push(c)}}return wn.rawEncode(i,s)},encodeType(e,t){let r="",n=this.findTypeDependencies(e,t).filter(i=>i!==e);n=[e].concat(n.sort());for(const i of n){if(!t[i])throw new Error("No type definition specified: "+i);r+=i+"("+t[i].map(({name:a,type:c})=>c+" "+a).join(",")+")"}return r},findTypeDependencies(e,t,r=[]){if(e=e.match(/^\w*/)[0],r.includes(e)||t[e]===void 0)return r;r.push(e);for(const n of t[e])for(const i of this.findTypeDependencies(n.type,t,r))!r.includes(i)&&r.push(i);return r},hashStruct(e,t,r,n=!0){return bt.keccak(this.encodeData(e,t,r,n))},hashType(e,t){return bt.keccak(this.encodeType(e,t))},sanitizeData(e){const t={};for(const r in Rl.properties)e[r]&&(t[r]=e[r]);return t.types&&(t.types=Object.assign({EIP712Domain:[]},t.types)),t},hash(e,t=!0){const r=this.sanitizeData(e),n=[Buffer.from("1901","hex")];return n.push(this.hashStruct("EIP712Domain",r.domain,r.types,t)),r.primaryType!=="EIP712Domain"&&n.push(this.hashStruct(r.primaryType,r.message,r.types,t)),bt.keccak(Buffer.concat(n))}};var h0={TYPED_MESSAGE_SCHEMA:Rl,TypedDataUtils:Os,hashForSignTypedDataLegacy:function(e){return d0(e.data)},hashForSignTypedData_v3:function(e){return Os.hash(e.data,!1)},hashForSignTypedData_v4:function(e){return Os.hash(e.data)}};function d0(e){const t=new Error("Expect argument to be non-empty array");if(typeof e!="object"||!e.length)throw t;const r=e.map(function(s){return s.type==="bytes"?bt.toBuffer(s.value):s.value}),n=e.map(function(s){return s.type}),i=e.map(function(s){if(!s.name)throw t;return s.type+" "+s.name});return wn.soliditySHA3(["bytes32","bytes32"],[wn.soliditySHA3(new Array(e.length).fill("string"),i),wn.soliditySHA3(n,r)])}var tn={};Object.defineProperty(tn,"__esModule",{value:!0});tn.filterFromParam=tn.FilterPolyfill=void 0;const Vr=qe,et=q,f0=5*60*1e3,dr={jsonrpc:"2.0",id:0};class p0{constructor(t){this.logFilters=new Map,this.blockFilters=new Set,this.pendingTransactionFilters=new Set,this.cursors=new Map,this.timeouts=new Map,this.nextFilterId=(0,Vr.IntNumber)(1),this.REQUEST_THROTTLE_INTERVAL=1e3,this.lastFetchTimestamp=new Date(0),this.resolvers=[],this.provider=t}async newFilter(t){const r=Ml(t),n=this.makeFilterId(),i=await this.setInitialCursorPosition(n,r.fromBlock);return console.info(`Installing new log filter(${n}):`,r,"initial cursor position:",i),this.logFilters.set(n,r),this.setFilterTimeout(n),(0,et.hexStringFromIntNumber)(n)}async newBlockFilter(){const t=this.makeFilterId(),r=await this.setInitialCursorPosition(t,"latest");return console.info(`Installing new block filter (${t}) with initial cursor position:`,r),this.blockFilters.add(t),this.setFilterTimeout(t),(0,et.hexStringFromIntNumber)(t)}async newPendingTransactionFilter(){const t=this.makeFilterId(),r=await this.setInitialCursorPosition(t,"latest");return console.info(`Installing new block filter (${t}) with initial cursor position:`,r),this.pendingTransactionFilters.add(t),this.setFilterTimeout(t),(0,et.hexStringFromIntNumber)(t)}uninstallFilter(t){const r=(0,et.intNumberFromHexString)(t);return console.info(`Uninstalling filter (${r})`),this.deleteFilter(r),!0}getFilterChanges(t){const r=(0,et.intNumberFromHexString)(t);return this.timeouts.has(r)&&this.setFilterTimeout(r),this.logFilters.has(r)?this.getLogFilterChanges(r):this.blockFilters.has(r)?this.getBlockFilterChanges(r):this.pendingTransactionFilters.has(r)?this.getPendingTransactionFilterChanges(r):Promise.resolve(ei())}async getFilterLogs(t){const r=(0,et.intNumberFromHexString)(t),n=this.logFilters.get(r);return n?this.sendAsyncPromise(Object.assign(Object.assign({},dr),{method:"eth_getLogs",params:[ka(n)]})):ei()}makeFilterId(){return(0,Vr.IntNumber)(++this.nextFilterId)}sendAsyncPromise(t){return new Promise((r,n)=>{this.provider.sendAsync(t,(i,s)=>{if(i)return n(i);if(Array.isArray(s)||s==null)return n(new Error(`unexpected response received: ${JSON.stringify(s)}`));r(s)})})}deleteFilter(t){console.info(`Deleting filter (${t})`),this.logFilters.delete(t),this.blockFilters.delete(t),this.pendingTransactionFilters.delete(t),this.cursors.delete(t),this.timeouts.delete(t)}async getLogFilterChanges(t){const r=this.logFilters.get(t),n=this.cursors.get(t);if(!n||!r)return ei();const i=await this.getCurrentBlockHeight(),s=r.toBlock==="latest"?i:r.toBlock;if(n>i||n>Number(r.toBlock))return ti();console.info(`Fetching logs from ${n} to ${s} for filter ${t}`);const a=await this.sendAsyncPromise(Object.assign(Object.assign({},dr),{method:"eth_getLogs",params:[ka(Object.assign(Object.assign({},r),{fromBlock:n,toBlock:s}))]}));if(Array.isArray(a.result)){const c=a.result.map(d=>(0,et.intNumberFromHexString)(d.blockNumber||"0x0")),h=Math.max(...c);if(h&&h>n){const d=(0,Vr.IntNumber)(h+1);console.info(`Moving cursor position for filter (${t}) from ${n} to ${d}`),this.cursors.set(t,d)}}return a}async getBlockFilterChanges(t){const r=this.cursors.get(t);if(!r)return ei();const n=await this.getCurrentBlockHeight();if(r>n)return ti();console.info(`Fetching blocks from ${r} to ${n} for filter (${t})`);const i=(await Promise.all((0,et.range)(r,n+1).map(a=>this.getBlockHashByNumber((0,Vr.IntNumber)(a))))).filter(a=>!!a),s=(0,Vr.IntNumber)(r+i.length);return console.info(`Moving cursor position for filter (${t}) from ${r} to ${s}`),this.cursors.set(t,s),Object.assign(Object.assign({},dr),{result:i})}async getPendingTransactionFilterChanges(t){return Promise.resolve(ti())}async setInitialCursorPosition(t,r){const n=await this.getCurrentBlockHeight(),i=typeof r=="number"&&r>n?r:n;return this.cursors.set(t,i),i}setFilterTimeout(t){const r=this.timeouts.get(t);r&&window.clearTimeout(r);const n=window.setTimeout(()=>{console.info(`Filter (${t}) timed out`),this.deleteFilter(t)},f0);this.timeouts.set(t,n)}async getCurrentBlockHeight(){const t=new Date;if(t.getTime()-this.lastFetchTimestamp.getTime()>this.REQUEST_THROTTLE_INTERVAL){this.lastFetchTimestamp=t;const r=await this._getCurrentBlockHeight();this.currentBlockHeight=r,this.resolvers.forEach(n=>n(r)),this.resolvers=[]}return this.currentBlockHeight?this.currentBlockHeight:new Promise(r=>this.resolvers.push(r))}async _getCurrentBlockHeight(){const{result:t}=await this.sendAsyncPromise(Object.assign(Object.assign({},dr),{method:"eth_blockNumber",params:[]}));return(0,et.intNumberFromHexString)((0,et.ensureHexString)(t))}async getBlockHashByNumber(t){const r=await this.sendAsyncPromise(Object.assign(Object.assign({},dr),{method:"eth_getBlockByNumber",params:[(0,et.hexStringFromIntNumber)(t),!1]}));return r.result&&typeof r.result.hash=="string"?(0,et.ensureHexString)(r.result.hash):null}}tn.FilterPolyfill=p0;function Ml(e){return{fromBlock:Ia(e.fromBlock),toBlock:Ia(e.toBlock),addresses:e.address===void 0?null:Array.isArray(e.address)?e.address:[e.address],topics:e.topics||[]}}tn.filterFromParam=Ml;function ka(e){const t={fromBlock:xa(e.fromBlock),toBlock:xa(e.toBlock),topics:e.topics};return e.addresses!==null&&(t.address=e.addresses),t}function Ia(e){if(e===void 0||e==="latest"||e==="pending")return"latest";if(e==="earliest")return(0,Vr.IntNumber)(0);if((0,et.isHexString)(e))return(0,et.intNumberFromHexString)(e);throw new Error(`Invalid block option: ${String(e)}`)}function xa(e){return e==="latest"?e:(0,et.hexStringFromIntNumber)(e)}function ei(){return Object.assign(Object.assign({},dr),{error:{code:-32e3,message:"filter not found"}})}function ti(){return Object.assign(Object.assign({},dr),{result:[]})}var Gi={},Cl={},Ji={},wo=g0;function g0(e){e=e||{};var t=e.max||Number.MAX_SAFE_INTEGER,r=typeof e.start<"u"?e.start:Math.floor(Math.random()*t);return function(){return r=r%t,r++}}const Aa=(e,t)=>function(){const r=t.promiseModule,n=new Array(arguments.length);for(let i=0;i<arguments.length;i++)n[i]=arguments[i];return new r((i,s)=>{t.errorFirst?n.push(function(a,c){if(t.multiArgs){const h=new Array(arguments.length-1);for(let d=1;d<arguments.length;d++)h[d-1]=arguments[d];a?(h.unshift(a),s(h)):i(h)}else a?s(a):i(c)}):n.push(function(a){if(t.multiArgs){const c=new Array(arguments.length-1);for(let h=0;h<arguments.length;h++)c[h]=arguments[h];i(c)}else i(a)}),e.apply(this,n)})};var m0=(e,t)=>{t=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},t);const r=i=>{const s=a=>typeof a=="string"?i===a:a.test(i);return t.include?t.include.some(s):!t.exclude.some(s)};let n;typeof e=="function"?n=function(){return t.excludeMain?e.apply(this,arguments):Aa(e,t).apply(this,arguments)}:n=Object.create(Object.getPrototypeOf(e));for(const i in e){const s=e[i];n[i]=typeof s=="function"&&r(i)?Aa(s,t):s}return n},jn={},Hn={};Object.defineProperty(Hn,"__esModule",{value:!0});const b0=mi;function Na(e,t,r){try{Reflect.apply(e,t,r)}catch(n){setTimeout(()=>{throw n})}}function v0(e){const t=e.length,r=new Array(t);for(let n=0;n<t;n+=1)r[n]=e[n];return r}let w0=class extends b0.EventEmitter{emit(t,...r){let n=t==="error";const i=this._events;if(i!==void 0)n=n&&i.error===void 0;else if(!n)return!1;if(n){let a;if(r.length>0&&([a]=r),a instanceof Error)throw a;const c=new Error(`Unhandled error.${a?` (${a.message})`:""}`);throw c.context=a,c}const s=i[t];if(s===void 0)return!1;if(typeof s=="function")Na(s,this,r);else{const a=s.length,c=v0(s);for(let h=0;h<a;h+=1)Na(c[h],this,r)}return!0}};Hn.default=w0;var y0=G&&G.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(jn,"__esModule",{value:!0});jn.BaseBlockTracker=void 0;const _0=y0(Hn),E0=1e3,S0=(e,t)=>e+t,Ta=["sync","latest"];class R0 extends _0.default{constructor(t){super(),this._blockResetDuration=t.blockResetDuration||20*E0,this._usePastBlocks=t.usePastBlocks||!1,this._currentBlock=null,this._isRunning=!1,this._onNewListener=this._onNewListener.bind(this),this._onRemoveListener=this._onRemoveListener.bind(this),this._resetCurrentBlock=this._resetCurrentBlock.bind(this),this._setupInternalEvents()}async destroy(){this._cancelBlockResetTimeout(),await this._maybeEnd(),super.removeAllListeners()}isRunning(){return this._isRunning}getCurrentBlock(){return this._currentBlock}async getLatestBlock(){return this._currentBlock?this._currentBlock:await new Promise(r=>this.once("latest",r))}removeAllListeners(t){return t?super.removeAllListeners(t):super.removeAllListeners(),this._setupInternalEvents(),this._onRemoveListener(),this}_setupInternalEvents(){this.removeListener("newListener",this._onNewListener),this.removeListener("removeListener",this._onRemoveListener),this.on("newListener",this._onNewListener),this.on("removeListener",this._onRemoveListener)}_onNewListener(t){Ta.includes(t)&&this._maybeStart()}_onRemoveListener(){this._getBlockTrackerEventCount()>0||this._maybeEnd()}async _maybeStart(){this._isRunning||(this._isRunning=!0,this._cancelBlockResetTimeout(),await this._start(),this.emit("_started"))}async _maybeEnd(){this._isRunning&&(this._isRunning=!1,this._setupBlockResetTimeout(),await this._end(),this.emit("_ended"))}_getBlockTrackerEventCount(){return Ta.map(t=>this.listenerCount(t)).reduce(S0)}_shouldUseNewBlock(t){const r=this._currentBlock;if(!r)return!0;const n=La(t),i=La(r);return this._usePastBlocks&&n<i||n>i}_newPotentialLatest(t){this._shouldUseNewBlock(t)&&this._setCurrentBlock(t)}_setCurrentBlock(t){const r=this._currentBlock;this._currentBlock=t,this.emit("latest",t),this.emit("sync",{oldBlock:r,newBlock:t})}_setupBlockResetTimeout(){this._cancelBlockResetTimeout(),this._blockResetTimeout=setTimeout(this._resetCurrentBlock,this._blockResetDuration),this._blockResetTimeout.unref&&this._blockResetTimeout.unref()}_cancelBlockResetTimeout(){this._blockResetTimeout&&clearTimeout(this._blockResetTimeout)}_resetCurrentBlock(){this._currentBlock=null}}jn.BaseBlockTracker=R0;function La(e){return Number.parseInt(e,16)}var kl={},Il={},Ye={};class xl extends TypeError{constructor(t,r){let n;const{message:i,explanation:s,...a}=t,{path:c}=t,h=c.length===0?i:`At path: ${c.join(".")} -- ${i}`;super(s??h),s!=null&&(this.cause=h),Object.assign(this,a),this.name=this.constructor.name,this.failures=()=>n??(n=[t,...r()])}}function M0(e){return pt(e)&&typeof e[Symbol.iterator]=="function"}function pt(e){return typeof e=="object"&&e!=null}function Oa(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function ze(e){return typeof e=="symbol"?e.toString():typeof e=="string"?JSON.stringify(e):`${e}`}function C0(e){const{done:t,value:r}=e.next();return t?void 0:r}function k0(e,t,r,n){if(e===!0)return;e===!1?e={}:typeof e=="string"&&(e={message:e});const{path:i,branch:s}=t,{type:a}=r,{refinement:c,message:h=`Expected a value of type \`${a}\`${c?` with refinement \`${c}\``:""}, but received: \`${ze(n)}\``}=e;return{value:n,type:a,refinement:c,key:i[i.length-1],path:i,branch:s,...e,message:h}}function*Xs(e,t,r,n){M0(e)||(e=[e]);for(const i of e){const s=k0(i,t,r,n);s&&(yield s)}}function*yo(e,t,r={}){const{path:n=[],branch:i=[e],coerce:s=!1,mask:a=!1}=r,c={path:n,branch:i};if(s&&(e=t.coercer(e,c),a&&t.type!=="type"&&pt(t.schema)&&pt(e)&&!Array.isArray(e)))for(const d in e)t.schema[d]===void 0&&delete e[d];let h="valid";for(const d of t.validator(e,c))d.explanation=r.message,h="not_valid",yield[d,void 0];for(let[d,p,w]of t.entries(e,c)){const y=yo(p,w,{path:d===void 0?n:[...n,d],branch:d===void 0?i:[...i,p],coerce:s,mask:a,message:r.message});for(const k of y)k[0]?(h=k[0].refinement!=null?"not_refined":"not_valid",yield[k[0],void 0]):s&&(p=k[1],d===void 0?e=p:e instanceof Map?e.set(d,p):e instanceof Set?e.add(p):pt(e)&&(p!==void 0||d in e)&&(e[d]=p))}if(h!=="not_valid")for(const d of t.refiner(e,c))d.explanation=r.message,h="not_refined",yield[d,void 0];h==="valid"&&(yield[void 0,e])}class We{constructor(t){const{type:r,schema:n,validator:i,refiner:s,coercer:a=h=>h,entries:c=function*(){}}=t;this.type=r,this.schema=n,this.entries=c,this.coercer=a,i?this.validator=(h,d)=>{const p=i(h,d);return Xs(p,d,this,h)}:this.validator=()=>[],s?this.refiner=(h,d)=>{const p=s(h,d);return Xs(p,d,this,h)}:this.refiner=()=>[]}assert(t,r){return Al(t,this,r)}create(t,r){return Nl(t,this,r)}is(t){return _o(t,this)}mask(t,r){return Tl(t,this,r)}validate(t,r={}){return hn(t,this,r)}}function Al(e,t,r){const n=hn(e,t,{message:r});if(n[0])throw n[0]}function Nl(e,t,r){const n=hn(e,t,{coerce:!0,message:r});if(n[0])throw n[0];return n[1]}function Tl(e,t,r){const n=hn(e,t,{coerce:!0,mask:!0,message:r});if(n[0])throw n[0];return n[1]}function _o(e,t){return!hn(e,t)[0]}function hn(e,t,r={}){const n=yo(e,t,r),i=C0(n);return i[0]?[new xl(i[0],function*(){for(const a of n)a[0]&&(yield a[0])}),void 0]:[void 0,i[1]]}function I0(...e){const t=e[0].type==="type",r=e.map(i=>i.schema),n=Object.assign({},...r);return t?So(n):Un(n)}function it(e,t){return new We({type:e,schema:null,validator:t})}function x0(e,t){return new We({...e,refiner:(r,n)=>r===void 0||e.refiner(r,n),validator(r,n){return r===void 0?!0:(t(r,n),e.validator(r,n))}})}function A0(e){return new We({type:"dynamic",schema:null,*entries(t,r){yield*e(t,r).entries(t,r)},validator(t,r){return e(t,r).validator(t,r)},coercer(t,r){return e(t,r).coercer(t,r)},refiner(t,r){return e(t,r).refiner(t,r)}})}function N0(e){let t;return new We({type:"lazy",schema:null,*entries(r,n){t??(t=e()),yield*t.entries(r,n)},validator(r,n){return t??(t=e()),t.validator(r,n)},coercer(r,n){return t??(t=e()),t.coercer(r,n)},refiner(r,n){return t??(t=e()),t.refiner(r,n)}})}function T0(e,t){const{schema:r}=e,n={...r};for(const i of t)delete n[i];switch(e.type){case"type":return So(n);default:return Un(n)}}function L0(e){const t=e instanceof We?{...e.schema}:{...e};for(const r in t)t[r]=Ll(t[r]);return Un(t)}function O0(e,t){const{schema:r}=e,n={};for(const i of t)n[i]=r[i];return Un(n)}function P0(e,t){return console.warn("superstruct@0.11 - The `struct` helper has been renamed to `define`."),it(e,t)}function B0(){return it("any",()=>!0)}function $0(e){return new We({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[r,n]of t.entries())yield[r,n,e]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${ze(t)}`}})}function D0(){return it("bigint",e=>typeof e=="bigint")}function F0(){return it("boolean",e=>typeof e=="boolean")}function j0(){return it("date",e=>e instanceof Date&&!isNaN(e.getTime())||`Expected a valid \`Date\` object, but received: ${ze(e)}`)}function H0(e){const t={},r=e.map(n=>ze(n)).join();for(const n of e)t[n]=n;return new We({type:"enums",schema:t,validator(n){return e.includes(n)||`Expected one of \`${r}\`, but received: ${ze(n)}`}})}function U0(){return it("func",e=>typeof e=="function"||`Expected a function, but received: ${ze(e)}`)}function W0(e){return it("instance",t=>t instanceof e||`Expected a \`${e.name}\` instance, but received: ${ze(t)}`)}function V0(){return it("integer",e=>typeof e=="number"&&!isNaN(e)&&Number.isInteger(e)||`Expected an integer, but received: ${ze(e)}`)}function q0(e){return new We({type:"intersection",schema:null,*entries(t,r){for(const n of e)yield*n.entries(t,r)},*validator(t,r){for(const n of e)yield*n.validator(t,r)},*refiner(t,r){for(const n of e)yield*n.refiner(t,r)}})}function z0(e){const t=ze(e),r=typeof e;return new We({type:"literal",schema:r==="string"||r==="number"||r==="boolean"?e:null,validator(n){return n===e||`Expected the literal \`${t}\`, but received: ${ze(n)}`}})}function G0(e,t){return new We({type:"map",schema:null,*entries(r){if(e&&t&&r instanceof Map)for(const[n,i]of r.entries())yield[n,n,e],yield[n,i,t]},coercer(r){return r instanceof Map?new Map(r):r},validator(r){return r instanceof Map||`Expected a \`Map\` object, but received: ${ze(r)}`}})}function Eo(){return it("never",()=>!1)}function J0(e){return new We({...e,validator:(t,r)=>t===null||e.validator(t,r),refiner:(t,r)=>t===null||e.refiner(t,r)})}function Z0(){return it("number",e=>typeof e=="number"&&!isNaN(e)||`Expected a number, but received: ${ze(e)}`)}function Un(e){const t=e?Object.keys(e):[],r=Eo();return new We({type:"object",schema:e||null,*entries(n){if(e&&pt(n)){const i=new Set(Object.keys(n));for(const s of t)i.delete(s),yield[s,n[s],e[s]];for(const s of i)yield[s,n[s],r]}},validator(n){return pt(n)||`Expected an object, but received: ${ze(n)}`},coercer(n){return pt(n)?{...n}:n}})}function Ll(e){return new We({...e,validator:(t,r)=>t===void 0||e.validator(t,r),refiner:(t,r)=>t===void 0||e.refiner(t,r)})}function K0(e,t){return new We({type:"record",schema:null,*entries(r){if(pt(r))for(const n in r){const i=r[n];yield[n,n,e],yield[n,i,t]}},validator(r){return pt(r)||`Expected an object, but received: ${ze(r)}`}})}function Q0(){return it("regexp",e=>e instanceof RegExp)}function Y0(e){return new We({type:"set",schema:null,*entries(t){if(e&&t instanceof Set)for(const r of t)yield[r,r,e]},coercer(t){return t instanceof Set?new Set(t):t},validator(t){return t instanceof Set||`Expected a \`Set\` object, but received: ${ze(t)}`}})}function Ol(){return it("string",e=>typeof e=="string"||`Expected a string, but received: ${ze(e)}`)}function X0(e){const t=Eo();return new We({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){const n=Math.max(e.length,r.length);for(let i=0;i<n;i++)yield[i,r[i],e[i]||t]}},validator(r){return Array.isArray(r)||`Expected an array, but received: ${ze(r)}`}})}function So(e){const t=Object.keys(e);return new We({type:"type",schema:e,*entries(r){if(pt(r))for(const n of t)yield[n,r[n],e[n]]},validator(r){return pt(r)||`Expected an object, but received: ${ze(r)}`},coercer(r){return pt(r)?{...r}:r}})}function e1(e){const t=e.map(r=>r.type).join(" | ");return new We({type:"union",schema:null,coercer(r){for(const n of e){const[i,s]=n.validate(r,{coerce:!0});if(!i)return s}return r},validator(r,n){const i=[];for(const s of e){const[...a]=yo(r,s,n),[c]=a;if(c[0])for(const[h]of a)h&&i.push(h);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${ze(r)}`,...i]}})}function Pl(){return it("unknown",()=>!0)}function Ro(e,t,r){return new We({...e,coercer:(n,i)=>_o(n,t)?e.coercer(r(n,i),i):e.coercer(n,i)})}function t1(e,t,r={}){return Ro(e,Pl(),n=>{const i=typeof t=="function"?t():t;if(n===void 0)return i;if(!r.strict&&Oa(n)&&Oa(i)){const s={...n};let a=!1;for(const c in i)s[c]===void 0&&(s[c]=i[c],a=!0);if(a)return s}return n})}function r1(e){return Ro(e,Ol(),t=>t.trim())}function n1(e){return Rr(e,"empty",t=>{const r=Bl(t);return r===0||`Expected an empty ${e.type} but received one with a size of \`${r}\``})}function Bl(e){return e instanceof Map||e instanceof Set?e.size:e.length}function i1(e,t,r={}){const{exclusive:n}=r;return Rr(e,"max",i=>n?i<t:i<=t||`Expected a ${e.type} less than ${n?"":"or equal to "}${t} but received \`${i}\``)}function s1(e,t,r={}){const{exclusive:n}=r;return Rr(e,"min",i=>n?i>t:i>=t||`Expected a ${e.type} greater than ${n?"":"or equal to "}${t} but received \`${i}\``)}function o1(e){return Rr(e,"nonempty",t=>Bl(t)>0||`Expected a nonempty ${e.type} but received an empty one`)}function a1(e,t){return Rr(e,"pattern",r=>t.test(r)||`Expected a ${e.type} matching \`/${t.source}/\` but received "${r}"`)}function c1(e,t,r=t){const n=`Expected a ${e.type}`,i=t===r?`of \`${t}\``:`between \`${t}\` and \`${r}\``;return Rr(e,"size",s=>{if(typeof s=="number"||s instanceof Date)return t<=s&&s<=r||`${n} ${i} but received \`${s}\``;if(s instanceof Map||s instanceof Set){const{size:a}=s;return t<=a&&a<=r||`${n} with a size ${i} but received one with a size of \`${a}\``}else{const{length:a}=s;return t<=a&&a<=r||`${n} with a length ${i} but received one with a length of \`${a}\``}})}function Rr(e,t,r){return new We({...e,*refiner(n,i){yield*e.refiner(n,i);const s=r(n,i),a=Xs(s,i,e,n);for(const c of a)yield{...c,refinement:t}}})}const l1=Object.freeze(Object.defineProperty({__proto__:null,Struct:We,StructError:xl,any:B0,array:$0,assert:Al,assign:I0,bigint:D0,boolean:F0,coerce:Ro,create:Nl,date:j0,defaulted:t1,define:it,deprecated:x0,dynamic:A0,empty:n1,enums:H0,func:U0,instance:W0,integer:V0,intersection:q0,is:_o,lazy:N0,literal:z0,map:G0,mask:Tl,max:i1,min:s1,never:Eo,nonempty:o1,nullable:J0,number:Z0,object:Un,omit:T0,optional:Ll,partial:L0,pattern:a1,pick:O0,record:K0,refine:Rr,regexp:Q0,set:Y0,size:c1,string:Ol,struct:P0,trimmed:r1,tuple:X0,type:So,union:e1,unknown:Pl,validate:hn},Symbol.toStringTag,{value:"Module"})),Mr=Mn(l1);Object.defineProperty(Ye,"__esModule",{value:!0});Ye.assertExhaustive=Ye.assertStruct=Ye.assert=Ye.AssertionError=void 0;const u1=Mr;function h1(e){return typeof e=="object"&&e!==null&&"message"in e}function d1(e){var t,r;return typeof((r=(t=e==null?void 0:e.prototype)===null||t===void 0?void 0:t.constructor)===null||r===void 0?void 0:r.name)=="string"}function f1(e){const t=h1(e)?e.message:String(e);return t.endsWith(".")?t.slice(0,-1):t}function $l(e,t){return d1(e)?new e({message:t}):e({message:t})}class Mo extends Error{constructor(t){super(t.message),this.code="ERR_ASSERTION"}}Ye.AssertionError=Mo;function p1(e,t="Assertion failed.",r=Mo){if(!e)throw t instanceof Error?t:$l(r,t)}Ye.assert=p1;function g1(e,t,r="Assertion failed",n=Mo){try{(0,u1.assert)(e,t)}catch(i){throw $l(n,`${r}: ${f1(i)}.`)}}Ye.assertStruct=g1;function m1(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}Ye.assertExhaustive=m1;var Wn={};Object.defineProperty(Wn,"__esModule",{value:!0});Wn.base64=void 0;const b1=Mr,v1=Ye,w1=(e,t={})=>{var r,n;const i=(r=t.paddingRequired)!==null&&r!==void 0?r:!1,s=(n=t.characterSet)!==null&&n!==void 0?n:"base64";let a;s==="base64"?a=String.raw`[A-Za-z0-9+\/]`:((0,v1.assert)(s==="base64url"),a=String.raw`[-_A-Za-z0-9]`);let c;return i?c=new RegExp(`^(?:${a}{4})*(?:${a}{3}=|${a}{2}==)?$`,"u"):c=new RegExp(`^(?:${a}{4})*(?:${a}{2,3}|${a}{3}=|${a}{2}==)?$`,"u"),(0,b1.pattern)(e,c)};Wn.base64=w1;var ae={},Vn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.remove0x=e.add0x=e.assertIsStrictHexString=e.assertIsHexString=e.isStrictHexString=e.isHexString=e.StrictHexStruct=e.HexStruct=void 0;const t=Mr,r=Ye;e.HexStruct=(0,t.pattern)((0,t.string)(),/^(?:0x)?[0-9a-f]+$/iu),e.StrictHexStruct=(0,t.pattern)((0,t.string)(),/^0x[0-9a-f]+$/iu);function n(d){return(0,t.is)(d,e.HexStruct)}e.isHexString=n;function i(d){return(0,t.is)(d,e.StrictHexStruct)}e.isStrictHexString=i;function s(d){(0,r.assert)(n(d),"Value must be a hexadecimal string.")}e.assertIsHexString=s;function a(d){(0,r.assert)(i(d),'Value must be a hexadecimal string, starting with "0x".')}e.assertIsStrictHexString=a;function c(d){return d.startsWith("0x")?d:d.startsWith("0X")?`0x${d.substring(2)}`:`0x${d}`}e.add0x=c;function h(d){return d.startsWith("0x")||d.startsWith("0X")?d.substring(2):d}e.remove0x=h})(Vn);Object.defineProperty(ae,"__esModule",{value:!0});ae.createDataView=ae.concatBytes=ae.valueToBytes=ae.stringToBytes=ae.numberToBytes=ae.signedBigIntToBytes=ae.bigIntToBytes=ae.hexToBytes=ae.bytesToString=ae.bytesToNumber=ae.bytesToSignedBigInt=ae.bytesToBigInt=ae.bytesToHex=ae.assertIsBytes=ae.isBytes=void 0;const ct=Ye,eo=Vn,Pa=48,Ba=58,$a=87;function y1(){const e=[];return()=>{if(e.length===0)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}const _1=y1();function Co(e){return e instanceof Uint8Array}ae.isBytes=Co;function dn(e){(0,ct.assert)(Co(e),"Value must be a Uint8Array.")}ae.assertIsBytes=dn;function Dl(e){if(dn(e),e.length===0)return"0x";const t=_1(),r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=t[e[n]];return(0,eo.add0x)(r.join(""))}ae.bytesToHex=Dl;function Fl(e){dn(e);const t=Dl(e);return BigInt(t)}ae.bytesToBigInt=Fl;function E1(e){dn(e);let t=BigInt(0);for(const r of e)t=(t<<BigInt(8))+BigInt(r);return BigInt.asIntN(e.length*8,t)}ae.bytesToSignedBigInt=E1;function S1(e){dn(e);const t=Fl(e);return(0,ct.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)}ae.bytesToNumber=S1;function R1(e){return dn(e),new TextDecoder().decode(e)}ae.bytesToString=R1;function Zi(e){var t;if(((t=e==null?void 0:e.toLowerCase)===null||t===void 0?void 0:t.call(e))==="0x")return new Uint8Array;(0,eo.assertIsHexString)(e);const r=(0,eo.remove0x)(e).toLowerCase(),n=r.length%2===0?r:`0${r}`,i=new Uint8Array(n.length/2);for(let s=0;s<i.length;s++){const a=n.charCodeAt(s*2),c=n.charCodeAt(s*2+1),h=a-(a<Ba?Pa:$a),d=c-(c<Ba?Pa:$a);i[s]=h*16+d}return i}ae.hexToBytes=Zi;function jl(e){(0,ct.assert)(typeof e=="bigint","Value must be a bigint."),(0,ct.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");const t=e.toString(16);return Zi(t)}ae.bigIntToBytes=jl;function M1(e,t){(0,ct.assert)(t>0);const r=e>>BigInt(31);return!((~e&r)+(e&~r)>>BigInt(t*8+-1))}function C1(e,t){(0,ct.assert)(typeof e=="bigint","Value must be a bigint."),(0,ct.assert)(typeof t=="number","Byte length must be a number."),(0,ct.assert)(t>0,"Byte length must be greater than 0."),(0,ct.assert)(M1(e,t),"Byte length is too small to represent the given value.");let r=e;const n=new Uint8Array(t);for(let i=0;i<n.length;i++)n[i]=Number(BigInt.asUintN(8,r)),r>>=BigInt(8);return n.reverse()}ae.signedBigIntToBytes=C1;function Hl(e){(0,ct.assert)(typeof e=="number","Value must be a number."),(0,ct.assert)(e>=0,"Value must be a non-negative number."),(0,ct.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");const t=e.toString(16);return Zi(t)}ae.numberToBytes=Hl;function Ul(e){return(0,ct.assert)(typeof e=="string","Value must be a string."),new TextEncoder().encode(e)}ae.stringToBytes=Ul;function Wl(e){if(typeof e=="bigint")return jl(e);if(typeof e=="number")return Hl(e);if(typeof e=="string")return e.startsWith("0x")?Zi(e):Ul(e);if(Co(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}ae.valueToBytes=Wl;function k1(e){const t=new Array(e.length);let r=0;for(let i=0;i<e.length;i++){const s=Wl(e[i]);t[i]=s,r+=s.length}const n=new Uint8Array(r);for(let i=0,s=0;i<t.length;i++)n.set(t[i],s),s+=t[i].length;return n}ae.concatBytes=k1;function I1(e){if(typeof Buffer<"u"&&e instanceof Buffer){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}ae.createDataView=I1;var Ki={};Object.defineProperty(Ki,"__esModule",{value:!0});Ki.ChecksumStruct=void 0;const Da=Mr,x1=Wn;Ki.ChecksumStruct=(0,Da.size)((0,x1.base64)((0,Da.string)(),{paddingRequired:!0}),44,44);var At={};Object.defineProperty(At,"__esModule",{value:!0});At.createHex=At.createBytes=At.createBigInt=At.createNumber=void 0;const Ue=Mr,A1=Ye,Vl=ae,Qi=Vn,ql=(0,Ue.union)([(0,Ue.number)(),(0,Ue.bigint)(),(0,Ue.string)(),Qi.StrictHexStruct]),N1=(0,Ue.coerce)((0,Ue.number)(),ql,Number),T1=(0,Ue.coerce)((0,Ue.bigint)(),ql,BigInt);(0,Ue.union)([Qi.StrictHexStruct,(0,Ue.instance)(Uint8Array)]);const L1=(0,Ue.coerce)((0,Ue.instance)(Uint8Array),(0,Ue.union)([Qi.StrictHexStruct]),Vl.hexToBytes),O1=(0,Ue.coerce)(Qi.StrictHexStruct,(0,Ue.instance)(Uint8Array),Vl.bytesToHex);function P1(e){try{const t=(0,Ue.create)(e,N1);return(0,A1.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){throw t instanceof Ue.StructError?new Error(`Expected a number-like value, got "${e}".`):t}}At.createNumber=P1;function B1(e){try{return(0,Ue.create)(e,T1)}catch(t){throw t instanceof Ue.StructError?new Error(`Expected a number-like value, got "${String(t.value)}".`):t}}At.createBigInt=B1;function $1(e){if(typeof e=="string"&&e.toLowerCase()==="0x")return new Uint8Array;try{return(0,Ue.create)(e,L1)}catch(t){throw t instanceof Ue.StructError?new Error(`Expected a bytes-like value, got "${String(t.value)}".`):t}}At.createBytes=$1;function D1(e){if(e instanceof Uint8Array&&e.length===0||typeof e=="string"&&e.toLowerCase()==="0x")return"0x";try{return(0,Ue.create)(e,O1)}catch(t){throw t instanceof Ue.StructError?new Error(`Expected a bytes-like value, got "${String(t.value)}".`):t}}At.createHex=D1;var rn={},zl=G&&G.__classPrivateFieldSet||function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r},tt=G&&G.__classPrivateFieldGet||function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},mt,Rt;Object.defineProperty(rn,"__esModule",{value:!0});rn.FrozenSet=rn.FrozenMap=void 0;class ko{constructor(t){mt.set(this,void 0),zl(this,mt,new Map(t),"f"),Object.freeze(this)}get size(){return tt(this,mt,"f").size}[(mt=new WeakMap,Symbol.iterator)](){return tt(this,mt,"f")[Symbol.iterator]()}entries(){return tt(this,mt,"f").entries()}forEach(t,r){return tt(this,mt,"f").forEach((n,i,s)=>t.call(r,n,i,this))}get(t){return tt(this,mt,"f").get(t)}has(t){return tt(this,mt,"f").has(t)}keys(){return tt(this,mt,"f").keys()}values(){return tt(this,mt,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map(([t,r])=>`${String(t)} => ${String(r)}`).join(", ")} `:""}}`}}rn.FrozenMap=ko;class Io{constructor(t){Rt.set(this,void 0),zl(this,Rt,new Set(t),"f"),Object.freeze(this)}get size(){return tt(this,Rt,"f").size}[(Rt=new WeakMap,Symbol.iterator)](){return tt(this,Rt,"f")[Symbol.iterator]()}entries(){return tt(this,Rt,"f").entries()}forEach(t,r){return tt(this,Rt,"f").forEach((n,i,s)=>t.call(r,n,i,this))}has(t){return tt(this,Rt,"f").has(t)}keys(){return tt(this,Rt,"f").keys()}values(){return tt(this,Rt,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map(t=>String(t)).join(", ")} `:""}}`}}rn.FrozenSet=Io;Object.freeze(ko);Object.freeze(ko.prototype);Object.freeze(Io);Object.freeze(Io.prototype);var Gl={};Object.defineProperty(Gl,"__esModule",{value:!0});var Jl={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getJsonRpcIdValidator=e.assertIsJsonRpcError=e.isJsonRpcError=e.assertIsJsonRpcFailure=e.isJsonRpcFailure=e.assertIsJsonRpcSuccess=e.isJsonRpcSuccess=e.assertIsJsonRpcResponse=e.isJsonRpcResponse=e.assertIsPendingJsonRpcResponse=e.isPendingJsonRpcResponse=e.JsonRpcResponseStruct=e.JsonRpcFailureStruct=e.JsonRpcSuccessStruct=e.PendingJsonRpcResponseStruct=e.assertIsJsonRpcRequest=e.isJsonRpcRequest=e.assertIsJsonRpcNotification=e.isJsonRpcNotification=e.JsonRpcNotificationStruct=e.JsonRpcRequestStruct=e.JsonRpcParamsStruct=e.JsonRpcErrorStruct=e.JsonRpcIdStruct=e.JsonRpcVersionStruct=e.jsonrpc2=e.getJsonSize=e.isValidJson=e.JsonStruct=e.UnsafeJsonStruct=void 0;const t=Mr,r=Ye,n=()=>(0,t.define)("finite number",O=>(0,t.is)(O,(0,t.number)())&&Number.isFinite(O));e.UnsafeJsonStruct=(0,t.union)([(0,t.literal)(null),(0,t.boolean)(),n(),(0,t.string)(),(0,t.array)((0,t.lazy)(()=>e.UnsafeJsonStruct)),(0,t.record)((0,t.string)(),(0,t.lazy)(()=>e.UnsafeJsonStruct))]),e.JsonStruct=(0,t.define)("Json",(O,D)=>{function J(z,W){const Q=[...W.validator(z,D)];return Q.length>0?Q:!0}try{const z=J(O,e.UnsafeJsonStruct);return z!==!0?z:J(JSON.parse(JSON.stringify(O)),e.UnsafeJsonStruct)}catch(z){return z instanceof RangeError?"Circular reference detected":!1}});function i(O){return(0,t.is)(O,e.JsonStruct)}e.isValidJson=i;function s(O){(0,r.assertStruct)(O,e.JsonStruct,"Invalid JSON value");const D=JSON.stringify(O);return new TextEncoder().encode(D).byteLength}e.getJsonSize=s,e.jsonrpc2="2.0",e.JsonRpcVersionStruct=(0,t.literal)(e.jsonrpc2),e.JsonRpcIdStruct=(0,t.nullable)((0,t.union)([(0,t.number)(),(0,t.string)()])),e.JsonRpcErrorStruct=(0,t.object)({code:(0,t.integer)(),message:(0,t.string)(),data:(0,t.optional)(e.JsonStruct),stack:(0,t.optional)((0,t.string)())}),e.JsonRpcParamsStruct=(0,t.optional)((0,t.union)([(0,t.record)((0,t.string)(),e.JsonStruct),(0,t.array)(e.JsonStruct)])),e.JsonRpcRequestStruct=(0,t.object)({id:e.JsonRpcIdStruct,jsonrpc:e.JsonRpcVersionStruct,method:(0,t.string)(),params:e.JsonRpcParamsStruct}),e.JsonRpcNotificationStruct=(0,t.omit)(e.JsonRpcRequestStruct,["id"]);function a(O){return(0,t.is)(O,e.JsonRpcNotificationStruct)}e.isJsonRpcNotification=a;function c(O,D){(0,r.assertStruct)(O,e.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",D)}e.assertIsJsonRpcNotification=c;function h(O){return(0,t.is)(O,e.JsonRpcRequestStruct)}e.isJsonRpcRequest=h;function d(O,D){(0,r.assertStruct)(O,e.JsonRpcRequestStruct,"Invalid JSON-RPC request",D)}e.assertIsJsonRpcRequest=d,e.PendingJsonRpcResponseStruct=(0,t.object)({id:e.JsonRpcIdStruct,jsonrpc:e.JsonRpcVersionStruct,result:(0,t.optional)((0,t.unknown)()),error:(0,t.optional)(e.JsonRpcErrorStruct)}),e.JsonRpcSuccessStruct=(0,t.object)({id:e.JsonRpcIdStruct,jsonrpc:e.JsonRpcVersionStruct,result:e.JsonStruct}),e.JsonRpcFailureStruct=(0,t.object)({id:e.JsonRpcIdStruct,jsonrpc:e.JsonRpcVersionStruct,error:e.JsonRpcErrorStruct}),e.JsonRpcResponseStruct=(0,t.union)([e.JsonRpcSuccessStruct,e.JsonRpcFailureStruct]);function p(O){return(0,t.is)(O,e.PendingJsonRpcResponseStruct)}e.isPendingJsonRpcResponse=p;function w(O,D){(0,r.assertStruct)(O,e.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",D)}e.assertIsPendingJsonRpcResponse=w;function y(O){return(0,t.is)(O,e.JsonRpcResponseStruct)}e.isJsonRpcResponse=y;function k(O,D){(0,r.assertStruct)(O,e.JsonRpcResponseStruct,"Invalid JSON-RPC response",D)}e.assertIsJsonRpcResponse=k;function N(O){return(0,t.is)(O,e.JsonRpcSuccessStruct)}e.isJsonRpcSuccess=N;function P(O,D){(0,r.assertStruct)(O,e.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",D)}e.assertIsJsonRpcSuccess=P;function L(O){return(0,t.is)(O,e.JsonRpcFailureStruct)}e.isJsonRpcFailure=L;function M(O,D){(0,r.assertStruct)(O,e.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",D)}e.assertIsJsonRpcFailure=M;function x(O){return(0,t.is)(O,e.JsonRpcErrorStruct)}e.isJsonRpcError=x;function T(O,D){(0,r.assertStruct)(O,e.JsonRpcErrorStruct,"Invalid JSON-RPC error",D)}e.assertIsJsonRpcError=T;function $(O){const{permitEmptyString:D,permitFractions:J,permitNull:z}=Object.assign({permitEmptyString:!0,permitFractions:!1,permitNull:!0},O);return ne=>!!(typeof ne=="number"&&(J||Number.isInteger(ne))||typeof ne=="string"&&(D||ne.length>0)||z&&ne===null)}e.getJsonRpcIdValidator=$})(Jl);var Zl={};Object.defineProperty(Zl,"__esModule",{value:!0});var nn={},to={exports:{}},Ps,Fa;function F1(){if(Fa)return Ps;Fa=1;var e=1e3,t=e*60,r=t*60,n=r*24,i=n*7,s=n*365.25;Ps=function(p,w){w=w||{};var y=typeof p;if(y==="string"&&p.length>0)return a(p);if(y==="number"&&isFinite(p))return w.long?h(p):c(p);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(p))};function a(p){if(p=String(p),!(p.length>100)){var w=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(p);if(w){var y=parseFloat(w[1]),k=(w[2]||"ms").toLowerCase();switch(k){case"years":case"year":case"yrs":case"yr":case"y":return y*s;case"weeks":case"week":case"w":return y*i;case"days":case"day":case"d":return y*n;case"hours":case"hour":case"hrs":case"hr":case"h":return y*r;case"minutes":case"minute":case"mins":case"min":case"m":return y*t;case"seconds":case"second":case"secs":case"sec":case"s":return y*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return y;default:return}}}}function c(p){var w=Math.abs(p);return w>=n?Math.round(p/n)+"d":w>=r?Math.round(p/r)+"h":w>=t?Math.round(p/t)+"m":w>=e?Math.round(p/e)+"s":p+"ms"}function h(p){var w=Math.abs(p);return w>=n?d(p,w,n,"day"):w>=r?d(p,w,r,"hour"):w>=t?d(p,w,t,"minute"):w>=e?d(p,w,e,"second"):p+" ms"}function d(p,w,y,k){var N=w>=y*1.5;return Math.round(p/y)+" "+k+(N?"s":"")}return Ps}function j1(e){r.debug=r,r.default=r,r.coerce=h,r.disable=s,r.enable=i,r.enabled=a,r.humanize=F1(),r.destroy=d,Object.keys(e).forEach(p=>{r[p]=e[p]}),r.names=[],r.skips=[],r.formatters={};function t(p){let w=0;for(let y=0;y<p.length;y++)w=(w<<5)-w+p.charCodeAt(y),w|=0;return r.colors[Math.abs(w)%r.colors.length]}r.selectColor=t;function r(p){let w,y=null,k,N;function P(...L){if(!P.enabled)return;const M=P,x=Number(new Date),T=x-(w||x);M.diff=T,M.prev=w,M.curr=x,w=x,L[0]=r.coerce(L[0]),typeof L[0]!="string"&&L.unshift("%O");let $=0;L[0]=L[0].replace(/%([a-zA-Z%])/g,(D,J)=>{if(D==="%%")return"%";$++;const z=r.formatters[J];if(typeof z=="function"){const W=L[$];D=z.call(M,W),L.splice($,1),$--}return D}),r.formatArgs.call(M,L),(M.log||r.log).apply(M,L)}return P.namespace=p,P.useColors=r.useColors(),P.color=r.selectColor(p),P.extend=n,P.destroy=r.destroy,Object.defineProperty(P,"enabled",{enumerable:!0,configurable:!1,get:()=>y!==null?y:(k!==r.namespaces&&(k=r.namespaces,N=r.enabled(p)),N),set:L=>{y=L}}),typeof r.init=="function"&&r.init(P),P}function n(p,w){const y=r(this.namespace+(typeof w>"u"?":":w)+p);return y.log=this.log,y}function i(p){r.save(p),r.namespaces=p,r.names=[],r.skips=[];let w;const y=(typeof p=="string"?p:"").split(/[\s,]+/),k=y.length;for(w=0;w<k;w++)y[w]&&(p=y[w].replace(/\*/g,".*?"),p[0]==="-"?r.skips.push(new RegExp("^"+p.slice(1)+"$")):r.names.push(new RegExp("^"+p+"$")))}function s(){const p=[...r.names.map(c),...r.skips.map(c).map(w=>"-"+w)].join(",");return r.enable(""),p}function a(p){if(p[p.length-1]==="*")return!0;let w,y;for(w=0,y=r.skips.length;w<y;w++)if(r.skips[w].test(p))return!1;for(w=0,y=r.names.length;w<y;w++)if(r.names[w].test(p))return!0;return!1}function c(p){return p.toString().substring(2,p.toString().length-2).replace(/\.\*\?$/,"*")}function h(p){return p instanceof Error?p.stack||p.message:p}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}var H1=j1;(function(e,t){var r={};t.formatArgs=i,t.save=s,t.load=a,t.useColors=n,t.storage=c(),t.destroy=(()=>{let d=!1;return()=>{d||(d=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(d){if(d[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+d[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const p="color: "+this.color;d.splice(1,0,p,"color: inherit");let w=0,y=0;d[0].replace(/%[a-zA-Z%]/g,k=>{k!=="%%"&&(w++,k==="%c"&&(y=w))}),d.splice(y,0,p)}t.log=console.debug||console.log||(()=>{});function s(d){try{d?t.storage.setItem("debug",d):t.storage.removeItem("debug")}catch{}}function a(){let d;try{d=t.storage.getItem("debug")}catch{}return!d&&typeof process<"u"&&"env"in process&&(d=r.DEBUG),d}function c(){try{return localStorage}catch{}}e.exports=H1(t);const{formatters:h}=e.exports;h.j=function(d){try{return JSON.stringify(d)}catch(p){return"[UnexpectedJSONParseError]: "+p.message}}})(to,to.exports);var U1=to.exports,W1=G&&G.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(nn,"__esModule",{value:!0});nn.createModuleLogger=nn.createProjectLogger=void 0;const V1=W1(U1),q1=(0,V1.default)("metamask");function z1(e){return q1.extend(e)}nn.createProjectLogger=z1;function G1(e,t){return e.extend(t)}nn.createModuleLogger=G1;var Kl={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.calculateNumberSize=e.calculateStringSize=e.isASCII=e.isPlainObject=e.ESCAPE_CHARACTERS_REGEXP=e.JsonSize=e.hasProperty=e.isObject=e.isNullOrUndefined=e.isNonEmptyArray=void 0;function t(d){return Array.isArray(d)&&d.length>0}e.isNonEmptyArray=t;function r(d){return d==null}e.isNullOrUndefined=r;function n(d){return!!d&&typeof d=="object"&&!Array.isArray(d)}e.isObject=n;const i=(d,p)=>Object.hasOwnProperty.call(d,p);e.hasProperty=i,function(d){d[d.Null=4]="Null",d[d.Comma=1]="Comma",d[d.Wrapper=1]="Wrapper",d[d.True=4]="True",d[d.False=5]="False",d[d.Quote=1]="Quote",d[d.Colon=1]="Colon",d[d.Date=24]="Date"}(e.JsonSize||(e.JsonSize={})),e.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu;function s(d){if(typeof d!="object"||d===null)return!1;try{let p=d;for(;Object.getPrototypeOf(p)!==null;)p=Object.getPrototypeOf(p);return Object.getPrototypeOf(d)===p}catch{return!1}}e.isPlainObject=s;function a(d){return d.charCodeAt(0)<=127}e.isASCII=a;function c(d){var p;return d.split("").reduce((y,k)=>a(k)?y+1:y+2,0)+((p=d.match(e.ESCAPE_CHARACTERS_REGEXP))!==null&&p!==void 0?p:[]).length}e.calculateStringSize=c;function h(d){return d.toString().length}e.calculateNumberSize=h})(Kl);var Nt={};Object.defineProperty(Nt,"__esModule",{value:!0});Nt.hexToBigInt=Nt.hexToNumber=Nt.bigIntToHex=Nt.numberToHex=void 0;const Jr=Ye,Sn=Vn,J1=e=>((0,Jr.assert)(typeof e=="number","Value must be a number."),(0,Jr.assert)(e>=0,"Value must be a non-negative number."),(0,Jr.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,Sn.add0x)(e.toString(16)));Nt.numberToHex=J1;const Z1=e=>((0,Jr.assert)(typeof e=="bigint","Value must be a bigint."),(0,Jr.assert)(e>=0,"Value must be a non-negative bigint."),(0,Sn.add0x)(e.toString(16)));Nt.bigIntToHex=Z1;const K1=e=>{(0,Sn.assertIsHexString)(e);const t=parseInt(e,16);return(0,Jr.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};Nt.hexToNumber=K1;const Q1=e=>((0,Sn.assertIsHexString)(e),BigInt((0,Sn.add0x)(e)));Nt.hexToBigInt=Q1;var Ql={};Object.defineProperty(Ql,"__esModule",{value:!0});var Yl={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.timeSince=e.inMilliseconds=e.Duration=void 0,function(s){s[s.Millisecond=1]="Millisecond",s[s.Second=1e3]="Second",s[s.Minute=6e4]="Minute",s[s.Hour=36e5]="Hour",s[s.Day=864e5]="Day",s[s.Week=6048e5]="Week",s[s.Year=31536e6]="Year"}(e.Duration||(e.Duration={}));const t=s=>Number.isInteger(s)&&s>=0,r=(s,a)=>{if(!t(s))throw new Error(`"${a}" must be a non-negative integer. Received: "${s}".`)};function n(s,a){return r(s,"count"),s*a}e.inMilliseconds=n;function i(s){return r(s,"timestamp"),Date.now()-s}e.timeSince=i})(Yl);var Xl={};Object.defineProperty(Xl,"__esModule",{value:!0});var eu={},ro={exports:{}};const Y1="2.0.0",tu=256,X1=Number.MAX_SAFE_INTEGER||9007199254740991,ep=16,tp=tu-6,rp=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Yi={MAX_LENGTH:tu,MAX_SAFE_COMPONENT_LENGTH:ep,MAX_SAFE_BUILD_LENGTH:tp,MAX_SAFE_INTEGER:X1,RELEASE_TYPES:rp,SEMVER_SPEC_VERSION:Y1,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},Bs={};const np=typeof process=="object"&&Bs&&Bs.NODE_DEBUG&&/\bsemver\b/i.test(Bs.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var Xi=np;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:i}=Yi,s=Xi;t=e.exports={};const a=t.re=[],c=t.safeRe=[],h=t.src=[],d=t.t={};let p=0;const w="[a-zA-Z0-9-]",y=[["\\s",1],["\\d",i],[w,n]],k=P=>{for(const[L,M]of y)P=P.split(`${L}*`).join(`${L}{0,${M}}`).split(`${L}+`).join(`${L}{1,${M}}`);return P},N=(P,L,M)=>{const x=k(L),T=p++;s(P,T,L),d[P]=T,h[T]=L,a[T]=new RegExp(L,M?"g":void 0),c[T]=new RegExp(x,M?"g":void 0)};N("NUMERICIDENTIFIER","0|[1-9]\\d*"),N("NUMERICIDENTIFIERLOOSE","\\d+"),N("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${w}*`),N("MAINVERSION",`(${h[d.NUMERICIDENTIFIER]})\\.(${h[d.NUMERICIDENTIFIER]})\\.(${h[d.NUMERICIDENTIFIER]})`),N("MAINVERSIONLOOSE",`(${h[d.NUMERICIDENTIFIERLOOSE]})\\.(${h[d.NUMERICIDENTIFIERLOOSE]})\\.(${h[d.NUMERICIDENTIFIERLOOSE]})`),N("PRERELEASEIDENTIFIER",`(?:${h[d.NUMERICIDENTIFIER]}|${h[d.NONNUMERICIDENTIFIER]})`),N("PRERELEASEIDENTIFIERLOOSE",`(?:${h[d.NUMERICIDENTIFIERLOOSE]}|${h[d.NONNUMERICIDENTIFIER]})`),N("PRERELEASE",`(?:-(${h[d.PRERELEASEIDENTIFIER]}(?:\\.${h[d.PRERELEASEIDENTIFIER]})*))`),N("PRERELEASELOOSE",`(?:-?(${h[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${h[d.PRERELEASEIDENTIFIERLOOSE]})*))`),N("BUILDIDENTIFIER",`${w}+`),N("BUILD",`(?:\\+(${h[d.BUILDIDENTIFIER]}(?:\\.${h[d.BUILDIDENTIFIER]})*))`),N("FULLPLAIN",`v?${h[d.MAINVERSION]}${h[d.PRERELEASE]}?${h[d.BUILD]}?`),N("FULL",`^${h[d.FULLPLAIN]}$`),N("LOOSEPLAIN",`[v=\\s]*${h[d.MAINVERSIONLOOSE]}${h[d.PRERELEASELOOSE]}?${h[d.BUILD]}?`),N("LOOSE",`^${h[d.LOOSEPLAIN]}$`),N("GTLT","((?:<|>)?=?)"),N("XRANGEIDENTIFIERLOOSE",`${h[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),N("XRANGEIDENTIFIER",`${h[d.NUMERICIDENTIFIER]}|x|X|\\*`),N("XRANGEPLAIN",`[v=\\s]*(${h[d.XRANGEIDENTIFIER]})(?:\\.(${h[d.XRANGEIDENTIFIER]})(?:\\.(${h[d.XRANGEIDENTIFIER]})(?:${h[d.PRERELEASE]})?${h[d.BUILD]}?)?)?`),N("XRANGEPLAINLOOSE",`[v=\\s]*(${h[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${h[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${h[d.XRANGEIDENTIFIERLOOSE]})(?:${h[d.PRERELEASELOOSE]})?${h[d.BUILD]}?)?)?`),N("XRANGE",`^${h[d.GTLT]}\\s*${h[d.XRANGEPLAIN]}$`),N("XRANGELOOSE",`^${h[d.GTLT]}\\s*${h[d.XRANGEPLAINLOOSE]}$`),N("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),N("COERCERTL",h[d.COERCE],!0),N("LONETILDE","(?:~>?)"),N("TILDETRIM",`(\\s*)${h[d.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",N("TILDE",`^${h[d.LONETILDE]}${h[d.XRANGEPLAIN]}$`),N("TILDELOOSE",`^${h[d.LONETILDE]}${h[d.XRANGEPLAINLOOSE]}$`),N("LONECARET","(?:\\^)"),N("CARETTRIM",`(\\s*)${h[d.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",N("CARET",`^${h[d.LONECARET]}${h[d.XRANGEPLAIN]}$`),N("CARETLOOSE",`^${h[d.LONECARET]}${h[d.XRANGEPLAINLOOSE]}$`),N("COMPARATORLOOSE",`^${h[d.GTLT]}\\s*(${h[d.LOOSEPLAIN]})$|^$`),N("COMPARATOR",`^${h[d.GTLT]}\\s*(${h[d.FULLPLAIN]})$|^$`),N("COMPARATORTRIM",`(\\s*)${h[d.GTLT]}\\s*(${h[d.LOOSEPLAIN]}|${h[d.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",N("HYPHENRANGE",`^\\s*(${h[d.XRANGEPLAIN]})\\s+-\\s+(${h[d.XRANGEPLAIN]})\\s*$`),N("HYPHENRANGELOOSE",`^\\s*(${h[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${h[d.XRANGEPLAINLOOSE]})\\s*$`),N("STAR","(<|>)?=?\\s*\\*"),N("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),N("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(ro,ro.exports);var qn=ro.exports;const ip=Object.freeze({loose:!0}),sp=Object.freeze({}),op=e=>e?typeof e!="object"?ip:e:sp;var xo=op;const ja=/^[0-9]+$/,ru=(e,t)=>{const r=ja.test(e),n=ja.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},ap=(e,t)=>ru(t,e);var nu={compareIdentifiers:ru,rcompareIdentifiers:ap};const ri=Xi,{MAX_LENGTH:Ha,MAX_SAFE_INTEGER:ni}=Yi,{safeRe:Ua,t:Wa}=qn,cp=xo,{compareIdentifiers:Hr}=nu;let lp=class Mt{constructor(t,r){if(r=cp(r),t instanceof Mt){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Ha)throw new TypeError(`version is longer than ${Ha} characters`);ri("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const n=t.trim().match(r.loose?Ua[Wa.LOOSE]:Ua[Wa.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>ni||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ni||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ni||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<ni)return s}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(ri("SemVer.compare",this.version,this.options,t),!(t instanceof Mt)){if(typeof t=="string"&&t===this.version)return 0;t=new Mt(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Mt||(t=new Mt(t,this.options)),Hr(this.major,t.major)||Hr(this.minor,t.minor)||Hr(this.patch,t.patch)}comparePre(t){if(t instanceof Mt||(t=new Mt(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{const n=this.prerelease[r],i=t.prerelease[r];if(ri("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Hr(n,i)}while(++r)}compareBuild(t){t instanceof Mt||(t=new Mt(t,this.options));let r=0;do{const n=this.build[r],i=t.build[r];if(ri("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Hr(n,i)}while(++r)}inc(t,r,n){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(n)?1:0;if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let s=[r,i];n===!1&&(s=[r]),Hr(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var rt=lp;const Va=rt,up=(e,t,r=!1)=>{if(e instanceof Va)return e;try{return new Va(e,t)}catch(n){if(!r)return null;throw n}};var fn=up;const hp=fn,dp=(e,t)=>{const r=hp(e,t);return r?r.version:null};var fp=dp;const pp=fn,gp=(e,t)=>{const r=pp(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};var mp=gp;const qa=rt,bp=(e,t,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new qa(e instanceof qa?e.version:e,r).inc(t,n,i).version}catch{return null}};var vp=bp;const za=fn,wp=(e,t)=>{const r=za(e,null,!0),n=za(t,null,!0),i=r.compare(n);if(i===0)return null;const s=i>0,a=s?r:n,c=s?n:r,h=!!a.prerelease.length;if(!!c.prerelease.length&&!h)return!c.patch&&!c.minor?"major":a.patch?"patch":a.minor?"minor":"major";const p=h?"pre":"";return r.major!==n.major?p+"major":r.minor!==n.minor?p+"minor":r.patch!==n.patch?p+"patch":"prerelease"};var yp=wp;const _p=rt,Ep=(e,t)=>new _p(e,t).major;var Sp=Ep;const Rp=rt,Mp=(e,t)=>new Rp(e,t).minor;var Cp=Mp;const kp=rt,Ip=(e,t)=>new kp(e,t).patch;var xp=Ip;const Ap=fn,Np=(e,t)=>{const r=Ap(e,t);return r&&r.prerelease.length?r.prerelease:null};var Tp=Np;const Ga=rt,Lp=(e,t,r)=>new Ga(e,r).compare(new Ga(t,r));var yt=Lp;const Op=yt,Pp=(e,t,r)=>Op(t,e,r);var Bp=Pp;const $p=yt,Dp=(e,t)=>$p(e,t,!0);var Fp=Dp;const Ja=rt,jp=(e,t,r)=>{const n=new Ja(e,r),i=new Ja(t,r);return n.compare(i)||n.compareBuild(i)};var Ao=jp;const Hp=Ao,Up=(e,t)=>e.sort((r,n)=>Hp(r,n,t));var Wp=Up;const Vp=Ao,qp=(e,t)=>e.sort((r,n)=>Vp(n,r,t));var zp=qp;const Gp=yt,Jp=(e,t,r)=>Gp(e,t,r)>0;var es=Jp;const Zp=yt,Kp=(e,t,r)=>Zp(e,t,r)<0;var No=Kp;const Qp=yt,Yp=(e,t,r)=>Qp(e,t,r)===0;var iu=Yp;const Xp=yt,eg=(e,t,r)=>Xp(e,t,r)!==0;var su=eg;const tg=yt,rg=(e,t,r)=>tg(e,t,r)>=0;var To=rg;const ng=yt,ig=(e,t,r)=>ng(e,t,r)<=0;var Lo=ig;const sg=iu,og=su,ag=es,cg=To,lg=No,ug=Lo,hg=(e,t,r,n)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return sg(e,r,n);case"!=":return og(e,r,n);case">":return ag(e,r,n);case">=":return cg(e,r,n);case"<":return lg(e,r,n);case"<=":return ug(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};var ou=hg;const dg=rt,fg=fn,{safeRe:ii,t:si}=qn,pg=(e,t)=>{if(e instanceof dg)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(ii[si.COERCE]);else{let n;for(;(n=ii[si.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||n.index+n[0].length!==r.index+r[0].length)&&(r=n),ii[si.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;ii[si.COERCERTL].lastIndex=-1}return r===null?null:fg(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,t)};var gg=pg,$s,Za;function mg(){return Za||(Za=1,$s=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),$s}var bg=ce;ce.Node=wr;ce.create=ce;function ce(e){var t=this;if(t instanceof ce||(t=new ce),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)t.push(arguments[r]);return t}ce.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t};ce.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};ce.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};ce.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)wg(this,arguments[e]);return this.length};ce.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)yg(this,arguments[e]);return this.length};ce.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};ce.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};ce.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;r!==null;n++)e.call(t,r.value,n,this),r=r.next};ce.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;r!==null;n--)e.call(t,r.value,n,this),r=r.prev};ce.prototype.get=function(e){for(var t=0,r=this.head;r!==null&&t<e;t++)r=r.next;if(t===e&&r!==null)return r.value};ce.prototype.getReverse=function(e){for(var t=0,r=this.tail;r!==null&&t<e;t++)r=r.prev;if(t===e&&r!==null)return r.value};ce.prototype.map=function(e,t){t=t||this;for(var r=new ce,n=this.head;n!==null;)r.push(e.call(t,n.value,this)),n=n.next;return r};ce.prototype.mapReverse=function(e,t){t=t||this;for(var r=new ce,n=this.tail;n!==null;)r.push(e.call(t,n.value,this)),n=n.prev;return r};ce.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)r=e(r,n.value,i),n=n.next;return r};ce.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)r=e(r,n.value,i),n=n.prev;return r};ce.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;r!==null;t++)e[t]=r.value,r=r.next;return e};ce.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;r!==null;t++)e[t]=r.value,r=r.prev;return e};ce.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new ce;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=0,i=this.head;i!==null&&n<e;n++)i=i.next;for(;i!==null&&n<t;n++,i=i.next)r.push(i.value);return r};ce.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new ce;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=this.length,i=this.tail;i!==null&&n>t;n--)i=i.prev;for(;i!==null&&n>e;n--,i=i.prev)r.push(i.value);return r};ce.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,i=this.head;i!==null&&n<e;n++)i=i.next;for(var s=[],n=0;i&&n<t;n++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<r.length;n++)i=vg(this,i,r[n]);return s};ce.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};function vg(e,t,r){var n=t===e.head?new wr(r,null,t,e):new wr(r,t,t.next,e);return n.next===null&&(e.tail=n),n.prev===null&&(e.head=n),e.length++,n}function wg(e,t){e.tail=new wr(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function yg(e,t){e.head=new wr(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function wr(e,t,r,n){if(!(this instanceof wr))return new wr(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{mg()(ce)}catch{}const _g=bg,fr=Symbol("max"),Bt=Symbol("length"),Ur=Symbol("lengthCalculator"),yn=Symbol("allowStale"),gr=Symbol("maxAge"),Lt=Symbol("dispose"),Ka=Symbol("noDisposeOnSet"),Je=Symbol("lruList"),vt=Symbol("cache"),au=Symbol("updateAgeOnGet"),Ds=()=>1;class Eg{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[fr]=t.max||1/0;const r=t.length||Ds;if(this[Ur]=typeof r!="function"?Ds:r,this[yn]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[gr]=t.maxAge||0,this[Lt]=t.dispose,this[Ka]=t.noDisposeOnSet||!1,this[au]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[fr]=t||1/0,gn(this)}get max(){return this[fr]}set allowStale(t){this[yn]=!!t}get allowStale(){return this[yn]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[gr]=t,gn(this)}get maxAge(){return this[gr]}set lengthCalculator(t){typeof t!="function"&&(t=Ds),t!==this[Ur]&&(this[Ur]=t,this[Bt]=0,this[Je].forEach(r=>{r.length=this[Ur](r.value,r.key),this[Bt]+=r.length})),gn(this)}get lengthCalculator(){return this[Ur]}get length(){return this[Bt]}get itemCount(){return this[Je].length}rforEach(t,r){r=r||this;for(let n=this[Je].tail;n!==null;){const i=n.prev;Qa(this,t,n,r),n=i}}forEach(t,r){r=r||this;for(let n=this[Je].head;n!==null;){const i=n.next;Qa(this,t,n,r),n=i}}keys(){return this[Je].toArray().map(t=>t.key)}values(){return this[Je].toArray().map(t=>t.value)}reset(){this[Lt]&&this[Je]&&this[Je].length&&this[Je].forEach(t=>this[Lt](t.key,t.value)),this[vt]=new Map,this[Je]=new _g,this[Bt]=0}dump(){return this[Je].map(t=>di(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Je]}set(t,r,n){if(n=n||this[gr],n&&typeof n!="number")throw new TypeError("maxAge must be a number");const i=n?Date.now():0,s=this[Ur](r,t);if(this[vt].has(t)){if(s>this[fr])return Zr(this,this[vt].get(t)),!1;const h=this[vt].get(t).value;return this[Lt]&&(this[Ka]||this[Lt](t,h.value)),h.now=i,h.maxAge=n,h.value=r,this[Bt]+=s-h.length,h.length=s,this.get(t),gn(this),!0}const a=new Sg(t,r,s,i,n);return a.length>this[fr]?(this[Lt]&&this[Lt](t,r),!1):(this[Bt]+=a.length,this[Je].unshift(a),this[vt].set(t,this[Je].head),gn(this),!0)}has(t){if(!this[vt].has(t))return!1;const r=this[vt].get(t).value;return!di(this,r)}get(t){return Fs(this,t,!0)}peek(t){return Fs(this,t,!1)}pop(){const t=this[Je].tail;return t?(Zr(this,t),t.value):null}del(t){Zr(this,this[vt].get(t))}load(t){this.reset();const r=Date.now();for(let n=t.length-1;n>=0;n--){const i=t[n],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const a=s-r;a>0&&this.set(i.k,i.v,a)}}}prune(){this[vt].forEach((t,r)=>Fs(this,r,!1))}}const Fs=(e,t,r)=>{const n=e[vt].get(t);if(n){const i=n.value;if(di(e,i)){if(Zr(e,n),!e[yn])return}else r&&(e[au]&&(n.value.now=Date.now()),e[Je].unshiftNode(n));return i.value}},di=(e,t)=>{if(!t||!t.maxAge&&!e[gr])return!1;const r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[gr]&&r>e[gr]},gn=e=>{if(e[Bt]>e[fr])for(let t=e[Je].tail;e[Bt]>e[fr]&&t!==null;){const r=t.prev;Zr(e,t),t=r}},Zr=(e,t)=>{if(t){const r=t.value;e[Lt]&&e[Lt](r.key,r.value),e[Bt]-=r.length,e[vt].delete(r.key),e[Je].removeNode(t)}};class Sg{constructor(t,r,n,i,s){this.key=t,this.value=r,this.length=n,this.now=i,this.maxAge=s||0}}const Qa=(e,t,r,n)=>{let i=r.value;di(e,i)&&(Zr(e,r),e[yn]||(i=void 0)),i&&t.call(n,i.value,i.key,e)};var Rg=Eg,js,Ya;function _t(){if(Ya)return js;Ya=1;class e{constructor(o,u){if(u=n(u),o instanceof e)return o.loose===!!u.loose&&o.includePrerelease===!!u.includePrerelease?o:new e(o.raw,u);if(o instanceof i)return this.raw=o.value,this.set=[[o]],this.format(),this;if(this.options=u,this.loose=!!u.loose,this.includePrerelease=!!u.includePrerelease,this.raw=o.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(f=>this.parseRange(f.trim())).filter(f=>f.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const f=this.set[0];if(this.set=this.set.filter(g=>!N(g[0])),this.set.length===0)this.set=[f];else if(this.set.length>1){for(const g of this.set)if(g.length===1&&P(g[0])){this.set=[g];break}}}this.format()}format(){return this.range=this.set.map(o=>o.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(o){const f=((this.options.includePrerelease&&y)|(this.options.loose&&k))+":"+o,g=r.get(f);if(g)return g;const v=this.options.loose,R=v?c[h.HYPHENRANGELOOSE]:c[h.HYPHENRANGE];o=o.replace(R,Q(this.options.includePrerelease)),s("hyphen replace",o),o=o.replace(c[h.COMPARATORTRIM],d),s("comparator trim",o),o=o.replace(c[h.TILDETRIM],p),s("tilde trim",o),o=o.replace(c[h.CARETTRIM],w),s("caret trim",o);let I=o.split(" ").map(U=>M(U,this.options)).join(" ").split(/\s+/).map(U=>ne(U,this.options));v&&(I=I.filter(U=>(s("loose invalid filter",U,this.options),!!U.match(c[h.COMPARATORLOOSE])))),s("range list",I);const b=new Map,l=I.map(U=>new i(U,this.options));for(const U of l){if(N(U))return[U];b.set(U.value,U)}b.size>1&&b.has("")&&b.delete("");const S=[...b.values()];return r.set(f,S),S}intersects(o,u){if(!(o instanceof e))throw new TypeError("a Range is required");return this.set.some(f=>L(f,u)&&o.set.some(g=>L(g,u)&&f.every(v=>g.every(R=>v.intersects(R,u)))))}test(o){if(!o)return!1;if(typeof o=="string")try{o=new a(o,this.options)}catch{return!1}for(let u=0;u<this.set.length;u++)if(ie(this.set[u],o,this.options))return!0;return!1}}js=e;const t=Rg,r=new t({max:1e3}),n=xo,i=ts(),s=Xi,a=rt,{safeRe:c,t:h,comparatorTrimReplace:d,tildeTrimReplace:p,caretTrimReplace:w}=qn,{FLAG_INCLUDE_PRERELEASE:y,FLAG_LOOSE:k}=Yi,N=m=>m.value==="<0.0.0-0",P=m=>m.value==="",L=(m,o)=>{let u=!0;const f=m.slice();let g=f.pop();for(;u&&f.length;)u=f.every(v=>g.intersects(v,o)),g=f.pop();return u},M=(m,o)=>(s("comp",m,o),m=O(m,o),s("caret",m),m=T(m,o),s("tildes",m),m=J(m,o),s("xrange",m),m=W(m,o),s("stars",m),m),x=m=>!m||m.toLowerCase()==="x"||m==="*",T=(m,o)=>m.trim().split(/\s+/).map(u=>$(u,o)).join(" "),$=(m,o)=>{const u=o.loose?c[h.TILDELOOSE]:c[h.TILDE];return m.replace(u,(f,g,v,R,I)=>{s("tilde",m,f,g,v,R,I);let b;return x(g)?b="":x(v)?b=`>=${g}.0.0 <${+g+1}.0.0-0`:x(R)?b=`>=${g}.${v}.0 <${g}.${+v+1}.0-0`:I?(s("replaceTilde pr",I),b=`>=${g}.${v}.${R}-${I} <${g}.${+v+1}.0-0`):b=`>=${g}.${v}.${R} <${g}.${+v+1}.0-0`,s("tilde return",b),b})},O=(m,o)=>m.trim().split(/\s+/).map(u=>D(u,o)).join(" "),D=(m,o)=>{s("caret",m,o);const u=o.loose?c[h.CARETLOOSE]:c[h.CARET],f=o.includePrerelease?"-0":"";return m.replace(u,(g,v,R,I,b)=>{s("caret",m,g,v,R,I,b);let l;return x(v)?l="":x(R)?l=`>=${v}.0.0${f} <${+v+1}.0.0-0`:x(I)?v==="0"?l=`>=${v}.${R}.0${f} <${v}.${+R+1}.0-0`:l=`>=${v}.${R}.0${f} <${+v+1}.0.0-0`:b?(s("replaceCaret pr",b),v==="0"?R==="0"?l=`>=${v}.${R}.${I}-${b} <${v}.${R}.${+I+1}-0`:l=`>=${v}.${R}.${I}-${b} <${v}.${+R+1}.0-0`:l=`>=${v}.${R}.${I}-${b} <${+v+1}.0.0-0`):(s("no pr"),v==="0"?R==="0"?l=`>=${v}.${R}.${I}${f} <${v}.${R}.${+I+1}-0`:l=`>=${v}.${R}.${I}${f} <${v}.${+R+1}.0-0`:l=`>=${v}.${R}.${I} <${+v+1}.0.0-0`),s("caret return",l),l})},J=(m,o)=>(s("replaceXRanges",m,o),m.split(/\s+/).map(u=>z(u,o)).join(" ")),z=(m,o)=>{m=m.trim();const u=o.loose?c[h.XRANGELOOSE]:c[h.XRANGE];return m.replace(u,(f,g,v,R,I,b)=>{s("xRange",m,f,g,v,R,I,b);const l=x(v),S=l||x(R),U=S||x(I),V=U;return g==="="&&V&&(g=""),b=o.includePrerelease?"-0":"",l?g===">"||g==="<"?f="<0.0.0-0":f="*":g&&V?(S&&(R=0),I=0,g===">"?(g=">=",S?(v=+v+1,R=0,I=0):(R=+R+1,I=0)):g==="<="&&(g="<",S?v=+v+1:R=+R+1),g==="<"&&(b="-0"),f=`${g+v}.${R}.${I}${b}`):S?f=`>=${v}.0.0${b} <${+v+1}.0.0-0`:U&&(f=`>=${v}.${R}.0${b} <${v}.${+R+1}.0-0`),s("xRange return",f),f})},W=(m,o)=>(s("replaceStars",m,o),m.trim().replace(c[h.STAR],"")),ne=(m,o)=>(s("replaceGTE0",m,o),m.trim().replace(c[o.includePrerelease?h.GTE0PRE:h.GTE0],"")),Q=m=>(o,u,f,g,v,R,I,b,l,S,U,V,C)=>(x(f)?u="":x(g)?u=`>=${f}.0.0${m?"-0":""}`:x(v)?u=`>=${f}.${g}.0${m?"-0":""}`:R?u=`>=${u}`:u=`>=${u}${m?"-0":""}`,x(l)?b="":x(S)?b=`<${+l+1}.0.0-0`:x(U)?b=`<${l}.${+S+1}.0-0`:V?b=`<=${l}.${S}.${U}-${V}`:m?b=`<${l}.${S}.${+U+1}-0`:b=`<=${b}`,`${u} ${b}`.trim()),ie=(m,o,u)=>{for(let f=0;f<m.length;f++)if(!m[f].test(o))return!1;if(o.prerelease.length&&!u.includePrerelease){for(let f=0;f<m.length;f++)if(s(m[f].semver),m[f].semver!==i.ANY&&m[f].semver.prerelease.length>0){const g=m[f].semver;if(g.major===o.major&&g.minor===o.minor&&g.patch===o.patch)return!0}return!1}return!0};return js}var Hs,Xa;function ts(){if(Xa)return Hs;Xa=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(p,w){if(w=r(w),p instanceof t){if(p.loose===!!w.loose)return p;p=p.value}p=p.trim().split(/\s+/).join(" "),a("comparator",p,w),this.options=w,this.loose=!!w.loose,this.parse(p),this.semver===e?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(p){const w=this.options.loose?n[i.COMPARATORLOOSE]:n[i.COMPARATOR],y=p.match(w);if(!y)throw new TypeError(`Invalid comparator: ${p}`);this.operator=y[1]!==void 0?y[1]:"",this.operator==="="&&(this.operator=""),y[2]?this.semver=new c(y[2],this.options.loose):this.semver=e}toString(){return this.value}test(p){if(a("Comparator.test",p,this.options.loose),this.semver===e||p===e)return!0;if(typeof p=="string")try{p=new c(p,this.options)}catch{return!1}return s(p,this.operator,this.semver,this.options)}intersects(p,w){if(!(p instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new h(p.value,w).test(this.value):p.operator===""?p.value===""?!0:new h(this.value,w).test(p.semver):(w=r(w),w.includePrerelease&&(this.value==="<0.0.0-0"||p.value==="<0.0.0-0")||!w.includePrerelease&&(this.value.startsWith("<0.0.0")||p.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&p.operator.startsWith(">")||this.operator.startsWith("<")&&p.operator.startsWith("<")||this.semver.version===p.semver.version&&this.operator.includes("=")&&p.operator.includes("=")||s(this.semver,"<",p.semver,w)&&this.operator.startsWith(">")&&p.operator.startsWith("<")||s(this.semver,">",p.semver,w)&&this.operator.startsWith("<")&&p.operator.startsWith(">")))}}Hs=t;const r=xo,{safeRe:n,t:i}=qn,s=ou,a=Xi,c=rt,h=_t();return Hs}const Mg=_t(),Cg=(e,t,r)=>{try{t=new Mg(t,r)}catch{return!1}return t.test(e)};var rs=Cg;const kg=_t(),Ig=(e,t)=>new kg(e,t).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));var xg=Ig;const Ag=rt,Ng=_t(),Tg=(e,t,r)=>{let n=null,i=null,s=null;try{s=new Ng(t,r)}catch{return null}return e.forEach(a=>{s.test(a)&&(!n||i.compare(a)===-1)&&(n=a,i=new Ag(n,r))}),n};var Lg=Tg;const Og=rt,Pg=_t(),Bg=(e,t,r)=>{let n=null,i=null,s=null;try{s=new Pg(t,r)}catch{return null}return e.forEach(a=>{s.test(a)&&(!n||i.compare(a)===1)&&(n=a,i=new Og(n,r))}),n};var $g=Bg;const Us=rt,Dg=_t(),ec=es,Fg=(e,t)=>{e=new Dg(e,t);let r=new Us("0.0.0");if(e.test(r)||(r=new Us("0.0.0-0"),e.test(r)))return r;r=null;for(let n=0;n<e.set.length;++n){const i=e.set[n];let s=null;i.forEach(a=>{const c=new Us(a.semver.version);switch(a.operator){case">":c.prerelease.length===0?c.patch++:c.prerelease.push(0),c.raw=c.format();case"":case">=":(!s||ec(c,s))&&(s=c);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),s&&(!r||ec(r,s))&&(r=s)}return r&&e.test(r)?r:null};var jg=Fg;const Hg=_t(),Ug=(e,t)=>{try{return new Hg(e,t).range||"*"}catch{return null}};var Wg=Ug;const Vg=rt,cu=ts(),{ANY:qg}=cu,zg=_t(),Gg=rs,tc=es,rc=No,Jg=Lo,Zg=To,Kg=(e,t,r,n)=>{e=new Vg(e,n),t=new zg(t,n);let i,s,a,c,h;switch(r){case">":i=tc,s=Jg,a=rc,c=">",h=">=";break;case"<":i=rc,s=Zg,a=tc,c="<",h="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Gg(e,t,n))return!1;for(let d=0;d<t.set.length;++d){const p=t.set[d];let w=null,y=null;if(p.forEach(k=>{k.semver===qg&&(k=new cu(">=0.0.0")),w=w||k,y=y||k,i(k.semver,w.semver,n)?w=k:a(k.semver,y.semver,n)&&(y=k)}),w.operator===c||w.operator===h||(!y.operator||y.operator===c)&&s(e,y.semver))return!1;if(y.operator===h&&a(e,y.semver))return!1}return!0};var Oo=Kg;const Qg=Oo,Yg=(e,t,r)=>Qg(e,t,">",r);var Xg=Yg;const em=Oo,tm=(e,t,r)=>em(e,t,"<",r);var rm=tm;const nc=_t(),nm=(e,t,r)=>(e=new nc(e,r),t=new nc(t,r),e.intersects(t,r));var im=nm;const sm=rs,om=yt;var am=(e,t,r)=>{const n=[];let i=null,s=null;const a=e.sort((p,w)=>om(p,w,r));for(const p of a)sm(p,t,r)?(s=p,i||(i=p)):(s&&n.push([i,s]),s=null,i=null);i&&n.push([i,null]);const c=[];for(const[p,w]of n)p===w?c.push(p):!w&&p===a[0]?c.push("*"):w?p===a[0]?c.push(`<=${w}`):c.push(`${p} - ${w}`):c.push(`>=${p}`);const h=c.join(" || "),d=typeof t.raw=="string"?t.raw:String(t);return h.length<d.length?h:t};const ic=_t(),Po=ts(),{ANY:Ws}=Po,mn=rs,Bo=yt,cm=(e,t,r={})=>{if(e===t)return!0;e=new ic(e,r),t=new ic(t,r);let n=!1;e:for(const i of e.set){for(const s of t.set){const a=um(i,s,r);if(n=n||a!==null,a)continue e}if(n)return!1}return!0},lm=[new Po(">=0.0.0-0")],sc=[new Po(">=0.0.0")],um=(e,t,r)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===Ws){if(t.length===1&&t[0].semver===Ws)return!0;r.includePrerelease?e=lm:e=sc}if(t.length===1&&t[0].semver===Ws){if(r.includePrerelease)return!0;t=sc}const n=new Set;let i,s;for(const k of e)k.operator===">"||k.operator===">="?i=oc(i,k,r):k.operator==="<"||k.operator==="<="?s=ac(s,k,r):n.add(k.semver);if(n.size>1)return null;let a;if(i&&s){if(a=Bo(i.semver,s.semver,r),a>0)return null;if(a===0&&(i.operator!==">="||s.operator!=="<="))return null}for(const k of n){if(i&&!mn(k,String(i),r)||s&&!mn(k,String(s),r))return null;for(const N of t)if(!mn(k,String(N),r))return!1;return!0}let c,h,d,p,w=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1,y=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;w&&w.prerelease.length===1&&s.operator==="<"&&w.prerelease[0]===0&&(w=!1);for(const k of t){if(p=p||k.operator===">"||k.operator===">=",d=d||k.operator==="<"||k.operator==="<=",i){if(y&&k.semver.prerelease&&k.semver.prerelease.length&&k.semver.major===y.major&&k.semver.minor===y.minor&&k.semver.patch===y.patch&&(y=!1),k.operator===">"||k.operator===">="){if(c=oc(i,k,r),c===k&&c!==i)return!1}else if(i.operator===">="&&!mn(i.semver,String(k),r))return!1}if(s){if(w&&k.semver.prerelease&&k.semver.prerelease.length&&k.semver.major===w.major&&k.semver.minor===w.minor&&k.semver.patch===w.patch&&(w=!1),k.operator==="<"||k.operator==="<="){if(h=ac(s,k,r),h===k&&h!==s)return!1}else if(s.operator==="<="&&!mn(s.semver,String(k),r))return!1}if(!k.operator&&(s||i)&&a!==0)return!1}return!(i&&d&&!s&&a!==0||s&&p&&!i&&a!==0||y||w)},oc=(e,t,r)=>{if(!e)return t;const n=Bo(e.semver,t.semver,r);return n>0?e:n<0||t.operator===">"&&e.operator===">="?t:e},ac=(e,t,r)=>{if(!e)return t;const n=Bo(e.semver,t.semver,r);return n<0?e:n>0||t.operator==="<"&&e.operator==="<="?t:e};var hm=cm;const Vs=qn,cc=Yi,dm=rt,lc=nu,fm=fn,pm=fp,gm=mp,mm=vp,bm=yp,vm=Sp,wm=Cp,ym=xp,_m=Tp,Em=yt,Sm=Bp,Rm=Fp,Mm=Ao,Cm=Wp,km=zp,Im=es,xm=No,Am=iu,Nm=su,Tm=To,Lm=Lo,Om=ou,Pm=gg,Bm=ts(),$m=_t(),Dm=rs,Fm=xg,jm=Lg,Hm=$g,Um=jg,Wm=Wg,Vm=Oo,qm=Xg,zm=rm,Gm=im,Jm=am,Zm=hm;var Km={parse:fm,valid:pm,clean:gm,inc:mm,diff:bm,major:vm,minor:wm,patch:ym,prerelease:_m,compare:Em,rcompare:Sm,compareLoose:Rm,compareBuild:Mm,sort:Cm,rsort:km,gt:Im,lt:xm,eq:Am,neq:Nm,gte:Tm,lte:Lm,cmp:Om,coerce:Pm,Comparator:Bm,Range:$m,satisfies:Dm,toComparators:Fm,maxSatisfying:jm,minSatisfying:Hm,minVersion:Um,validRange:Wm,outside:Vm,gtr:qm,ltr:zm,intersects:Gm,simplifyRange:Jm,subset:Zm,SemVer:dm,re:Vs.re,src:Vs.src,tokens:Vs.t,SEMVER_SPEC_VERSION:cc.SEMVER_SPEC_VERSION,RELEASE_TYPES:cc.RELEASE_TYPES,compareIdentifiers:lc.compareIdentifiers,rcompareIdentifiers:lc.rcompareIdentifiers};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.satisfiesVersionRange=e.gtRange=e.gtVersion=e.assertIsSemVerRange=e.assertIsSemVerVersion=e.isValidSemVerRange=e.isValidSemVerVersion=e.VersionRangeStruct=e.VersionStruct=void 0;const t=Km,r=Mr,n=Ye;e.VersionStruct=(0,r.refine)((0,r.string)(),"Version",w=>(0,t.valid)(w)===null?`Expected SemVer version, got "${w}"`:!0),e.VersionRangeStruct=(0,r.refine)((0,r.string)(),"Version range",w=>(0,t.validRange)(w)===null?`Expected SemVer range, got "${w}"`:!0);function i(w){return(0,r.is)(w,e.VersionStruct)}e.isValidSemVerVersion=i;function s(w){return(0,r.is)(w,e.VersionRangeStruct)}e.isValidSemVerRange=s;function a(w){(0,n.assertStruct)(w,e.VersionStruct)}e.assertIsSemVerVersion=a;function c(w){(0,n.assertStruct)(w,e.VersionRangeStruct)}e.assertIsSemVerRange=c;function h(w,y){return(0,t.gt)(w,y)}e.gtVersion=h;function d(w,y){return(0,t.gtr)(w,y)}e.gtRange=d;function p(w,y){return(0,t.satisfies)(w,y,{includePrerelease:!0})}e.satisfiesVersionRange=p})(eu);(function(e){var t=G&&G.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var c=Object.getOwnPropertyDescriptor(i,s);(!c||("get"in c?!i.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,c)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),r=G&&G.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&t(i,n,s)};Object.defineProperty(e,"__esModule",{value:!0}),r(Ye,e),r(Wn,e),r(ae,e),r(Ki,e),r(At,e),r(rn,e),r(Gl,e),r(Vn,e),r(Jl,e),r(Zl,e),r(nn,e),r(Kl,e),r(Nt,e),r(Ql,e),r(Yl,e),r(Xl,e),r(eu,e)})(Il);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createModuleLogger=e.projectLogger=void 0;const t=Il;Object.defineProperty(e,"createModuleLogger",{enumerable:!0,get:function(){return t.createModuleLogger}}),e.projectLogger=(0,t.createProjectLogger)("eth-block-tracker")})(kl);var lu=G&&G.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ji,"__esModule",{value:!0});Ji.PollingBlockTracker=void 0;const Qm=lu(wo),Ym=lu(m0),Xm=jn,uc=kl,hc=(0,uc.createModuleLogger)(uc.projectLogger,"polling-block-tracker"),eb=(0,Qm.default)(),tb=1e3;class rb extends Xm.BaseBlockTracker{constructor(t={}){var r;if(!t.provider)throw new Error("PollingBlockTracker - no provider specified.");super(Object.assign(Object.assign({},t),{blockResetDuration:(r=t.blockResetDuration)!==null&&r!==void 0?r:t.pollingInterval})),this._provider=t.provider,this._pollingInterval=t.pollingInterval||20*tb,this._retryTimeout=t.retryTimeout||this._pollingInterval/10,this._keepEventLoopActive=t.keepEventLoopActive===void 0?!0:t.keepEventLoopActive,this._setSkipCacheFlag=t.setSkipCacheFlag||!1}async checkForLatestBlock(){return await this._updateLatestBlock(),await this.getLatestBlock()}async _start(){this._synchronize()}async _end(){}async _synchronize(){for(var t;this._isRunning;)try{await this._updateLatestBlock();const r=dc(this._pollingInterval,!this._keepEventLoopActive);this.emit("_waitingForNextIteration"),await r}catch(r){const n=new Error(`PollingBlockTracker - encountered an error while attempting to update latest block:
${(t=r.stack)!==null&&t!==void 0?t:r}`);try{this.emit("error",n)}catch{console.error(n)}const i=dc(this._retryTimeout,!this._keepEventLoopActive);this.emit("_waitingForNextIteration"),await i}}async _updateLatestBlock(){const t=await this._fetchLatestBlock();this._newPotentialLatest(t)}async _fetchLatestBlock(){const t={jsonrpc:"2.0",id:eb(),method:"eth_blockNumber",params:[]};this._setSkipCacheFlag&&(t.skipCache=!0),hc("Making request",t);const r=await(0,Ym.default)(n=>this._provider.sendAsync(t,n))();if(hc("Got response",r),r.error)throw new Error(`PollingBlockTracker - encountered error fetching block:
${r.error.message}`);return r.result}}Ji.PollingBlockTracker=rb;function dc(e,t){return new Promise(r=>{const n=setTimeout(r,e);n.unref&&t&&n.unref()})}var ns={},nb=G&&G.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ns,"__esModule",{value:!0});ns.SubscribeBlockTracker=void 0;const ib=nb(wo),sb=jn,ob=(0,ib.default)();class ab extends sb.BaseBlockTracker{constructor(t={}){if(!t.provider)throw new Error("SubscribeBlockTracker - no provider specified.");super(t),this._provider=t.provider,this._subscriptionId=null}async checkForLatestBlock(){return await this.getLatestBlock()}async _start(){if(this._subscriptionId===void 0||this._subscriptionId===null)try{const t=await this._call("eth_blockNumber");this._subscriptionId=await this._call("eth_subscribe","newHeads"),this._provider.on("data",this._handleSubData.bind(this)),this._newPotentialLatest(t)}catch(t){this.emit("error",t)}}async _end(){if(this._subscriptionId!==null&&this._subscriptionId!==void 0)try{await this._call("eth_unsubscribe",this._subscriptionId),this._subscriptionId=null}catch(t){this.emit("error",t)}}_call(t,...r){return new Promise((n,i)=>{this._provider.sendAsync({id:ob(),method:t,params:r,jsonrpc:"2.0"},(s,a)=>{s?i(s):n(a.result)})})}_handleSubData(t,r){var n;r.method==="eth_subscription"&&((n=r.params)===null||n===void 0?void 0:n.subscription)===this._subscriptionId&&this._newPotentialLatest(r.params.result.number)}}ns.SubscribeBlockTracker=ab;(function(e){var t=G&&G.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s),Object.defineProperty(n,a,{enumerable:!0,get:function(){return i[s]}})}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),r=G&&G.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&t(i,n,s)};Object.defineProperty(e,"__esModule",{value:!0}),r(Ji,e),r(ns,e)})(Cl);var $o={},is={},zn={};Object.defineProperty(zn,"__esModule",{value:!0});zn.getUniqueId=void 0;const uu=4294967295;let qs=Math.floor(Math.random()*uu);function cb(){return qs=(qs+1)%uu,qs}zn.getUniqueId=cb;Object.defineProperty(is,"__esModule",{value:!0});is.createIdRemapMiddleware=void 0;const lb=zn;function ub(){return(e,t,r,n)=>{const i=e.id,s=lb.getUniqueId();e.id=s,t.id=s,r(a=>{e.id=i,t.id=i,a()})}}is.createIdRemapMiddleware=ub;var ss={};Object.defineProperty(ss,"__esModule",{value:!0});ss.createAsyncMiddleware=void 0;function hb(e){return async(t,r,n,i)=>{let s;const a=new Promise(p=>{s=p});let c=null,h=!1;const d=async()=>{h=!0,n(p=>{c=p,s()}),await a};try{await e(t,r,d),h?(await a,c(null)):i(null)}catch(p){c?c(p):i(p)}}}ss.createAsyncMiddleware=hb;var os={};Object.defineProperty(os,"__esModule",{value:!0});os.createScaffoldMiddleware=void 0;function db(e){return(t,r,n,i)=>{const s=e[t.method];return s===void 0?n():typeof s=="function"?s(t,r,n,i):(r.result=s,i())}}os.createScaffoldMiddleware=db;var Gn={},Do={};Object.defineProperty(Do,"__esModule",{value:!0});const fb=mi;function fc(e,t,r){try{Reflect.apply(e,t,r)}catch(n){setTimeout(()=>{throw n})}}function pb(e){const t=e.length,r=new Array(t);for(let n=0;n<t;n+=1)r[n]=e[n];return r}let gb=class extends fb.EventEmitter{emit(t,...r){let n=t==="error";const i=this._events;if(i!==void 0)n=n&&i.error===void 0;else if(!n)return!1;if(n){let a;if(r.length>0&&([a]=r),a instanceof Error)throw a;const c=new Error(`Unhandled error.${a?` (${a.message})`:""}`);throw c.context=a,c}const s=i[t];if(s===void 0)return!1;if(typeof s=="function")fc(s,this,r);else{const a=s.length,c=pb(s);for(let h=0;h<a;h+=1)fc(c[h],this,r)}return!0}};Do.default=gb;var hu={},Vt={},mb=Rn;Rn.default=Rn;Rn.stable=pu;Rn.stableStringify=pu;var fi="[...]",du="[Circular]",yr=[],mr=[];function fu(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function Rn(e,t,r,n){typeof n>"u"&&(n=fu()),no(e,"",0,[],void 0,0,n);var i;try{mr.length===0?i=JSON.stringify(e,t,r):i=JSON.stringify(e,gu(t),r)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;yr.length!==0;){var s=yr.pop();s.length===4?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}}return i}function Kr(e,t,r,n){var i=Object.getOwnPropertyDescriptor(n,r);i.get!==void 0?i.configurable?(Object.defineProperty(n,r,{value:e}),yr.push([n,r,t,i])):mr.push([t,r,e]):(n[r]=e,yr.push([n,r,t]))}function no(e,t,r,n,i,s,a){s+=1;var c;if(typeof e=="object"&&e!==null){for(c=0;c<n.length;c++)if(n[c]===e){Kr(du,e,t,i);return}if(typeof a.depthLimit<"u"&&s>a.depthLimit){Kr(fi,e,t,i);return}if(typeof a.edgesLimit<"u"&&r+1>a.edgesLimit){Kr(fi,e,t,i);return}if(n.push(e),Array.isArray(e))for(c=0;c<e.length;c++)no(e[c],c,c,n,e,s,a);else{var h=Object.keys(e);for(c=0;c<h.length;c++){var d=h[c];no(e[d],d,c,n,e,s,a)}}n.pop()}}function bb(e,t){return e<t?-1:e>t?1:0}function pu(e,t,r,n){typeof n>"u"&&(n=fu());var i=io(e,"",0,[],void 0,0,n)||e,s;try{mr.length===0?s=JSON.stringify(i,t,r):s=JSON.stringify(i,gu(t),r)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;yr.length!==0;){var a=yr.pop();a.length===4?Object.defineProperty(a[0],a[1],a[3]):a[0][a[1]]=a[2]}}return s}function io(e,t,r,n,i,s,a){s+=1;var c;if(typeof e=="object"&&e!==null){for(c=0;c<n.length;c++)if(n[c]===e){Kr(du,e,t,i);return}try{if(typeof e.toJSON=="function")return}catch{return}if(typeof a.depthLimit<"u"&&s>a.depthLimit){Kr(fi,e,t,i);return}if(typeof a.edgesLimit<"u"&&r+1>a.edgesLimit){Kr(fi,e,t,i);return}if(n.push(e),Array.isArray(e))for(c=0;c<e.length;c++)io(e[c],c,c,n,e,s,a);else{var h={},d=Object.keys(e).sort(bb);for(c=0;c<d.length;c++){var p=d[c];io(e[p],p,c,n,e,s,a),h[p]=e[p]}if(typeof i<"u")yr.push([i,t,e]),i[t]=h;else return h}n.pop()}}function gu(e){return e=typeof e<"u"?e:function(t,r){return r},function(t,r){if(mr.length>0)for(var n=0;n<mr.length;n++){var i=mr[n];if(i[1]===t&&i[0]===r){r=i[2],mr.splice(n,1);break}}return e.call(this,t,r)}}Object.defineProperty(Vt,"__esModule",{value:!0});Vt.EthereumProviderError=Vt.EthereumRpcError=void 0;const vb=mb;class mu extends Error{constructor(t,r,n){if(!Number.isInteger(t))throw new Error('"code" must be an integer.');if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string.');super(r),this.code=t,n!==void 0&&(this.data=n)}serialize(){const t={code:this.code,message:this.message};return this.data!==void 0&&(t.data=this.data),this.stack&&(t.stack=this.stack),t}toString(){return vb.default(this.serialize(),_b,2)}}Vt.EthereumRpcError=mu;class wb extends mu{constructor(t,r,n){if(!yb(t))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(t,r,n)}}Vt.EthereumProviderError=wb;function yb(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}function _b(e,t){if(t!=="[Circular]")return t}var Fo={},qt={};Object.defineProperty(qt,"__esModule",{value:!0});qt.errorValues=qt.errorCodes=void 0;qt.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}};qt.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.serializeError=e.isValidCode=e.getMessageFromCode=e.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const t=qt,r=Vt,n=t.errorCodes.rpc.internal,i="Unspecified error message. This is a bug, please report it.",s={code:n,message:a(n)};e.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function a(y,k=i){if(Number.isInteger(y)){const N=y.toString();if(w(t.errorValues,N))return t.errorValues[N].message;if(d(y))return e.JSON_RPC_SERVER_ERROR_MESSAGE}return k}e.getMessageFromCode=a;function c(y){if(!Number.isInteger(y))return!1;const k=y.toString();return!!(t.errorValues[k]||d(y))}e.isValidCode=c;function h(y,{fallbackError:k=s,shouldIncludeStack:N=!1}={}){var P,L;if(!k||!Number.isInteger(k.code)||typeof k.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(y instanceof r.EthereumRpcError)return y.serialize();const M={};if(y&&typeof y=="object"&&!Array.isArray(y)&&w(y,"code")&&c(y.code)){const T=y;M.code=T.code,T.message&&typeof T.message=="string"?(M.message=T.message,w(T,"data")&&(M.data=T.data)):(M.message=a(M.code),M.data={originalError:p(y)})}else{M.code=k.code;const T=(P=y)===null||P===void 0?void 0:P.message;M.message=T&&typeof T=="string"?T:k.message,M.data={originalError:p(y)}}const x=(L=y)===null||L===void 0?void 0:L.stack;return N&&y&&x&&typeof x=="string"&&(M.stack=x),M}e.serializeError=h;function d(y){return y>=-32099&&y<=-32e3}function p(y){return y&&typeof y=="object"&&!Array.isArray(y)?Object.assign({},y):y}function w(y,k){return Object.prototype.hasOwnProperty.call(y,k)}})(Fo);var as={};Object.defineProperty(as,"__esModule",{value:!0});as.ethErrors=void 0;const jo=Vt,bu=Fo,Xe=qt;as.ethErrors={rpc:{parse:e=>ut(Xe.errorCodes.rpc.parse,e),invalidRequest:e=>ut(Xe.errorCodes.rpc.invalidRequest,e),invalidParams:e=>ut(Xe.errorCodes.rpc.invalidParams,e),methodNotFound:e=>ut(Xe.errorCodes.rpc.methodNotFound,e),internal:e=>ut(Xe.errorCodes.rpc.internal,e),server:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return ut(t,e)},invalidInput:e=>ut(Xe.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>ut(Xe.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>ut(Xe.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>ut(Xe.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>ut(Xe.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>ut(Xe.errorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>bn(Xe.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>bn(Xe.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>bn(Xe.errorCodes.provider.unsupportedMethod,e),disconnected:e=>bn(Xe.errorCodes.provider.disconnected,e),chainDisconnected:e=>bn(Xe.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:t,message:r,data:n}=e;if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string');return new jo.EthereumProviderError(t,r,n)}}};function ut(e,t){const[r,n]=vu(t);return new jo.EthereumRpcError(e,r||bu.getMessageFromCode(e),n)}function bn(e,t){const[r,n]=vu(t);return new jo.EthereumProviderError(e,r||bu.getMessageFromCode(e),n)}function vu(e){if(e){if(typeof e=="string")return[e];if(typeof e=="object"&&!Array.isArray(e)){const{message:t,data:r}=e;if(t&&typeof t!="string")throw new Error("Must specify string message.");return[t||void 0,r]}}return[]}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getMessageFromCode=e.serializeError=e.EthereumProviderError=e.EthereumRpcError=e.ethErrors=e.errorCodes=void 0;const t=Vt;Object.defineProperty(e,"EthereumRpcError",{enumerable:!0,get:function(){return t.EthereumRpcError}}),Object.defineProperty(e,"EthereumProviderError",{enumerable:!0,get:function(){return t.EthereumProviderError}});const r=Fo;Object.defineProperty(e,"serializeError",{enumerable:!0,get:function(){return r.serializeError}}),Object.defineProperty(e,"getMessageFromCode",{enumerable:!0,get:function(){return r.getMessageFromCode}});const n=as;Object.defineProperty(e,"ethErrors",{enumerable:!0,get:function(){return n.ethErrors}});const i=qt;Object.defineProperty(e,"errorCodes",{enumerable:!0,get:function(){return i.errorCodes}})})(hu);var Eb=G&&G.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Gn,"__esModule",{value:!0});Gn.JsonRpcEngine=void 0;const Sb=Eb(Do),ht=hu;class Ot extends Sb.default{constructor(){super(),this._middleware=[]}push(t){this._middleware.push(t)}handle(t,r){if(r&&typeof r!="function")throw new Error('"callback" must be a function if provided.');return Array.isArray(t)?r?this._handleBatch(t,r):this._handleBatch(t):r?this._handle(t,r):this._promiseHandle(t)}asMiddleware(){return async(t,r,n,i)=>{try{const[s,a,c]=await Ot._runAllMiddleware(t,r,this._middleware);return a?(await Ot._runReturnHandlers(c),i(s)):n(async h=>{try{await Ot._runReturnHandlers(c)}catch(d){return h(d)}return h()})}catch(s){return i(s)}}}async _handleBatch(t,r){try{const n=await Promise.all(t.map(this._promiseHandle.bind(this)));return r?r(null,n):n}catch(n){if(r)return r(n);throw n}}_promiseHandle(t){return new Promise(r=>{this._handle(t,(n,i)=>{r(i)})})}async _handle(t,r){if(!t||Array.isArray(t)||typeof t!="object"){const a=new ht.EthereumRpcError(ht.errorCodes.rpc.invalidRequest,`Requests must be plain objects. Received: ${typeof t}`,{request:t});return r(a,{id:void 0,jsonrpc:"2.0",error:a})}if(typeof t.method!="string"){const a=new ht.EthereumRpcError(ht.errorCodes.rpc.invalidRequest,`Must specify a string method. Received: ${typeof t.method}`,{request:t});return r(a,{id:t.id,jsonrpc:"2.0",error:a})}const n=Object.assign({},t),i={id:n.id,jsonrpc:n.jsonrpc};let s=null;try{await this._processRequest(n,i)}catch(a){s=a}return s&&(delete i.result,i.error||(i.error=ht.serializeError(s))),r(s,i)}async _processRequest(t,r){const[n,i,s]=await Ot._runAllMiddleware(t,r,this._middleware);if(Ot._checkForCompletion(t,r,i),await Ot._runReturnHandlers(s),n)throw n}static async _runAllMiddleware(t,r,n){const i=[];let s=null,a=!1;for(const c of n)if([s,a]=await Ot._runMiddleware(t,r,c,i),a)break;return[s,a,i.reverse()]}static _runMiddleware(t,r,n,i){return new Promise(s=>{const a=h=>{const d=h||r.error;d&&(r.error=ht.serializeError(d)),s([d,!0])},c=h=>{r.error?a(r.error):(h&&(typeof h!="function"&&a(new ht.EthereumRpcError(ht.errorCodes.rpc.internal,`JsonRpcEngine: "next" return handlers must be functions. Received "${typeof h}" for request:
${zs(t)}`,{request:t})),i.push(h)),s([null,!1]))};try{n(t,r,c,a)}catch(h){a(h)}})}static async _runReturnHandlers(t){for(const r of t)await new Promise((n,i)=>{r(s=>s?i(s):n())})}static _checkForCompletion(t,r,n){if(!("result"in r)&&!("error"in r))throw new ht.EthereumRpcError(ht.errorCodes.rpc.internal,`JsonRpcEngine: Response has no error or result for request:
${zs(t)}`,{request:t});if(!n)throw new ht.EthereumRpcError(ht.errorCodes.rpc.internal,`JsonRpcEngine: Nothing ended request:
${zs(t)}`,{request:t})}}Gn.JsonRpcEngine=Ot;function zs(e){return JSON.stringify(e,null,2)}var cs={};Object.defineProperty(cs,"__esModule",{value:!0});cs.mergeMiddleware=void 0;const Rb=Gn;function Mb(e){const t=new Rb.JsonRpcEngine;return e.forEach(r=>t.push(r)),t.asMiddleware()}cs.mergeMiddleware=Mb;(function(e){var t=G&&G.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s),Object.defineProperty(n,a,{enumerable:!0,get:function(){return i[s]}})}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),r=G&&G.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&t(i,n,s)};Object.defineProperty(e,"__esModule",{value:!0}),r(is,e),r(ss,e),r(os,e),r(zn,e),r(Gn,e),r(cs,e)})($o);var wu={},Ho={};const Uo=Mn(Ru);var ls={};Object.defineProperty(ls,"__esModule",{value:!0});var pc=Uo,Cb=function(){function e(t){if(this._maxConcurrency=t,this._queue=[],t<=0)throw new Error("semaphore must be initialized to a positive value");this._value=t}return e.prototype.acquire=function(){var t=this,r=this.isLocked(),n=new Promise(function(i){return t._queue.push(i)});return r||this._dispatch(),n},e.prototype.runExclusive=function(t){return pc.__awaiter(this,void 0,void 0,function(){var r,n,i;return pc.__generator(this,function(s){switch(s.label){case 0:return[4,this.acquire()];case 1:r=s.sent(),n=r[0],i=r[1],s.label=2;case 2:return s.trys.push([2,,4,5]),[4,t(n)];case 3:return[2,s.sent()];case 4:return i(),[7];case 5:return[2]}})})},e.prototype.isLocked=function(){return this._value<=0},e.prototype.release=function(){if(this._maxConcurrency>1)throw new Error("this method is unavailabel on semaphores with concurrency > 1; use the scoped release returned by acquire instead");if(this._currentReleaser){var t=this._currentReleaser;this._currentReleaser=void 0,t()}},e.prototype._dispatch=function(){var t=this,r=this._queue.shift();if(r){var n=!1;this._currentReleaser=function(){n||(n=!0,t._value++,t._dispatch())},r([this._value--,this._currentReleaser])}},e}();ls.default=Cb;Object.defineProperty(Ho,"__esModule",{value:!0});var gc=Uo,kb=ls,Ib=function(){function e(){this._semaphore=new kb.default(1)}return e.prototype.acquire=function(){return gc.__awaiter(this,void 0,void 0,function(){var t,r;return gc.__generator(this,function(n){switch(n.label){case 0:return[4,this._semaphore.acquire()];case 1:return t=n.sent(),r=t[1],[2,r]}})})},e.prototype.runExclusive=function(t){return this._semaphore.runExclusive(function(){return t()})},e.prototype.isLocked=function(){return this._semaphore.isLocked()},e.prototype.release=function(){this._semaphore.release()},e}();Ho.default=Ib;var us={};Object.defineProperty(us,"__esModule",{value:!0});us.withTimeout=void 0;var oi=Uo;function xb(e,t,r){var n=this;return r===void 0&&(r=new Error("timeout")),{acquire:function(){return new Promise(function(i,s){return oi.__awaiter(n,void 0,void 0,function(){var a,c,h;return oi.__generator(this,function(d){switch(d.label){case 0:return a=!1,setTimeout(function(){a=!0,s(r)},t),[4,e.acquire()];case 1:return c=d.sent(),a?(h=Array.isArray(c)?c[1]:c,h()):i(c),[2]}})})})},runExclusive:function(i){return oi.__awaiter(this,void 0,void 0,function(){var s,a;return oi.__generator(this,function(c){switch(c.label){case 0:s=function(){},c.label=1;case 1:return c.trys.push([1,,7,8]),[4,this.acquire()];case 2:return a=c.sent(),Array.isArray(a)?(s=a[1],[4,i(a[0])]):[3,4];case 3:return[2,c.sent()];case 4:return s=a,[4,i()];case 5:return[2,c.sent()];case 6:return[3,8];case 7:return s(),[7];case 8:return[2]}})})},release:function(){e.release()},isLocked:function(){return e.isLocked()}}}us.withTimeout=xb;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.withTimeout=e.Semaphore=e.Mutex=void 0;var t=Ho;Object.defineProperty(e,"Mutex",{enumerable:!0,get:function(){return t.default}});var r=ls;Object.defineProperty(e,"Semaphore",{enumerable:!0,get:function(){return r.default}});var n=us;Object.defineProperty(e,"withTimeout",{enumerable:!0,get:function(){return n.withTimeout}})})(wu);var Ab=Tb,Nb=Object.prototype.hasOwnProperty;function Tb(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var n in r)Nb.call(r,n)&&(e[n]=r[n])}return e}const Lb=Ab,Ob=wo();var Pb=Y;function Y(e){const t=this;t.currentProvider=e}Y.prototype.getBalance=Jn(2,"eth_getBalance");Y.prototype.getCode=Jn(2,"eth_getCode");Y.prototype.getTransactionCount=Jn(2,"eth_getTransactionCount");Y.prototype.getStorageAt=Jn(3,"eth_getStorageAt");Y.prototype.call=Jn(2,"eth_call");Y.prototype.protocolVersion=re("eth_protocolVersion");Y.prototype.syncing=re("eth_syncing");Y.prototype.coinbase=re("eth_coinbase");Y.prototype.mining=re("eth_mining");Y.prototype.hashrate=re("eth_hashrate");Y.prototype.gasPrice=re("eth_gasPrice");Y.prototype.accounts=re("eth_accounts");Y.prototype.blockNumber=re("eth_blockNumber");Y.prototype.getBlockTransactionCountByHash=re("eth_getBlockTransactionCountByHash");Y.prototype.getBlockTransactionCountByNumber=re("eth_getBlockTransactionCountByNumber");Y.prototype.getUncleCountByBlockHash=re("eth_getUncleCountByBlockHash");Y.prototype.getUncleCountByBlockNumber=re("eth_getUncleCountByBlockNumber");Y.prototype.sign=re("eth_sign");Y.prototype.sendTransaction=re("eth_sendTransaction");Y.prototype.sendRawTransaction=re("eth_sendRawTransaction");Y.prototype.estimateGas=re("eth_estimateGas");Y.prototype.getBlockByHash=re("eth_getBlockByHash");Y.prototype.getBlockByNumber=re("eth_getBlockByNumber");Y.prototype.getTransactionByHash=re("eth_getTransactionByHash");Y.prototype.getTransactionByBlockHashAndIndex=re("eth_getTransactionByBlockHashAndIndex");Y.prototype.getTransactionByBlockNumberAndIndex=re("eth_getTransactionByBlockNumberAndIndex");Y.prototype.getTransactionReceipt=re("eth_getTransactionReceipt");Y.prototype.getUncleByBlockHashAndIndex=re("eth_getUncleByBlockHashAndIndex");Y.prototype.getUncleByBlockNumberAndIndex=re("eth_getUncleByBlockNumberAndIndex");Y.prototype.getCompilers=re("eth_getCompilers");Y.prototype.compileLLL=re("eth_compileLLL");Y.prototype.compileSolidity=re("eth_compileSolidity");Y.prototype.compileSerpent=re("eth_compileSerpent");Y.prototype.newFilter=re("eth_newFilter");Y.prototype.newBlockFilter=re("eth_newBlockFilter");Y.prototype.newPendingTransactionFilter=re("eth_newPendingTransactionFilter");Y.prototype.uninstallFilter=re("eth_uninstallFilter");Y.prototype.getFilterChanges=re("eth_getFilterChanges");Y.prototype.getFilterLogs=re("eth_getFilterLogs");Y.prototype.getLogs=re("eth_getLogs");Y.prototype.getWork=re("eth_getWork");Y.prototype.submitWork=re("eth_submitWork");Y.prototype.submitHashrate=re("eth_submitHashrate");Y.prototype.sendAsync=function(e,t){this.currentProvider.sendAsync(Bb(e),function(n,i){if(!n&&i.error&&(n=new Error("EthQuery - RPC Error - "+i.error.message)),n)return t(n);t(null,i.result)})};function re(e){return function(){const t=this;var r=[].slice.call(arguments),n=r.pop();t.sendAsync({method:e,params:r},n)}}function Jn(e,t){return function(){const r=this;var n=[].slice.call(arguments),i=n.pop();n.length<e&&n.push("latest"),r.sendAsync({method:t,params:n},i)}}function Bb(e){return Lb({id:Ob(),jsonrpc:"2.0",params:[]},e)}const mc=(e,t,r,n)=>function(...i){const s=t.promiseModule;return new s((a,c)=>{t.multiArgs?i.push((...d)=>{t.errorFirst?d[0]?c(d):(d.shift(),a(d)):a(d)}):t.errorFirst?i.push((d,p)=>{d?c(d):a(p)}):i.push(a),Reflect.apply(e,this===r?n:this,i)})},bc=new WeakMap;var $b=(e,t)=>{t={exclude:[/.+(?:Sync|Stream)$/],errorFirst:!0,promiseModule:Promise,...t};const r=typeof e;if(!(e!==null&&(r==="object"||r==="function")))throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${e===null?"null":r}\``);const n=(a,c)=>{let h=bc.get(a);if(h||(h={},bc.set(a,h)),c in h)return h[c];const d=N=>typeof N=="string"||typeof c=="symbol"?c===N:N.test(c),p=Reflect.getOwnPropertyDescriptor(a,c),w=p===void 0||p.writable||p.configurable,k=(t.include?t.include.some(d):!t.exclude.some(d))&&w;return h[c]=k,k},i=new WeakMap,s=new Proxy(e,{apply(a,c,h){const d=i.get(a);if(d)return Reflect.apply(d,c,h);const p=t.excludeMain?a:mc(a,t,s,a);return i.set(a,p),Reflect.apply(p,c,h)},get(a,c){const h=a[c];if(!n(a,c)||h===Function.prototype[c])return h;const d=i.get(h);if(d)return d;if(typeof h=="function"){const p=mc(h,t,s,a);return i.set(h,p),p}return h}});return s};const Db=Hn.default;let Fb=class extends Db{constructor(){super(),this.updates=[]}async initialize(){}async update(){throw new Error("BaseFilter - no update method specified")}addResults(t){this.updates=this.updates.concat(t),t.forEach(r=>this.emit("update",r))}addInitialResults(t){}getChangesAndClear(){const t=this.updates;return this.updates=[],t}};var Wo=Fb;const jb=Wo;let Hb=class extends jb{constructor(){super(),this.allResults=[]}async update(){throw new Error("BaseFilterWithHistory - no update method specified")}addResults(t){this.allResults=this.allResults.concat(t),super.addResults(t)}addInitialResults(t){this.allResults=this.allResults.concat(t),super.addInitialResults(t)}getAllResults(){return this.allResults}};var Ub=Hb,Zn={minBlockRef:Wb,maxBlockRef:Vb,sortBlockRefs:Vo,bnToHex:qb,blockRefIsNumber:zb,hexToInt:pi,incrementHexInt:Gb,intToHex:yu,unsafeRandomBytes:Jb};function Wb(...e){return Vo(e)[0]}function Vb(...e){const t=Vo(e);return t[t.length-1]}function Vo(e){return e.sort((t,r)=>t==="latest"||r==="earliest"?1:r==="latest"||t==="earliest"?-1:pi(t)-pi(r))}function qb(e){return"0x"+e.toString(16)}function zb(e){return e&&!["earliest","latest","pending"].includes(e)}function pi(e){return e==null?e:Number.parseInt(e,16)}function Gb(e){if(e==null)return e;const t=pi(e);return yu(t+1)}function yu(e){if(e==null)return e;let t=e.toString(16);return t.length%2&&(t="0"+t),"0x"+t}function Jb(e){let t="0x";for(let r=0;r<e;r++)t+=vc(),t+=vc();return t}function vc(){return Math.floor(Math.random()*16).toString(16)}const Zb=Pb,Kb=$b,Qb=Ub,{bnToHex:hw,hexToInt:ai,incrementHexInt:Yb,minBlockRef:Xb,blockRefIsNumber:ev}=Zn;let tv=class extends Qb{constructor({provider:t,params:r}){super(),this.type="log",this.ethQuery=new Zb(t),this.params=Object.assign({fromBlock:"latest",toBlock:"latest",address:void 0,topics:[]},r),this.params.address&&(Array.isArray(this.params.address)||(this.params.address=[this.params.address]),this.params.address=this.params.address.map(n=>n.toLowerCase()))}async initialize({currentBlock:t}){let r=this.params.fromBlock;["latest","pending"].includes(r)&&(r=t),r==="earliest"&&(r="0x0"),this.params.fromBlock=r;const n=Xb(this.params.toBlock,t),i=Object.assign({},this.params,{toBlock:n}),s=await this._fetchLogs(i);this.addInitialResults(s)}async update({oldBlock:t,newBlock:r}){const n=r;let i;t?i=Yb(t):i=r;const s=Object.assign({},this.params,{fromBlock:i,toBlock:n}),c=(await this._fetchLogs(s)).filter(h=>this.matchLog(h));this.addResults(c)}async _fetchLogs(t){return await Kb(n=>this.ethQuery.getLogs(t,n))()}matchLog(t){if(ai(this.params.fromBlock)>=ai(t.blockNumber)||ev(this.params.toBlock)&&ai(this.params.toBlock)<=ai(t.blockNumber))return!1;const r=t.address&&t.address.toLowerCase();return this.params.address&&r&&!this.params.address.includes(r)?!1:this.params.topics.every((i,s)=>{let a=t.topics[s];if(!a)return!1;a=a.toLowerCase();let c=Array.isArray(i)?i:[i];return c.includes(null)?!0:(c=c.map(p=>p.toLowerCase()),c.includes(a))})}};var rv=tv,qo=nv;async function nv({provider:e,fromBlock:t,toBlock:r}){t||(t=r);const n=wc(t),s=wc(r)-n+1,a=Array(s).fill().map((h,d)=>n+d).map(iv);let c=await Promise.all(a.map(h=>ov(e,"eth_getBlockByNumber",[h,!1])));return c=c.filter(h=>h!==null),c}function wc(e){return e==null?e:Number.parseInt(e,16)}function iv(e){return e==null?e:"0x"+e.toString(16)}function sv(e,t){return new Promise((r,n)=>{e.sendAsync(t,(i,s)=>{i?n(i):s.error?n(s.error):s.result?r(s.result):n(new Error("Result was empty"))})})}async function ov(e,t,r){for(let n=0;n<3;n++)try{return await sv(e,{id:1,jsonrpc:"2.0",method:t,params:r})}catch(i){console.error(`provider.sendAsync failed: ${i.stack||i.message||i}`)}return null}const av=Wo,cv=qo,{incrementHexInt:lv}=Zn;let uv=class extends av{constructor({provider:t,params:r}){super(),this.type="block",this.provider=t}async update({oldBlock:t,newBlock:r}){const n=r,i=lv(t),a=(await cv({provider:this.provider,fromBlock:i,toBlock:n})).map(c=>c.hash);this.addResults(a)}};var hv=uv;const dv=Wo,fv=qo,{incrementHexInt:pv}=Zn;let gv=class extends dv{constructor({provider:t}){super(),this.type="tx",this.provider=t}async update({oldBlock:t}){const r=t,n=pv(t),i=await fv({provider:this.provider,fromBlock:n,toBlock:r}),s=[];for(const a of i)s.push(...a.transactions);this.addResults(s)}};var mv=gv;const bv=wu.Mutex,{createAsyncMiddleware:vv,createScaffoldMiddleware:wv}=$o,yv=rv,_v=hv,Ev=mv,{intToHex:_u,hexToInt:Gs}=Zn;var Sv=Rv;function Rv({blockTracker:e,provider:t}){let r=0,n={};const i=new bv,s=Mv({mutex:i}),a=wv({eth_newFilter:s(Js(h)),eth_newBlockFilter:s(Js(d)),eth_newPendingTransactionFilter:s(Js(p)),eth_uninstallFilter:s(ui(k)),eth_getFilterChanges:s(ui(w)),eth_getFilterLogs:s(ui(y))}),c=async({oldBlock:x,newBlock:T})=>{if(n.length===0)return;const $=await i.acquire();try{await Promise.all(Wr(n).map(async O=>{try{await O.update({oldBlock:x,newBlock:T})}catch(D){console.error(D)}}))}catch(O){console.error(O)}$()};return a.newLogFilter=h,a.newBlockFilter=d,a.newPendingTransactionFilter=p,a.uninstallFilter=k,a.getFilterChanges=w,a.getFilterLogs=y,a.destroy=()=>{L()},a;async function h(x){const T=new yv({provider:t,params:x});return await N(T),T}async function d(){const x=new _v({provider:t});return await N(x),x}async function p(){const x=new Ev({provider:t});return await N(x),x}async function w(x){const T=Gs(x),$=n[T];if(!$)throw new Error(`No filter for index "${T}"`);return $.getChangesAndClear()}async function y(x){const T=Gs(x),$=n[T];if(!$)throw new Error(`No filter for index "${T}"`);let O=[];return $.type==="log"&&(O=$.getAllResults()),O}async function k(x){const T=Gs(x),O=!!n[T];return O&&await P(T),O}async function N(x){const T=Wr(n).length,$=await e.getLatestBlock();await x.initialize({currentBlock:$}),r++,n[r]=x,x.id=r,x.idHex=_u(r);const O=Wr(n).length;return M({prevFilterCount:T,newFilterCount:O}),r}async function P(x){const T=Wr(n).length;delete n[x];const $=Wr(n).length;M({prevFilterCount:T,newFilterCount:$})}async function L(){const x=Wr(n).length;n={},M({prevFilterCount:x,newFilterCount:0})}function M({prevFilterCount:x,newFilterCount:T}){if(x===0&&T>0){e.on("sync",c);return}if(x>0&&T===0){e.removeListener("sync",c);return}}}function Js(e){return ui(async(...t)=>{const r=await e(...t);return _u(r.id)})}function ui(e){return vv(async(t,r)=>{const n=await e.apply(null,t.params);r.result=n})}function Mv({mutex:e}){return t=>async(r,n,i,s)=>{(await e.acquire())(),t(r,n,i,s)}}function Wr(e,t){const r=[];for(let n in e)r.push(e[n]);return r}const Cv=Hn.default,{createAsyncMiddleware:yc,createScaffoldMiddleware:kv}=$o,Iv=Sv,{unsafeRandomBytes:xv,incrementHexInt:Av}=Zn,Nv=qo;var Tv=Lv;function Lv({blockTracker:e,provider:t}){const r={},n=Iv({blockTracker:e,provider:t});let i=!1;const s=new Cv,a=kv({eth_subscribe:yc(c),eth_unsubscribe:yc(h)});return a.destroy=p,{events:s,middleware:a};async function c(w,y){if(i)throw new Error("SubscriptionManager - attempting to use after destroying");const k=w.params[0],N=xv(16);let P;switch(k){case"newHeads":P=L({subId:N});break;case"logs":const x=w.params[1],T=await n.newLogFilter(x);P=M({subId:N,filter:T});break;default:throw new Error(`SubscriptionManager - unsupported subscription type "${k}"`)}r[N]=P,y.result=N;return;function L({subId:x}){const T={type:k,destroy:async()=>{e.removeListener("sync",T.update)},update:async({oldBlock:$,newBlock:O})=>{const D=O,J=Av($);(await Nv({provider:t,fromBlock:J,toBlock:D})).map(Ov).filter(ne=>ne!==null).forEach(ne=>{d(x,ne)})}};return e.on("sync",T.update),T}function M({subId:x,filter:T}){return T.on("update",O=>d(x,O)),{type:k,destroy:async()=>await n.uninstallFilter(T.idHex)}}}async function h(w,y){if(i)throw new Error("SubscriptionManager - attempting to use after destroying");const k=w.params[0],N=r[k];if(!N){y.result=!1;return}delete r[k],await N.destroy(),y.result=!0}function d(w,y){s.emit("notification",{jsonrpc:"2.0",method:"eth_subscription",params:{subscription:w,result:y}})}function p(){s.removeAllListeners();for(const w in r)r[w].destroy(),delete r[w];i=!0}}function Ov(e){return e==null?null:{hash:e.hash,parentHash:e.parentHash,sha3Uncles:e.sha3Uncles,miner:e.miner,stateRoot:e.stateRoot,transactionsRoot:e.transactionsRoot,receiptsRoot:e.receiptsRoot,logsBloom:e.logsBloom,difficulty:e.difficulty,number:e.number,gasLimit:e.gasLimit,gasUsed:e.gasUsed,nonce:e.nonce,mixHash:e.mixHash,timestamp:e.timestamp,extraData:e.extraData}}Object.defineProperty(Gi,"__esModule",{value:!0});Gi.SubscriptionManager=void 0;const Pv=Cl,Bv=Tv,_c=()=>{};class $v{constructor(t){const r=new Pv.PollingBlockTracker({provider:t,pollingInterval:15e3,setSkipCacheFlag:!0}),{events:n,middleware:i}=Bv({blockTracker:r,provider:t});this.events=n,this.subscriptionMiddleware=i}async handleRequest(t){const r={};return await this.subscriptionMiddleware(t,r,_c,_c),r}destroy(){this.subscriptionMiddleware.destroy()}}Gi.SubscriptionManager=$v;var Eu=G&&G.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Qr,"__esModule",{value:!0});Qr.CoinbaseWalletProvider=void 0;const Dv=Eu(wi),Fv=Mu,se=Cn,te=q,jv=An,Ec=dt,ci=cn,ot=sn,Zs=Eu(h0),vn=an,Hv=tn,Uv=Gi,Sc="DefaultChainId",Rc="DefaultJsonRpcUrl";class Wv extends Fv.EventEmitter{constructor(t){var r,n;super(),this._filterPolyfill=new Hv.FilterPolyfill(this),this._subscriptionManager=new Uv.SubscriptionManager(this),this._relay=null,this._addresses=[],this.hasMadeFirstChainChangedEmission=!1,this.setProviderInfo=this.setProviderInfo.bind(this),this.updateProviderInfo=this.updateProviderInfo.bind(this),this.getChainId=this.getChainId.bind(this),this.setAppInfo=this.setAppInfo.bind(this),this.enable=this.enable.bind(this),this.close=this.close.bind(this),this.send=this.send.bind(this),this.sendAsync=this.sendAsync.bind(this),this.request=this.request.bind(this),this._setAddresses=this._setAddresses.bind(this),this.scanQRCode=this.scanQRCode.bind(this),this.genericRequest=this.genericRequest.bind(this),this._chainIdFromOpts=t.chainId,this._jsonRpcUrlFromOpts=t.jsonRpcUrl,this._overrideIsMetaMask=t.overrideIsMetaMask,this._relayProvider=t.relayProvider,this._storage=t.storage,this._relayEventManager=t.relayEventManager,this.diagnostic=t.diagnosticLogger,this.reloadOnDisconnect=!0,this.isCoinbaseWallet=(r=t.overrideIsCoinbaseWallet)!==null&&r!==void 0?r:!0,this.isCoinbaseBrowser=(n=t.overrideIsCoinbaseBrowser)!==null&&n!==void 0?n:!1,this.qrUrl=t.qrUrl;const i=this.getChainId(),s=(0,te.prepend0x)(i.toString(16));this.emit("connect",{chainIdStr:s});const a=this._storage.getItem(Ec.LOCAL_STORAGE_ADDRESSES_KEY);if(a){const c=a.split(" ");c[0]!==""&&(this._addresses=c.map(h=>(0,te.ensureAddressString)(h)),this.emit("accountsChanged",c))}this._subscriptionManager.events.on("notification",c=>{this.emit("message",{type:c.method,data:c.params})}),this._isAuthorized()&&this.initializeRelay(),window.addEventListener("message",c=>{var h;if(!(c.origin!==location.origin||c.source!==window)&&c.data.type==="walletLinkMessage"&&c.data.data.action==="dappChainSwitched"){const d=c.data.data.chainId,p=(h=c.data.data.jsonRpcUrl)!==null&&h!==void 0?h:this.jsonRpcUrl;this.updateProviderInfo(p,Number(d))}})}get selectedAddress(){return this._addresses[0]||void 0}get networkVersion(){return this.getChainId().toString(10)}get chainId(){return(0,te.prepend0x)(this.getChainId().toString(16))}get isWalletLink(){return!0}get isMetaMask(){return this._overrideIsMetaMask}get host(){return this.jsonRpcUrl}get connected(){return!0}isConnected(){return!0}get jsonRpcUrl(){var t;return(t=this._storage.getItem(Rc))!==null&&t!==void 0?t:this._jsonRpcUrlFromOpts}set jsonRpcUrl(t){this._storage.setItem(Rc,t)}disableReloadOnDisconnect(){this.reloadOnDisconnect=!1}setProviderInfo(t,r){this.isCoinbaseBrowser||(this._chainIdFromOpts=r,this._jsonRpcUrlFromOpts=t),this.updateProviderInfo(this.jsonRpcUrl,this.getChainId())}updateProviderInfo(t,r){this.jsonRpcUrl=t;const n=this.getChainId();this._storage.setItem(Sc,r.toString(10)),((0,te.ensureIntNumber)(r)!==n||!this.hasMadeFirstChainChangedEmission)&&(this.emit("chainChanged",this.getChainId()),this.hasMadeFirstChainChangedEmission=!0)}async watchAsset(t,r,n,i,s,a){const h=await(await this.initializeRelay()).watchAsset(t,r,n,i,s,a==null?void 0:a.toString()).promise;return(0,ot.isErrorResponse)(h)?!1:!!h.result}async addEthereumChain(t,r,n,i,s,a){var c,h;if((0,te.ensureIntNumber)(t)===this.getChainId())return!1;const d=await this.initializeRelay(),p=d.inlineAddEthereumChain(t.toString());!this._isAuthorized()&&!p&&await d.requestEthereumAccounts().promise;const w=await d.addEthereumChain(t.toString(),r,s,n,i,a).promise;return(0,ot.isErrorResponse)(w)?!1:(((c=w.result)===null||c===void 0?void 0:c.isApproved)===!0&&this.updateProviderInfo(r[0],t),((h=w.result)===null||h===void 0?void 0:h.isApproved)===!0)}async switchEthereumChain(t){const n=await(await this.initializeRelay()).switchEthereumChain(t.toString(10),this.selectedAddress||void 0).promise;if((0,ot.isErrorResponse)(n)){if(!n.errorCode)return;throw n.errorCode===se.standardErrorCodes.provider.unsupportedChain?se.standardErrors.provider.unsupportedChain():se.standardErrors.provider.custom({message:n.errorMessage,code:n.errorCode})}const i=n.result;i.isApproved&&i.rpcUrl.length>0&&this.updateProviderInfo(i.rpcUrl,t)}setAppInfo(t,r){this.initializeRelay().then(n=>n.setAppInfo(t,r))}async enable(){var t;return(t=this.diagnostic)===null||t===void 0||t.log(vn.EVENTS.ETH_ACCOUNTS_STATE,{method:"provider::enable",addresses_length:this._addresses.length,sessionIdHash:this._relay?ci.Session.hash(this._relay.session.id):void 0}),this._isAuthorized()?[...this._addresses]:await this.send("eth_requestAccounts")}async close(){(await this.initializeRelay()).resetAndReload()}send(t,r){try{const n=this._send(t,r);if(n instanceof Promise)return n.catch(i=>{throw(0,se.serializeError)(i,t)})}catch(n){throw(0,se.serializeError)(n,t)}}_send(t,r){if(typeof t=="string"){const i=t,s=Array.isArray(r)?r:r!==void 0?[r]:[],a={jsonrpc:"2.0",id:0,method:i,params:s};return this._sendRequestAsync(a).then(c=>c.result)}if(typeof r=="function"){const i=t,s=r;return this._sendAsync(i,s)}if(Array.isArray(t))return t.map(s=>this._sendRequest(s));const n=t;return this._sendRequest(n)}async sendAsync(t,r){try{return this._sendAsync(t,r).catch(n=>{throw(0,se.serializeError)(n,t)})}catch(n){return Promise.reject((0,se.serializeError)(n,t))}}async _sendAsync(t,r){if(typeof r!="function")throw new Error("callback is required");if(Array.isArray(t)){const i=r;this._sendMultipleRequestsAsync(t).then(s=>i(null,s)).catch(s=>i(s,null));return}const n=r;return this._sendRequestAsync(t).then(i=>n(null,i)).catch(i=>n(i,null))}async request(t){try{return this._request(t).catch(r=>{throw(0,se.serializeError)(r,t.method)})}catch(r){return Promise.reject((0,se.serializeError)(r,t.method))}}async _request(t){if(!t||typeof t!="object"||Array.isArray(t))throw se.standardErrors.rpc.invalidRequest({message:"Expected a single, non-array, object argument.",data:t});const{method:r,params:n}=t;if(typeof r!="string"||r.length===0)throw se.standardErrors.rpc.invalidRequest({message:"'args.method' must be a non-empty string.",data:t});if(n!==void 0&&!Array.isArray(n)&&(typeof n!="object"||n===null))throw se.standardErrors.rpc.invalidRequest({message:"'args.params' must be an object or array if provided.",data:t});const i=n===void 0?[]:n,s=this._relayEventManager.makeRequestId();return(await this._sendRequestAsync({method:r,params:i,jsonrpc:"2.0",id:s})).result}async scanQRCode(t){const n=await(await this.initializeRelay()).scanQRCode((0,te.ensureRegExpString)(t)).promise;if((0,ot.isErrorResponse)(n))throw(0,se.serializeError)(n.errorMessage,"scanQRCode");if(typeof n.result!="string")throw(0,se.serializeError)("result was not a string","scanQRCode");return n.result}async genericRequest(t,r){const i=await(await this.initializeRelay()).genericRequest(t,r).promise;if((0,ot.isErrorResponse)(i))throw(0,se.serializeError)(i.errorMessage,"generic");if(typeof i.result!="string")throw(0,se.serializeError)("result was not a string","generic");return i.result}async connectAndSignIn(t){var r;(r=this.diagnostic)===null||r===void 0||r.log(vn.EVENTS.ETH_ACCOUNTS_STATE,{method:"provider::connectAndSignIn",sessionIdHash:this._relay?ci.Session.hash(this._relay.session.id):void 0});let n;try{const s=await this.initializeRelay();if(!(s instanceof jv.MobileRelay))throw new Error("connectAndSignIn is only supported on mobile");if(n=await s.connectAndSignIn(t).promise,(0,ot.isErrorResponse)(n))throw new Error(n.errorMessage)}catch(s){throw typeof s.message=="string"&&s.message.match(/(denied|rejected)/i)?se.standardErrors.provider.userRejectedRequest("User denied account authorization"):s}if(!n.result)throw new Error("accounts received is empty");const{accounts:i}=n.result;return this._setAddresses(i),this.isCoinbaseBrowser||await this.switchEthereumChain(this.getChainId()),n.result}async selectProvider(t){const n=await(await this.initializeRelay()).selectProvider(t).promise;if((0,ot.isErrorResponse)(n))throw(0,se.serializeError)(n.errorMessage,"selectProvider");if(typeof n.result!="string")throw(0,se.serializeError)("result was not a string","selectProvider");return n.result}supportsSubscriptions(){return!1}subscribe(){throw new Error("Subscriptions are not supported")}unsubscribe(){throw new Error("Subscriptions are not supported")}disconnect(){return!0}_sendRequest(t){const r={jsonrpc:"2.0",id:t.id},{method:n}=t;if(r.result=this._handleSynchronousMethods(t),r.result===void 0)throw new Error(`Coinbase Wallet does not support calling ${n} synchronously without a callback. Please provide a callback parameter to call ${n} asynchronously.`);return r}_setAddresses(t,r){if(!Array.isArray(t))throw new Error("addresses is not an array");const n=t.map(i=>(0,te.ensureAddressString)(i));JSON.stringify(n)!==JSON.stringify(this._addresses)&&(this._addresses=n,this.emit("accountsChanged",this._addresses),this._storage.setItem(Ec.LOCAL_STORAGE_ADDRESSES_KEY,n.join(" ")))}_sendRequestAsync(t){return new Promise((r,n)=>{try{const i=this._handleSynchronousMethods(t);if(i!==void 0)return r({jsonrpc:"2.0",id:t.id,result:i});const s=this._handleAsynchronousFilterMethods(t);if(s!==void 0){s.then(c=>r(Object.assign(Object.assign({},c),{id:t.id}))).catch(c=>n(c));return}const a=this._handleSubscriptionMethods(t);if(a!==void 0){a.then(c=>r({jsonrpc:"2.0",id:t.id,result:c.result})).catch(c=>n(c));return}}catch(i){return n(i)}this._handleAsynchronousMethods(t).then(i=>i&&r(Object.assign(Object.assign({},i),{id:t.id}))).catch(i=>n(i))})}_sendMultipleRequestsAsync(t){return Promise.all(t.map(r=>this._sendRequestAsync(r)))}_handleSynchronousMethods(t){const{method:r}=t,n=t.params||[];switch(r){case"eth_accounts":return this._eth_accounts();case"eth_coinbase":return this._eth_coinbase();case"eth_uninstallFilter":return this._eth_uninstallFilter(n);case"net_version":return this._net_version();case"eth_chainId":return this._eth_chainId();default:return}}async _handleAsynchronousMethods(t){const{method:r}=t,n=t.params||[];switch(r){case"eth_requestAccounts":return this._eth_requestAccounts();case"eth_sign":return this._eth_sign(n);case"eth_ecRecover":return this._eth_ecRecover(n);case"personal_sign":return this._personal_sign(n);case"personal_ecRecover":return this._personal_ecRecover(n);case"eth_signTransaction":return this._eth_signTransaction(n);case"eth_sendRawTransaction":return this._eth_sendRawTransaction(n);case"eth_sendTransaction":return this._eth_sendTransaction(n);case"eth_signTypedData_v1":return this._eth_signTypedData_v1(n);case"eth_signTypedData_v2":return this._throwUnsupportedMethodError();case"eth_signTypedData_v3":return this._eth_signTypedData_v3(n);case"eth_signTypedData_v4":case"eth_signTypedData":return this._eth_signTypedData_v4(n);case"cbWallet_arbitrary":return this._cbwallet_arbitrary(n);case"wallet_addEthereumChain":return this._wallet_addEthereumChain(n);case"wallet_switchEthereumChain":return this._wallet_switchEthereumChain(n);case"wallet_watchAsset":return this._wallet_watchAsset(n)}return(await this.initializeRelay()).makeEthereumJSONRPCRequest(t,this.jsonRpcUrl).catch(s=>{var a;throw(s.code===se.standardErrorCodes.rpc.methodNotFound||s.code===se.standardErrorCodes.rpc.methodNotSupported)&&((a=this.diagnostic)===null||a===void 0||a.log(vn.EVENTS.METHOD_NOT_IMPLEMENTED,{method:t.method,sessionIdHash:this._relay?ci.Session.hash(this._relay.session.id):void 0})),s})}_handleAsynchronousFilterMethods(t){const{method:r}=t,n=t.params||[];switch(r){case"eth_newFilter":return this._eth_newFilter(n);case"eth_newBlockFilter":return this._eth_newBlockFilter();case"eth_newPendingTransactionFilter":return this._eth_newPendingTransactionFilter();case"eth_getFilterChanges":return this._eth_getFilterChanges(n);case"eth_getFilterLogs":return this._eth_getFilterLogs(n)}}_handleSubscriptionMethods(t){switch(t.method){case"eth_subscribe":case"eth_unsubscribe":return this._subscriptionManager.handleRequest(t)}}_isKnownAddress(t){try{const r=(0,te.ensureAddressString)(t);return this._addresses.map(i=>(0,te.ensureAddressString)(i)).includes(r)}catch{}return!1}_ensureKnownAddress(t){var r;if(!this._isKnownAddress(t))throw(r=this.diagnostic)===null||r===void 0||r.log(vn.EVENTS.UNKNOWN_ADDRESS_ENCOUNTERED),new Error("Unknown Ethereum address")}_prepareTransactionParams(t){const r=t.from?(0,te.ensureAddressString)(t.from):this.selectedAddress;if(!r)throw new Error("Ethereum address is unavailable");this._ensureKnownAddress(r);const n=t.to?(0,te.ensureAddressString)(t.to):null,i=t.value!=null?(0,te.ensureBN)(t.value):new Dv.default(0),s=t.data?(0,te.ensureBuffer)(t.data):Buffer.alloc(0),a=t.nonce!=null?(0,te.ensureIntNumber)(t.nonce):null,c=t.gasPrice!=null?(0,te.ensureBN)(t.gasPrice):null,h=t.maxFeePerGas!=null?(0,te.ensureBN)(t.maxFeePerGas):null,d=t.maxPriorityFeePerGas!=null?(0,te.ensureBN)(t.maxPriorityFeePerGas):null,p=t.gas!=null?(0,te.ensureBN)(t.gas):null,w=t.chainId?(0,te.ensureIntNumber)(t.chainId):this.getChainId();return{fromAddress:r,toAddress:n,weiValue:i,data:s,nonce:a,gasPriceInWei:c,maxFeePerGas:h,maxPriorityFeePerGas:d,gasLimit:p,chainId:w}}_isAuthorized(){return this._addresses.length>0}_requireAuthorization(){if(!this._isAuthorized())throw se.standardErrors.provider.unauthorized({})}_throwUnsupportedMethodError(){throw se.standardErrors.provider.unsupportedMethod({})}async _signEthereumMessage(t,r,n,i){this._ensureKnownAddress(r);try{const a=await(await this.initializeRelay()).signEthereumMessage(t,r,n,i).promise;if((0,ot.isErrorResponse)(a))throw new Error(a.errorMessage);return{jsonrpc:"2.0",id:0,result:a.result}}catch(s){throw typeof s.message=="string"&&s.message.match(/(denied|rejected)/i)?se.standardErrors.provider.userRejectedRequest("User denied message signature"):s}}async _ethereumAddressFromSignedMessage(t,r,n){const s=await(await this.initializeRelay()).ethereumAddressFromSignedMessage(t,r,n).promise;if((0,ot.isErrorResponse)(s))throw new Error(s.errorMessage);return{jsonrpc:"2.0",id:0,result:s.result}}_eth_accounts(){return[...this._addresses]}_eth_coinbase(){return this.selectedAddress||null}_net_version(){return this.getChainId().toString(10)}_eth_chainId(){return(0,te.hexStringFromIntNumber)(this.getChainId())}getChainId(){const t=this._storage.getItem(Sc);if(!t)return(0,te.ensureIntNumber)(this._chainIdFromOpts);const r=parseInt(t,10);return(0,te.ensureIntNumber)(r)}async _eth_requestAccounts(){var t;if((t=this.diagnostic)===null||t===void 0||t.log(vn.EVENTS.ETH_ACCOUNTS_STATE,{method:"provider::_eth_requestAccounts",addresses_length:this._addresses.length,sessionIdHash:this._relay?ci.Session.hash(this._relay.session.id):void 0}),this._isAuthorized())return Promise.resolve({jsonrpc:"2.0",id:0,result:this._addresses});let r;try{if(r=await(await this.initializeRelay()).requestEthereumAccounts().promise,(0,ot.isErrorResponse)(r))throw new Error(r.errorMessage)}catch(n){throw typeof n.message=="string"&&n.message.match(/(denied|rejected)/i)?se.standardErrors.provider.userRejectedRequest("User denied account authorization"):n}if(!r.result)throw new Error("accounts received is empty");return this._setAddresses(r.result),this.isCoinbaseBrowser||await this.switchEthereumChain(this.getChainId()),{jsonrpc:"2.0",id:0,result:this._addresses}}_eth_sign(t){this._requireAuthorization();const r=(0,te.ensureAddressString)(t[0]),n=(0,te.ensureBuffer)(t[1]);return this._signEthereumMessage(n,r,!1)}_eth_ecRecover(t){const r=(0,te.ensureBuffer)(t[0]),n=(0,te.ensureBuffer)(t[1]);return this._ethereumAddressFromSignedMessage(r,n,!1)}_personal_sign(t){this._requireAuthorization();const r=(0,te.ensureBuffer)(t[0]),n=(0,te.ensureAddressString)(t[1]);return this._signEthereumMessage(r,n,!0)}_personal_ecRecover(t){const r=(0,te.ensureBuffer)(t[0]),n=(0,te.ensureBuffer)(t[1]);return this._ethereumAddressFromSignedMessage(r,n,!0)}async _eth_signTransaction(t){this._requireAuthorization();const r=this._prepareTransactionParams(t[0]||{});try{const i=await(await this.initializeRelay()).signEthereumTransaction(r).promise;if((0,ot.isErrorResponse)(i))throw new Error(i.errorMessage);return{jsonrpc:"2.0",id:0,result:i.result}}catch(n){throw typeof n.message=="string"&&n.message.match(/(denied|rejected)/i)?se.standardErrors.provider.userRejectedRequest("User denied transaction signature"):n}}async _eth_sendRawTransaction(t){const r=(0,te.ensureBuffer)(t[0]),i=await(await this.initializeRelay()).submitEthereumTransaction(r,this.getChainId()).promise;if((0,ot.isErrorResponse)(i))throw new Error(i.errorMessage);return{jsonrpc:"2.0",id:0,result:i.result}}async _eth_sendTransaction(t){this._requireAuthorization();const r=this._prepareTransactionParams(t[0]||{});try{const i=await(await this.initializeRelay()).signAndSubmitEthereumTransaction(r).promise;if((0,ot.isErrorResponse)(i))throw new Error(i.errorMessage);return{jsonrpc:"2.0",id:0,result:i.result}}catch(n){throw typeof n.message=="string"&&n.message.match(/(denied|rejected)/i)?se.standardErrors.provider.userRejectedRequest("User denied transaction signature"):n}}async _eth_signTypedData_v1(t){this._requireAuthorization();const r=(0,te.ensureParsedJSONObject)(t[0]),n=(0,te.ensureAddressString)(t[1]);this._ensureKnownAddress(n);const i=Zs.default.hashForSignTypedDataLegacy({data:r}),s=JSON.stringify(r,null,2);return this._signEthereumMessage(i,n,!1,s)}async _eth_signTypedData_v3(t){this._requireAuthorization();const r=(0,te.ensureAddressString)(t[0]),n=(0,te.ensureParsedJSONObject)(t[1]);this._ensureKnownAddress(r);const i=Zs.default.hashForSignTypedData_v3({data:n}),s=JSON.stringify(n,null,2);return this._signEthereumMessage(i,r,!1,s)}async _eth_signTypedData_v4(t){this._requireAuthorization();const r=(0,te.ensureAddressString)(t[0]),n=(0,te.ensureParsedJSONObject)(t[1]);this._ensureKnownAddress(r);const i=Zs.default.hashForSignTypedData_v4({data:n}),s=JSON.stringify(n,null,2);return this._signEthereumMessage(i,r,!1,s)}async _cbwallet_arbitrary(t){const r=t[0],n=t[1];if(typeof n!="string")throw new Error("parameter must be a string");if(typeof r!="object"||r===null)throw new Error("parameter must be an object");return{jsonrpc:"2.0",id:0,result:await this.genericRequest(r,n)}}async _wallet_addEthereumChain(t){var r,n,i,s;const a=t[0];if(((r=a.rpcUrls)===null||r===void 0?void 0:r.length)===0)return{jsonrpc:"2.0",id:0,error:{code:2,message:"please pass in at least 1 rpcUrl"}};if(!a.chainName||a.chainName.trim()==="")throw se.standardErrors.rpc.invalidParams("chainName is a required field");if(!a.nativeCurrency)throw se.standardErrors.rpc.invalidParams("nativeCurrency is a required field");const c=parseInt(a.chainId,16);return await this.addEthereumChain(c,(n=a.rpcUrls)!==null&&n!==void 0?n:[],(i=a.blockExplorerUrls)!==null&&i!==void 0?i:[],a.chainName,(s=a.iconUrls)!==null&&s!==void 0?s:[],a.nativeCurrency)?{jsonrpc:"2.0",id:0,result:null}:{jsonrpc:"2.0",id:0,error:{code:2,message:"unable to add ethereum chain"}}}async _wallet_switchEthereumChain(t){const r=t[0];return await this.switchEthereumChain(parseInt(r.chainId,16)),{jsonrpc:"2.0",id:0,result:null}}async _wallet_watchAsset(t){const r=Array.isArray(t)?t[0]:t;if(!r.type)throw se.standardErrors.rpc.invalidParams("Type is required");if((r==null?void 0:r.type)!=="ERC20")throw se.standardErrors.rpc.invalidParams(`Asset of type '${r.type}' is not supported`);if(!(r!=null&&r.options))throw se.standardErrors.rpc.invalidParams("Options are required");if(!(r!=null&&r.options.address))throw se.standardErrors.rpc.invalidParams("Address is required");const n=this.getChainId(),{address:i,symbol:s,image:a,decimals:c}=r.options;return{jsonrpc:"2.0",id:0,result:await this.watchAsset(r.type,i,s,c,a,n)}}_eth_uninstallFilter(t){const r=(0,te.ensureHexString)(t[0]);return this._filterPolyfill.uninstallFilter(r)}async _eth_newFilter(t){const r=t[0];return{jsonrpc:"2.0",id:0,result:await this._filterPolyfill.newFilter(r)}}async _eth_newBlockFilter(){return{jsonrpc:"2.0",id:0,result:await this._filterPolyfill.newBlockFilter()}}async _eth_newPendingTransactionFilter(){return{jsonrpc:"2.0",id:0,result:await this._filterPolyfill.newPendingTransactionFilter()}}_eth_getFilterChanges(t){const r=(0,te.ensureHexString)(t[0]);return this._filterPolyfill.getFilterChanges(r)}_eth_getFilterLogs(t){const r=(0,te.ensureHexString)(t[0]);return this._filterPolyfill.getFilterLogs(r)}initializeRelay(){return this._relay?Promise.resolve(this._relay):this._relayProvider().then(t=>(t.setAccountsCallback((r,n)=>this._setAddresses(r,n)),t.setChainCallback((r,n)=>{this.updateProviderInfo(n,parseInt(r,10))}),t.setDappDefaultChainCallback(this._chainIdFromOpts),this._relay=t,t))}}Qr.CoinbaseWalletProvider=Wv;var hs={};Object.defineProperty(hs,"__esModule",{value:!0});hs.RelayEventManager=void 0;const Vv=q;class qv{constructor(){this._nextRequestId=0,this.callbacks=new Map}makeRequestId(){this._nextRequestId=(this._nextRequestId+1)%2147483647;const t=this._nextRequestId,r=(0,Vv.prepend0x)(t.toString(16));return this.callbacks.get(r)&&this.callbacks.delete(r),t}}hs.RelayEventManager=qv;Object.defineProperty(_n,"__esModule",{value:!0});_n.CoinbaseWalletSDK=void 0;const zv=bi,Gv=vi,Mc=q,Jv=Ri,Zv=Qr,Kv=An,Qv=Fn,Yv=hs,Xv=Bn,ew=Nn,Su=on;class ds{constructor(t){var r,n,i;this._appName="",this._appLogoUrl=null,this._relay=null,this._relayEventManager=null;const s=t.linkAPIUrl||Gv.LINK_API_URL;typeof t.overrideIsMetaMask>"u"?this._overrideIsMetaMask=!1:this._overrideIsMetaMask=t.overrideIsMetaMask,this._overrideIsCoinbaseWallet=(r=t.overrideIsCoinbaseWallet)!==null&&r!==void 0?r:!0,this._overrideIsCoinbaseBrowser=(n=t.overrideIsCoinbaseBrowser)!==null&&n!==void 0?n:!1,this._diagnosticLogger=t.diagnosticLogger,this._reloadOnDisconnect=(i=t.reloadOnDisconnect)!==null&&i!==void 0?i:!0;const a=new URL(s),c=`${a.protocol}//${a.host}`;if(this._storage=new Jv.ScopedLocalStorage(`-walletlink:${c}`),this._storage.setItem("version",ds.VERSION),this.walletExtension||this.coinbaseBrowser)return;this._relayEventManager=new Yv.RelayEventManager;const h=(0,Mc.isMobileWeb)(),d=t.uiConstructor||(w=>h?new Qv.MobileRelayUI(w):new Xv.WalletLinkRelayUI(w)),p={linkAPIUrl:s,version:Su.LIB_VERSION,darkMode:!!t.darkMode,headlessMode:!!t.headlessMode,uiConstructor:d,storage:this._storage,relayEventManager:this._relayEventManager,diagnosticLogger:this._diagnosticLogger,reloadOnDisconnect:this._reloadOnDisconnect,enableMobileWalletLink:t.enableMobileWalletLink};this._relay=h?new Kv.MobileRelay(p):new ew.WalletLinkRelay(p),this.setAppInfo(t.appName,t.appLogoUrl),!t.headlessMode&&this._relay.attachUI()}makeWeb3Provider(t="",r=1){const n=this.walletExtension;if(n)return this.isCipherProvider(n)||n.setProviderInfo(t,r),this._reloadOnDisconnect===!1&&typeof n.disableReloadOnDisconnect=="function"&&n.disableReloadOnDisconnect(),n;const i=this.coinbaseBrowser;if(i)return i;const s=this._relay;if(!s||!this._relayEventManager||!this._storage)throw new Error("Relay not initialized, should never happen");return t||s.setConnectDisabled(!0),new Zv.CoinbaseWalletProvider({relayProvider:()=>Promise.resolve(s),relayEventManager:this._relayEventManager,storage:this._storage,jsonRpcUrl:t,chainId:r,qrUrl:this.getQrUrl(),diagnosticLogger:this._diagnosticLogger,overrideIsMetaMask:this._overrideIsMetaMask,overrideIsCoinbaseWallet:this._overrideIsCoinbaseWallet,overrideIsCoinbaseBrowser:this._overrideIsCoinbaseBrowser})}setAppInfo(t,r){var n;this._appName=t||"DApp",this._appLogoUrl=r||(0,Mc.getFavicon)();const i=this.walletExtension;i?this.isCipherProvider(i)||i.setAppInfo(this._appName,this._appLogoUrl):(n=this._relay)===null||n===void 0||n.setAppInfo(this._appName,this._appLogoUrl)}disconnect(){var t;const r=this===null||this===void 0?void 0:this.walletExtension;r?r.close():(t=this._relay)===null||t===void 0||t.resetAndReload()}getQrUrl(){var t,r;return(r=(t=this._relay)===null||t===void 0?void 0:t.getQRCodeUrl())!==null&&r!==void 0?r:null}getCoinbaseWalletLogo(t,r=240){return(0,zv.walletLogo)(t,r)}get walletExtension(){var t;return(t=window.coinbaseWalletExtension)!==null&&t!==void 0?t:window.walletLinkExtension}get coinbaseBrowser(){var t,r;try{const n=(t=window.ethereum)!==null&&t!==void 0?t:(r=window.top)===null||r===void 0?void 0:r.ethereum;return n&&"isCoinbaseBrowser"in n&&n.isCoinbaseBrowser?n:void 0}catch{return}}isCipherProvider(t){return typeof t.isCipher=="boolean"&&t.isCipher}}_n.CoinbaseWalletSDK=ds;ds.VERSION=Su.LIB_VERSION;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CoinbaseWalletProvider=e.CoinbaseWalletSDK=void 0;const t=_n,r=Qr;var n=_n;Object.defineProperty(e,"CoinbaseWalletSDK",{enumerable:!0,get:function(){return n.CoinbaseWalletSDK}});var i=Qr;Object.defineProperty(e,"CoinbaseWalletProvider",{enumerable:!0,get:function(){return i.CoinbaseWalletProvider}}),e.default=t.CoinbaseWalletSDK,typeof window<"u"&&(window.CoinbaseWalletSDK=t.CoinbaseWalletSDK,window.CoinbaseWalletProvider=r.CoinbaseWalletProvider,window.WalletLink=t.CoinbaseWalletSDK,window.WalletLinkProvider=r.CoinbaseWalletProvider)})(Cc);const tw=Cu(Cc),gw=Object.freeze(Object.defineProperty({__proto__:null,default:tw},Symbol.toStringTag,{value:"Module"}));export{gw as i};
